(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();function yu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $o={exports:{}},Hi={},Oo={exports:{}},$={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ir=Symbol.for("react.element"),gu=Symbol.for("react.portal"),xu=Symbol.for("react.fragment"),vu=Symbol.for("react.strict_mode"),wu=Symbol.for("react.profiler"),bu=Symbol.for("react.provider"),ju=Symbol.for("react.context"),ku=Symbol.for("react.forward_ref"),Nu=Symbol.for("react.suspense"),Su=Symbol.for("react.memo"),_u=Symbol.for("react.lazy"),Nl=Symbol.iterator;function Cu(e){return e===null||typeof e!="object"?null:(e=Nl&&e[Nl]||e["@@iterator"],typeof e=="function"?e:null)}var Fo={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ho=Object.assign,Bo={};function Dn(e,t,n){this.props=e,this.context=t,this.refs=Bo,this.updater=n||Fo}Dn.prototype.isReactComponent={};Dn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Dn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Wo(){}Wo.prototype=Dn.prototype;function Cs(e,t,n){this.props=e,this.context=t,this.refs=Bo,this.updater=n||Fo}var Es=Cs.prototype=new Wo;Es.constructor=Cs;Ho(Es,Dn.prototype);Es.isPureReactComponent=!0;var Sl=Array.isArray,Vo=Object.prototype.hasOwnProperty,Ms={current:null},Qo={key:!0,ref:!0,__self:!0,__source:!0};function Uo(e,t,n){var r,a={},s=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(s=""+t.key),t)Vo.call(t,r)&&!Qo.hasOwnProperty(r)&&(a[r]=t[r]);var c=arguments.length-2;if(c===1)a.children=n;else if(1<c){for(var o=Array(c),d=0;d<c;d++)o[d]=arguments[d+2];a.children=o}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)a[r]===void 0&&(a[r]=c[r]);return{$$typeof:Ir,type:e,key:s,ref:l,props:a,_owner:Ms.current}}function Eu(e,t){return{$$typeof:Ir,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ps(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ir}function Mu(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var _l=/\/+/g;function ia(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Mu(""+e.key):t.toString(36)}function ri(e,t,n,r,a){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Ir:case gu:l=!0}}if(l)return l=e,a=a(l),e=r===""?"."+ia(l,0):r,Sl(a)?(n="",e!=null&&(n=e.replace(_l,"$&/")+"/"),ri(a,t,n,"",function(d){return d})):a!=null&&(Ps(a)&&(a=Eu(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(_l,"$&/")+"/")+e)),t.push(a)),1;if(l=0,r=r===""?".":r+":",Sl(e))for(var c=0;c<e.length;c++){s=e[c];var o=r+ia(s,c);l+=ri(s,t,n,o,a)}else if(o=Cu(e),typeof o=="function")for(e=o.call(e),c=0;!(s=e.next()).done;)s=s.value,o=r+ia(s,c++),l+=ri(s,t,n,o,a);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Or(e,t,n){if(e==null)return e;var r=[],a=0;return ri(e,r,"","",function(s){return t.call(n,s,a++)}),r}function Pu(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var je={current:null},ii={transition:null},Tu={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:ii,ReactCurrentOwner:Ms};function Go(){throw Error("act(...) is not supported in production builds of React.")}$.Children={map:Or,forEach:function(e,t,n){Or(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Or(e,function(){t++}),t},toArray:function(e){return Or(e,function(t){return t})||[]},only:function(e){if(!Ps(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};$.Component=Dn;$.Fragment=xu;$.Profiler=wu;$.PureComponent=Cs;$.StrictMode=vu;$.Suspense=Nu;$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tu;$.act=Go;$.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ho({},e.props),a=e.key,s=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,l=Ms.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(o in t)Vo.call(t,o)&&!Qo.hasOwnProperty(o)&&(r[o]=t[o]===void 0&&c!==void 0?c[o]:t[o])}var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){c=Array(o);for(var d=0;d<o;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Ir,type:e.type,key:a,ref:s,props:r,_owner:l}};$.createContext=function(e){return e={$$typeof:ju,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:bu,_context:e},e.Consumer=e};$.createElement=Uo;$.createFactory=function(e){var t=Uo.bind(null,e);return t.type=e,t};$.createRef=function(){return{current:null}};$.forwardRef=function(e){return{$$typeof:ku,render:e}};$.isValidElement=Ps;$.lazy=function(e){return{$$typeof:_u,_payload:{_status:-1,_result:e},_init:Pu}};$.memo=function(e,t){return{$$typeof:Su,type:e,compare:t===void 0?null:t}};$.startTransition=function(e){var t=ii.transition;ii.transition={};try{e()}finally{ii.transition=t}};$.unstable_act=Go;$.useCallback=function(e,t){return je.current.useCallback(e,t)};$.useContext=function(e){return je.current.useContext(e)};$.useDebugValue=function(){};$.useDeferredValue=function(e){return je.current.useDeferredValue(e)};$.useEffect=function(e,t){return je.current.useEffect(e,t)};$.useId=function(){return je.current.useId()};$.useImperativeHandle=function(e,t,n){return je.current.useImperativeHandle(e,t,n)};$.useInsertionEffect=function(e,t){return je.current.useInsertionEffect(e,t)};$.useLayoutEffect=function(e,t){return je.current.useLayoutEffect(e,t)};$.useMemo=function(e,t){return je.current.useMemo(e,t)};$.useReducer=function(e,t,n){return je.current.useReducer(e,t,n)};$.useRef=function(e){return je.current.useRef(e)};$.useState=function(e){return je.current.useState(e)};$.useSyncExternalStore=function(e,t,n){return je.current.useSyncExternalStore(e,t,n)};$.useTransition=function(){return je.current.useTransition()};$.version="18.3.1";Oo.exports=$;var C=Oo.exports;const Iu=yu(C);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lu=C,Ru=Symbol.for("react.element"),qu=Symbol.for("react.fragment"),zu=Object.prototype.hasOwnProperty,Au=Lu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Du={key:!0,ref:!0,__self:!0,__source:!0};function Yo(e,t,n){var r,a={},s=null,l=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)zu.call(t,r)&&!Du.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Ru,type:e,key:s,ref:l,props:a,_owner:Au.current}}Hi.Fragment=qu;Hi.jsx=Yo;Hi.jsxs=Yo;$o.exports=Hi;var i=$o.exports,Ko={exports:{}},Re={},Xo={exports:{}},Jo={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,R){var z=P.length;P.push(R);e:for(;0<z;){var Y=z-1>>>1,ne=P[Y];if(0<a(ne,R))P[Y]=R,P[z]=ne,z=Y;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var R=P[0],z=P.pop();if(z!==R){P[0]=z;e:for(var Y=0,ne=P.length,on=ne>>>1;Y<on;){var tt=2*(Y+1)-1,Bn=P[tt],nt=tt+1,Vt=P[nt];if(0>a(Bn,z))nt<ne&&0>a(Vt,Bn)?(P[Y]=Vt,P[nt]=z,Y=nt):(P[Y]=Bn,P[tt]=z,Y=tt);else if(nt<ne&&0>a(Vt,z))P[Y]=Vt,P[nt]=z,Y=nt;else break e}}return R}function a(P,R){var z=P.sortIndex-R.sortIndex;return z!==0?z:P.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var o=[],d=[],m=1,y=null,u=3,h=!1,x=!1,v=!1,N=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(P){for(var R=n(d);R!==null;){if(R.callback===null)r(d);else if(R.startTime<=P)r(d),R.sortIndex=R.expirationTime,t(o,R);else break;R=n(d)}}function k(P){if(v=!1,f(P),!x)if(n(o)!==null)x=!0,Fn(j);else{var R=n(d);R!==null&&Hn(k,R.startTime-P)}}function j(P,R){x=!1,v&&(v=!1,g(M),M=-1),h=!0;var z=u;try{for(f(R),y=n(o);y!==null&&(!(y.expirationTime>R)||P&&!Me());){var Y=y.callback;if(typeof Y=="function"){y.callback=null,u=y.priorityLevel;var ne=Y(y.expirationTime<=R);R=e.unstable_now(),typeof ne=="function"?y.callback=ne:y===n(o)&&r(o),f(R)}else r(o);y=n(o)}if(y!==null)var on=!0;else{var tt=n(d);tt!==null&&Hn(k,tt.startTime-R),on=!1}return on}finally{y=null,u=z,h=!1}}var E=!1,b=null,M=-1,D=5,q=-1;function Me(){return!(e.unstable_now()-q<D)}function wt(){if(b!==null){var P=e.unstable_now();q=P;var R=!0;try{R=b(!0,P)}finally{R?Wt():(E=!1,b=null)}}else E=!1}var Wt;if(typeof p=="function")Wt=function(){p(wt)};else if(typeof MessageChannel<"u"){var Dr=new MessageChannel,$r=Dr.port2;Dr.port1.onmessage=wt,Wt=function(){$r.postMessage(null)}}else Wt=function(){N(wt,0)};function Fn(P){b=P,E||(E=!0,Wt())}function Hn(P,R){M=N(function(){P(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){x||h||(x=!0,Fn(j))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_getFirstCallbackNode=function(){return n(o)},e.unstable_next=function(P){switch(u){case 1:case 2:case 3:var R=3;break;default:R=u}var z=u;u=R;try{return P()}finally{u=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,R){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var z=u;u=P;try{return R()}finally{u=z}},e.unstable_scheduleCallback=function(P,R,z){var Y=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Y+z:Y):z=Y,P){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=z+ne,P={id:m++,callback:R,priorityLevel:P,startTime:z,expirationTime:ne,sortIndex:-1},z>Y?(P.sortIndex=z,t(d,P),n(o)===null&&P===n(d)&&(v?(g(M),M=-1):v=!0,Hn(k,z-Y))):(P.sortIndex=ne,t(o,P),x||h||(x=!0,Fn(j))),P},e.unstable_shouldYield=Me,e.unstable_wrapCallback=function(P){var R=u;return function(){var z=u;u=R;try{return P.apply(this,arguments)}finally{u=z}}}})(Jo);Xo.exports=Jo;var $u=Xo.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ou=C,Le=$u;function S(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zo=new Set,fr={};function sn(e,t){Pn(e,t),Pn(e+"Capture",t)}function Pn(e,t){for(fr[e]=t,e=0;e<t.length;e++)Zo.add(t[e])}var ct=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ta=Object.prototype.hasOwnProperty,Fu=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cl={},El={};function Hu(e){return Ta.call(El,e)?!0:Ta.call(Cl,e)?!1:Fu.test(e)?El[e]=!0:(Cl[e]=!0,!1)}function Bu(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Wu(e,t,n,r){if(t===null||typeof t>"u"||Bu(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ke(e,t,n,r,a,s,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=l}var pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pe[e]=new ke(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pe[t]=new ke(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){pe[e]=new ke(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pe[e]=new ke(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pe[e]=new ke(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){pe[e]=new ke(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){pe[e]=new ke(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){pe[e]=new ke(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){pe[e]=new ke(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ts=/[\-:]([a-z])/g;function Is(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ts,Is);pe[t]=new ke(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ts,Is);pe[t]=new ke(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ts,Is);pe[t]=new ke(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){pe[e]=new ke(e,1,!1,e.toLowerCase(),null,!1,!1)});pe.xlinkHref=new ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){pe[e]=new ke(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ls(e,t,n,r){var a=pe.hasOwnProperty(t)?pe[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Wu(t,n,a,r)&&(n=null),r||a===null?Hu(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ft=Ou.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fr=Symbol.for("react.element"),un=Symbol.for("react.portal"),hn=Symbol.for("react.fragment"),Rs=Symbol.for("react.strict_mode"),Ia=Symbol.for("react.profiler"),ec=Symbol.for("react.provider"),tc=Symbol.for("react.context"),qs=Symbol.for("react.forward_ref"),La=Symbol.for("react.suspense"),Ra=Symbol.for("react.suspense_list"),zs=Symbol.for("react.memo"),kt=Symbol.for("react.lazy"),nc=Symbol.for("react.offscreen"),Ml=Symbol.iterator;function Vn(e){return e===null||typeof e!="object"?null:(e=Ml&&e[Ml]||e["@@iterator"],typeof e=="function"?e:null)}var J=Object.assign,aa;function Zn(e){if(aa===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);aa=t&&t[1]||""}return`
`+aa+e}var sa=!1;function la(e,t){if(!e||sa)return"";sa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),s=r.stack.split(`
`),l=a.length-1,c=s.length-1;1<=l&&0<=c&&a[l]!==s[c];)c--;for(;1<=l&&0<=c;l--,c--)if(a[l]!==s[c]){if(l!==1||c!==1)do if(l--,c--,0>c||a[l]!==s[c]){var o=`
`+a[l].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=l&&0<=c);break}}}finally{sa=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Zn(e):""}function Vu(e){switch(e.tag){case 5:return Zn(e.type);case 16:return Zn("Lazy");case 13:return Zn("Suspense");case 19:return Zn("SuspenseList");case 0:case 2:case 15:return e=la(e.type,!1),e;case 11:return e=la(e.type.render,!1),e;case 1:return e=la(e.type,!0),e;default:return""}}function qa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hn:return"Fragment";case un:return"Portal";case Ia:return"Profiler";case Rs:return"StrictMode";case La:return"Suspense";case Ra:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case tc:return(e.displayName||"Context")+".Consumer";case ec:return(e._context.displayName||"Context")+".Provider";case qs:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case zs:return t=e.displayName||null,t!==null?t:qa(e.type)||"Memo";case kt:t=e._payload,e=e._init;try{return qa(e(t))}catch{}}return null}function Qu(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qa(t);case 8:return t===Rs?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Dt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Uu(e){var t=rc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Hr(e){e._valueTracker||(e._valueTracker=Uu(e))}function ic(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=rc(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function fi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function za(e,t){var n=t.checked;return J({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Pl(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Dt(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ac(e,t){t=t.checked,t!=null&&Ls(e,"checked",t,!1)}function Aa(e,t){ac(e,t);var n=Dt(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Da(e,t.type,n):t.hasOwnProperty("defaultValue")&&Da(e,t.type,Dt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Tl(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Da(e,t,n){(t!=="number"||fi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var er=Array.isArray;function Nn(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Dt(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function $a(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(S(91));return J({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Il(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(S(92));if(er(n)){if(1<n.length)throw Error(S(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Dt(n)}}function sc(e,t){var n=Dt(t.value),r=Dt(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ll(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Br,oc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Br=Br||document.createElement("div"),Br.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Br.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function yr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ar={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gu=["Webkit","ms","Moz","O"];Object.keys(ar).forEach(function(e){Gu.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ar[t]=ar[e]})});function cc(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ar.hasOwnProperty(e)&&ar[e]?(""+t).trim():t+"px"}function dc(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=cc(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var Yu=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fa(e,t){if(t){if(Yu[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(S(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(S(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(S(61))}if(t.style!=null&&typeof t.style!="object")throw Error(S(62))}}function Ha(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ba=null;function As(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wa=null,Sn=null,_n=null;function Rl(e){if(e=qr(e)){if(typeof Wa!="function")throw Error(S(280));var t=e.stateNode;t&&(t=Ui(t),Wa(e.stateNode,e.type,t))}}function uc(e){Sn?_n?_n.push(e):_n=[e]:Sn=e}function hc(){if(Sn){var e=Sn,t=_n;if(_n=Sn=null,Rl(e),t)for(e=0;e<t.length;e++)Rl(t[e])}}function mc(e,t){return e(t)}function pc(){}var oa=!1;function fc(e,t,n){if(oa)return e(t,n);oa=!0;try{return mc(e,t,n)}finally{oa=!1,(Sn!==null||_n!==null)&&(pc(),hc())}}function gr(e,t){var n=e.stateNode;if(n===null)return null;var r=Ui(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(S(231,t,typeof n));return n}var Va=!1;if(ct)try{var Qn={};Object.defineProperty(Qn,"passive",{get:function(){Va=!0}}),window.addEventListener("test",Qn,Qn),window.removeEventListener("test",Qn,Qn)}catch{Va=!1}function Ku(e,t,n,r,a,s,l,c,o){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(m){this.onError(m)}}var sr=!1,yi=null,gi=!1,Qa=null,Xu={onError:function(e){sr=!0,yi=e}};function Ju(e,t,n,r,a,s,l,c,o){sr=!1,yi=null,Ku.apply(Xu,arguments)}function Zu(e,t,n,r,a,s,l,c,o){if(Ju.apply(this,arguments),sr){if(sr){var d=yi;sr=!1,yi=null}else throw Error(S(198));gi||(gi=!0,Qa=d)}}function ln(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function yc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ql(e){if(ln(e)!==e)throw Error(S(188))}function eh(e){var t=e.alternate;if(!t){if(t=ln(e),t===null)throw Error(S(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return ql(a),e;if(s===r)return ql(a),t;s=s.sibling}throw Error(S(188))}if(n.return!==r.return)n=a,r=s;else{for(var l=!1,c=a.child;c;){if(c===n){l=!0,n=a,r=s;break}if(c===r){l=!0,r=a,n=s;break}c=c.sibling}if(!l){for(c=s.child;c;){if(c===n){l=!0,n=s,r=a;break}if(c===r){l=!0,r=s,n=a;break}c=c.sibling}if(!l)throw Error(S(189))}}if(n.alternate!==r)throw Error(S(190))}if(n.tag!==3)throw Error(S(188));return n.stateNode.current===n?e:t}function gc(e){return e=eh(e),e!==null?xc(e):null}function xc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xc(e);if(t!==null)return t;e=e.sibling}return null}var vc=Le.unstable_scheduleCallback,zl=Le.unstable_cancelCallback,th=Le.unstable_shouldYield,nh=Le.unstable_requestPaint,te=Le.unstable_now,rh=Le.unstable_getCurrentPriorityLevel,Ds=Le.unstable_ImmediatePriority,wc=Le.unstable_UserBlockingPriority,xi=Le.unstable_NormalPriority,ih=Le.unstable_LowPriority,bc=Le.unstable_IdlePriority,Bi=null,Ze=null;function ah(e){if(Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(Bi,e,void 0,(e.current.flags&128)===128)}catch{}}var Ue=Math.clz32?Math.clz32:oh,sh=Math.log,lh=Math.LN2;function oh(e){return e>>>=0,e===0?32:31-(sh(e)/lh|0)|0}var Wr=64,Vr=4194304;function tr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,l=n&268435455;if(l!==0){var c=l&~a;c!==0?r=tr(c):(s&=l,s!==0&&(r=tr(s)))}else l=n&~a,l!==0?r=tr(l):s!==0&&(r=tr(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,s=t&-t,a>=s||a===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ue(t),a=1<<n,r|=e[n],t&=~a;return r}function ch(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dh(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-Ue(s),c=1<<l,o=a[l];o===-1?(!(c&n)||c&r)&&(a[l]=ch(c,t)):o<=t&&(e.expiredLanes|=c),s&=~c}}function Ua(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jc(){var e=Wr;return Wr<<=1,!(Wr&4194240)&&(Wr=64),e}function ca(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Lr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ue(t),e[t]=n}function uh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Ue(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}function $s(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ue(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var W=0;function kc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Nc,Os,Sc,_c,Cc,Ga=!1,Qr=[],Pt=null,Tt=null,It=null,xr=new Map,vr=new Map,St=[],hh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Al(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":xr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vr.delete(t.pointerId)}}function Un(e,t,n,r,a,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},t!==null&&(t=qr(t),t!==null&&Os(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function mh(e,t,n,r,a){switch(t){case"focusin":return Pt=Un(Pt,e,t,n,r,a),!0;case"dragenter":return Tt=Un(Tt,e,t,n,r,a),!0;case"mouseover":return It=Un(It,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return xr.set(s,Un(xr.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,vr.set(s,Un(vr.get(s)||null,e,t,n,r,a)),!0}return!1}function Ec(e){var t=Gt(e.target);if(t!==null){var n=ln(t);if(n!==null){if(t=n.tag,t===13){if(t=yc(n),t!==null){e.blockedOn=t,Cc(e.priority,function(){Sc(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ai(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ya(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ba=r,n.target.dispatchEvent(r),Ba=null}else return t=qr(n),t!==null&&Os(t),e.blockedOn=n,!1;t.shift()}return!0}function Dl(e,t,n){ai(e)&&n.delete(t)}function ph(){Ga=!1,Pt!==null&&ai(Pt)&&(Pt=null),Tt!==null&&ai(Tt)&&(Tt=null),It!==null&&ai(It)&&(It=null),xr.forEach(Dl),vr.forEach(Dl)}function Gn(e,t){e.blockedOn===t&&(e.blockedOn=null,Ga||(Ga=!0,Le.unstable_scheduleCallback(Le.unstable_NormalPriority,ph)))}function wr(e){function t(a){return Gn(a,e)}if(0<Qr.length){Gn(Qr[0],e);for(var n=1;n<Qr.length;n++){var r=Qr[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Pt!==null&&Gn(Pt,e),Tt!==null&&Gn(Tt,e),It!==null&&Gn(It,e),xr.forEach(t),vr.forEach(t),n=0;n<St.length;n++)r=St[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<St.length&&(n=St[0],n.blockedOn===null);)Ec(n),n.blockedOn===null&&St.shift()}var Cn=ft.ReactCurrentBatchConfig,wi=!0;function fh(e,t,n,r){var a=W,s=Cn.transition;Cn.transition=null;try{W=1,Fs(e,t,n,r)}finally{W=a,Cn.transition=s}}function yh(e,t,n,r){var a=W,s=Cn.transition;Cn.transition=null;try{W=4,Fs(e,t,n,r)}finally{W=a,Cn.transition=s}}function Fs(e,t,n,r){if(wi){var a=Ya(e,t,n,r);if(a===null)va(e,t,r,bi,n),Al(e,r);else if(mh(a,e,t,n,r))r.stopPropagation();else if(Al(e,r),t&4&&-1<hh.indexOf(e)){for(;a!==null;){var s=qr(a);if(s!==null&&Nc(s),s=Ya(e,t,n,r),s===null&&va(e,t,r,bi,n),s===a)break;a=s}a!==null&&r.stopPropagation()}else va(e,t,r,null,n)}}var bi=null;function Ya(e,t,n,r){if(bi=null,e=As(r),e=Gt(e),e!==null)if(t=ln(e),t===null)e=null;else if(n=t.tag,n===13){if(e=yc(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return bi=e,null}function Mc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rh()){case Ds:return 1;case wc:return 4;case xi:case ih:return 16;case bc:return 536870912;default:return 16}default:return 16}}var Et=null,Hs=null,si=null;function Pc(){if(si)return si;var e,t=Hs,n=t.length,r,a="value"in Et?Et.value:Et.textContent,s=a.length;for(e=0;e<n&&t[e]===a[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===a[s-r];r++);return si=a.slice(e,1<r?1-r:void 0)}function li(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ur(){return!0}function $l(){return!1}function qe(e){function t(n,r,a,s,l){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ur:$l,this.isPropagationStopped=$l,this}return J(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){},isPersistent:Ur}),t}var $n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bs=qe($n),Rr=J({},$n,{view:0,detail:0}),gh=qe(Rr),da,ua,Yn,Wi=J({},Rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ws,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yn&&(Yn&&e.type==="mousemove"?(da=e.screenX-Yn.screenX,ua=e.screenY-Yn.screenY):ua=da=0,Yn=e),da)},movementY:function(e){return"movementY"in e?e.movementY:ua}}),Ol=qe(Wi),xh=J({},Wi,{dataTransfer:0}),vh=qe(xh),wh=J({},Rr,{relatedTarget:0}),ha=qe(wh),bh=J({},$n,{animationName:0,elapsedTime:0,pseudoElement:0}),jh=qe(bh),kh=J({},$n,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Nh=qe(kh),Sh=J({},$n,{data:0}),Fl=qe(Sh),_h={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ch={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Eh[e])?!!t[e]:!1}function Ws(){return Mh}var Ph=J({},Rr,{key:function(e){if(e.key){var t=_h[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=li(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ch[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ws,charCode:function(e){return e.type==="keypress"?li(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?li(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Th=qe(Ph),Ih=J({},Wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hl=qe(Ih),Lh=J({},Rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ws}),Rh=qe(Lh),qh=J({},$n,{propertyName:0,elapsedTime:0,pseudoElement:0}),zh=qe(qh),Ah=J({},Wi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dh=qe(Ah),$h=[9,13,27,32],Vs=ct&&"CompositionEvent"in window,lr=null;ct&&"documentMode"in document&&(lr=document.documentMode);var Oh=ct&&"TextEvent"in window&&!lr,Tc=ct&&(!Vs||lr&&8<lr&&11>=lr),Bl=" ",Wl=!1;function Ic(e,t){switch(e){case"keyup":return $h.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mn=!1;function Fh(e,t){switch(e){case"compositionend":return Lc(t);case"keypress":return t.which!==32?null:(Wl=!0,Bl);case"textInput":return e=t.data,e===Bl&&Wl?null:e;default:return null}}function Hh(e,t){if(mn)return e==="compositionend"||!Vs&&Ic(e,t)?(e=Pc(),si=Hs=Et=null,mn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tc&&t.locale!=="ko"?null:t.data;default:return null}}var Bh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bh[e.type]:t==="textarea"}function Rc(e,t,n,r){uc(r),t=ji(t,"onChange"),0<t.length&&(n=new Bs("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var or=null,br=null;function Wh(e){Vc(e,0)}function Vi(e){var t=yn(e);if(ic(t))return e}function Vh(e,t){if(e==="change")return t}var qc=!1;if(ct){var ma;if(ct){var pa="oninput"in document;if(!pa){var Ql=document.createElement("div");Ql.setAttribute("oninput","return;"),pa=typeof Ql.oninput=="function"}ma=pa}else ma=!1;qc=ma&&(!document.documentMode||9<document.documentMode)}function Ul(){or&&(or.detachEvent("onpropertychange",zc),br=or=null)}function zc(e){if(e.propertyName==="value"&&Vi(br)){var t=[];Rc(t,br,e,As(e)),fc(Wh,t)}}function Qh(e,t,n){e==="focusin"?(Ul(),or=t,br=n,or.attachEvent("onpropertychange",zc)):e==="focusout"&&Ul()}function Uh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vi(br)}function Gh(e,t){if(e==="click")return Vi(t)}function Yh(e,t){if(e==="input"||e==="change")return Vi(t)}function Kh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ye=typeof Object.is=="function"?Object.is:Kh;function jr(e,t){if(Ye(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Ta.call(t,a)||!Ye(e[a],t[a]))return!1}return!0}function Gl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yl(e,t){var n=Gl(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gl(n)}}function Ac(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ac(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Dc(){for(var e=window,t=fi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=fi(e.document)}return t}function Qs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Xh(e){var t=Dc(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ac(n.ownerDocument.documentElement,n)){if(r!==null&&Qs(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=r.end===void 0?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=Yl(n,s);var l=Yl(n,r);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Jh=ct&&"documentMode"in document&&11>=document.documentMode,pn=null,Ka=null,cr=null,Xa=!1;function Kl(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xa||pn==null||pn!==fi(r)||(r=pn,"selectionStart"in r&&Qs(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cr&&jr(cr,r)||(cr=r,r=ji(Ka,"onSelect"),0<r.length&&(t=new Bs("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pn)))}function Gr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fn={animationend:Gr("Animation","AnimationEnd"),animationiteration:Gr("Animation","AnimationIteration"),animationstart:Gr("Animation","AnimationStart"),transitionend:Gr("Transition","TransitionEnd")},fa={},$c={};ct&&($c=document.createElement("div").style,"AnimationEvent"in window||(delete fn.animationend.animation,delete fn.animationiteration.animation,delete fn.animationstart.animation),"TransitionEvent"in window||delete fn.transitionend.transition);function Qi(e){if(fa[e])return fa[e];if(!fn[e])return e;var t=fn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $c)return fa[e]=t[n];return e}var Oc=Qi("animationend"),Fc=Qi("animationiteration"),Hc=Qi("animationstart"),Bc=Qi("transitionend"),Wc=new Map,Xl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ft(e,t){Wc.set(e,t),sn(t,[e])}for(var ya=0;ya<Xl.length;ya++){var ga=Xl[ya],Zh=ga.toLowerCase(),em=ga[0].toUpperCase()+ga.slice(1);Ft(Zh,"on"+em)}Ft(Oc,"onAnimationEnd");Ft(Fc,"onAnimationIteration");Ft(Hc,"onAnimationStart");Ft("dblclick","onDoubleClick");Ft("focusin","onFocus");Ft("focusout","onBlur");Ft(Bc,"onTransitionEnd");Pn("onMouseEnter",["mouseout","mouseover"]);Pn("onMouseLeave",["mouseout","mouseover"]);Pn("onPointerEnter",["pointerout","pointerover"]);Pn("onPointerLeave",["pointerout","pointerover"]);sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sn("onBeforeInput",["compositionend","keypress","textInput","paste"]);sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tm=new Set("cancel close invalid load scroll toggle".split(" ").concat(nr));function Jl(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Zu(r,t,void 0,e),e.currentTarget=null}function Vc(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var l=r.length-1;0<=l;l--){var c=r[l],o=c.instance,d=c.currentTarget;if(c=c.listener,o!==s&&a.isPropagationStopped())break e;Jl(a,c,d),s=o}else for(l=0;l<r.length;l++){if(c=r[l],o=c.instance,d=c.currentTarget,c=c.listener,o!==s&&a.isPropagationStopped())break e;Jl(a,c,d),s=o}}}if(gi)throw e=Qa,gi=!1,Qa=null,e}function Q(e,t){var n=t[ns];n===void 0&&(n=t[ns]=new Set);var r=e+"__bubble";n.has(r)||(Qc(t,e,2,!1),n.add(r))}function xa(e,t,n){var r=0;t&&(r|=4),Qc(n,e,r,t)}var Yr="_reactListening"+Math.random().toString(36).slice(2);function kr(e){if(!e[Yr]){e[Yr]=!0,Zo.forEach(function(n){n!=="selectionchange"&&(tm.has(n)||xa(n,!1,e),xa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yr]||(t[Yr]=!0,xa("selectionchange",!1,t))}}function Qc(e,t,n,r){switch(Mc(t)){case 1:var a=fh;break;case 4:a=yh;break;default:a=Fs}n=a.bind(null,t,n,e),a=void 0,!Va||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function va(e,t,n,r,a){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var c=r.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(l===4)for(l=r.return;l!==null;){var o=l.tag;if((o===3||o===4)&&(o=l.stateNode.containerInfo,o===a||o.nodeType===8&&o.parentNode===a))return;l=l.return}for(;c!==null;){if(l=Gt(c),l===null)return;if(o=l.tag,o===5||o===6){r=s=l;continue e}c=c.parentNode}}r=r.return}fc(function(){var d=s,m=As(n),y=[];e:{var u=Wc.get(e);if(u!==void 0){var h=Bs,x=e;switch(e){case"keypress":if(li(n)===0)break e;case"keydown":case"keyup":h=Th;break;case"focusin":x="focus",h=ha;break;case"focusout":x="blur",h=ha;break;case"beforeblur":case"afterblur":h=ha;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Ol;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=vh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Rh;break;case Oc:case Fc:case Hc:h=jh;break;case Bc:h=zh;break;case"scroll":h=gh;break;case"wheel":h=Dh;break;case"copy":case"cut":case"paste":h=Nh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Hl}var v=(t&4)!==0,N=!v&&e==="scroll",g=v?u!==null?u+"Capture":null:u;v=[];for(var p=d,f;p!==null;){f=p;var k=f.stateNode;if(f.tag===5&&k!==null&&(f=k,g!==null&&(k=gr(p,g),k!=null&&v.push(Nr(p,k,f)))),N)break;p=p.return}0<v.length&&(u=new h(u,x,null,n,m),y.push({event:u,listeners:v}))}}if(!(t&7)){e:{if(u=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",u&&n!==Ba&&(x=n.relatedTarget||n.fromElement)&&(Gt(x)||x[dt]))break e;if((h||u)&&(u=m.window===m?m:(u=m.ownerDocument)?u.defaultView||u.parentWindow:window,h?(x=n.relatedTarget||n.toElement,h=d,x=x?Gt(x):null,x!==null&&(N=ln(x),x!==N||x.tag!==5&&x.tag!==6)&&(x=null)):(h=null,x=d),h!==x)){if(v=Ol,k="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(v=Hl,k="onPointerLeave",g="onPointerEnter",p="pointer"),N=h==null?u:yn(h),f=x==null?u:yn(x),u=new v(k,p+"leave",h,n,m),u.target=N,u.relatedTarget=f,k=null,Gt(m)===d&&(v=new v(g,p+"enter",x,n,m),v.target=f,v.relatedTarget=N,k=v),N=k,h&&x)t:{for(v=h,g=x,p=0,f=v;f;f=dn(f))p++;for(f=0,k=g;k;k=dn(k))f++;for(;0<p-f;)v=dn(v),p--;for(;0<f-p;)g=dn(g),f--;for(;p--;){if(v===g||g!==null&&v===g.alternate)break t;v=dn(v),g=dn(g)}v=null}else v=null;h!==null&&Zl(y,u,h,v,!1),x!==null&&N!==null&&Zl(y,N,x,v,!0)}}e:{if(u=d?yn(d):window,h=u.nodeName&&u.nodeName.toLowerCase(),h==="select"||h==="input"&&u.type==="file")var j=Vh;else if(Vl(u))if(qc)j=Yh;else{j=Uh;var E=Qh}else(h=u.nodeName)&&h.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(j=Gh);if(j&&(j=j(e,d))){Rc(y,j,n,m);break e}E&&E(e,u,d),e==="focusout"&&(E=u._wrapperState)&&E.controlled&&u.type==="number"&&Da(u,"number",u.value)}switch(E=d?yn(d):window,e){case"focusin":(Vl(E)||E.contentEditable==="true")&&(pn=E,Ka=d,cr=null);break;case"focusout":cr=Ka=pn=null;break;case"mousedown":Xa=!0;break;case"contextmenu":case"mouseup":case"dragend":Xa=!1,Kl(y,n,m);break;case"selectionchange":if(Jh)break;case"keydown":case"keyup":Kl(y,n,m)}var b;if(Vs)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else mn?Ic(e,n)&&(M="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(Tc&&n.locale!=="ko"&&(mn||M!=="onCompositionStart"?M==="onCompositionEnd"&&mn&&(b=Pc()):(Et=m,Hs="value"in Et?Et.value:Et.textContent,mn=!0)),E=ji(d,M),0<E.length&&(M=new Fl(M,e,null,n,m),y.push({event:M,listeners:E}),b?M.data=b:(b=Lc(n),b!==null&&(M.data=b)))),(b=Oh?Fh(e,n):Hh(e,n))&&(d=ji(d,"onBeforeInput"),0<d.length&&(m=new Fl("onBeforeInput","beforeinput",null,n,m),y.push({event:m,listeners:d}),m.data=b))}Vc(y,t)})}function Nr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ji(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=gr(e,n),s!=null&&r.unshift(Nr(e,s,a)),s=gr(e,t),s!=null&&r.push(Nr(e,s,a))),e=e.return}return r}function dn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Zl(e,t,n,r,a){for(var s=t._reactName,l=[];n!==null&&n!==r;){var c=n,o=c.alternate,d=c.stateNode;if(o!==null&&o===r)break;c.tag===5&&d!==null&&(c=d,a?(o=gr(n,s),o!=null&&l.unshift(Nr(n,o,c))):a||(o=gr(n,s),o!=null&&l.push(Nr(n,o,c)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var nm=/\r\n?/g,rm=/\u0000|\uFFFD/g;function eo(e){return(typeof e=="string"?e:""+e).replace(nm,`
`).replace(rm,"")}function Kr(e,t,n){if(t=eo(t),eo(e)!==t&&n)throw Error(S(425))}function ki(){}var Ja=null,Za=null;function es(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ts=typeof setTimeout=="function"?setTimeout:void 0,im=typeof clearTimeout=="function"?clearTimeout:void 0,to=typeof Promise=="function"?Promise:void 0,am=typeof queueMicrotask=="function"?queueMicrotask:typeof to<"u"?function(e){return to.resolve(null).then(e).catch(sm)}:ts;function sm(e){setTimeout(function(){throw e})}function wa(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),wr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);wr(t)}function Lt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function no(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var On=Math.random().toString(36).slice(2),Je="__reactFiber$"+On,Sr="__reactProps$"+On,dt="__reactContainer$"+On,ns="__reactEvents$"+On,lm="__reactListeners$"+On,om="__reactHandles$"+On;function Gt(e){var t=e[Je];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dt]||n[Je]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=no(e);e!==null;){if(n=e[Je])return n;e=no(e)}return t}e=n,n=e.parentNode}return null}function qr(e){return e=e[Je]||e[dt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function yn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(S(33))}function Ui(e){return e[Sr]||null}var rs=[],gn=-1;function Ht(e){return{current:e}}function U(e){0>gn||(e.current=rs[gn],rs[gn]=null,gn--)}function V(e,t){gn++,rs[gn]=e.current,e.current=t}var $t={},xe=Ht($t),_e=Ht(!1),Zt=$t;function Tn(e,t){var n=e.type.contextTypes;if(!n)return $t;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in n)a[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ce(e){return e=e.childContextTypes,e!=null}function Ni(){U(_e),U(xe)}function ro(e,t,n){if(xe.current!==$t)throw Error(S(168));V(xe,t),V(_e,n)}function Uc(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(S(108,Qu(e)||"Unknown",a));return J({},n,r)}function Si(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$t,Zt=xe.current,V(xe,e),V(_e,_e.current),!0}function io(e,t,n){var r=e.stateNode;if(!r)throw Error(S(169));n?(e=Uc(e,t,Zt),r.__reactInternalMemoizedMergedChildContext=e,U(_e),U(xe),V(xe,e)):U(_e),V(_e,n)}var it=null,Gi=!1,ba=!1;function Gc(e){it===null?it=[e]:it.push(e)}function cm(e){Gi=!0,Gc(e)}function Bt(){if(!ba&&it!==null){ba=!0;var e=0,t=W;try{var n=it;for(W=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}it=null,Gi=!1}catch(a){throw it!==null&&(it=it.slice(e+1)),vc(Ds,Bt),a}finally{W=t,ba=!1}}return null}var xn=[],vn=0,_i=null,Ci=0,ze=[],Ae=0,en=null,at=1,st="";function Qt(e,t){xn[vn++]=Ci,xn[vn++]=_i,_i=e,Ci=t}function Yc(e,t,n){ze[Ae++]=at,ze[Ae++]=st,ze[Ae++]=en,en=e;var r=at;e=st;var a=32-Ue(r)-1;r&=~(1<<a),n+=1;var s=32-Ue(t)+a;if(30<s){var l=a-a%5;s=(r&(1<<l)-1).toString(32),r>>=l,a-=l,at=1<<32-Ue(t)+a|n<<a|r,st=s+e}else at=1<<s|n<<a|r,st=e}function Us(e){e.return!==null&&(Qt(e,1),Yc(e,1,0))}function Gs(e){for(;e===_i;)_i=xn[--vn],xn[vn]=null,Ci=xn[--vn],xn[vn]=null;for(;e===en;)en=ze[--Ae],ze[Ae]=null,st=ze[--Ae],ze[Ae]=null,at=ze[--Ae],ze[Ae]=null}var Ie=null,Te=null,G=!1,Qe=null;function Kc(e,t){var n=De(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ie=e,Te=Lt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ie=e,Te=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=en!==null?{id:at,overflow:st}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=De(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ie=e,Te=null,!0):!1;default:return!1}}function is(e){return(e.mode&1)!==0&&(e.flags&128)===0}function as(e){if(G){var t=Te;if(t){var n=t;if(!ao(e,t)){if(is(e))throw Error(S(418));t=Lt(n.nextSibling);var r=Ie;t&&ao(e,t)?Kc(r,n):(e.flags=e.flags&-4097|2,G=!1,Ie=e)}}else{if(is(e))throw Error(S(418));e.flags=e.flags&-4097|2,G=!1,Ie=e}}}function so(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ie=e}function Xr(e){if(e!==Ie)return!1;if(!G)return so(e),G=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!es(e.type,e.memoizedProps)),t&&(t=Te)){if(is(e))throw Xc(),Error(S(418));for(;t;)Kc(e,t),t=Lt(t.nextSibling)}if(so(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(S(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Te=Lt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Te=null}}else Te=Ie?Lt(e.stateNode.nextSibling):null;return!0}function Xc(){for(var e=Te;e;)e=Lt(e.nextSibling)}function In(){Te=Ie=null,G=!1}function Ys(e){Qe===null?Qe=[e]:Qe.push(e)}var dm=ft.ReactCurrentBatchConfig;function Kn(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(S(309));var r=n.stateNode}if(!r)throw Error(S(147,e));var a=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(l){var c=a.refs;l===null?delete c[s]:c[s]=l},t._stringRef=s,t)}if(typeof e!="string")throw Error(S(284));if(!n._owner)throw Error(S(290,e))}return e}function Jr(e,t){throw e=Object.prototype.toString.call(t),Error(S(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function lo(e){var t=e._init;return t(e._payload)}function Jc(e){function t(g,p){if(e){var f=g.deletions;f===null?(g.deletions=[p],g.flags|=16):f.push(p)}}function n(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function a(g,p){return g=At(g,p),g.index=0,g.sibling=null,g}function s(g,p,f){return g.index=f,e?(f=g.alternate,f!==null?(f=f.index,f<p?(g.flags|=2,p):f):(g.flags|=2,p)):(g.flags|=1048576,p)}function l(g){return e&&g.alternate===null&&(g.flags|=2),g}function c(g,p,f,k){return p===null||p.tag!==6?(p=Ea(f,g.mode,k),p.return=g,p):(p=a(p,f),p.return=g,p)}function o(g,p,f,k){var j=f.type;return j===hn?m(g,p,f.props.children,k,f.key):p!==null&&(p.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===kt&&lo(j)===p.type)?(k=a(p,f.props),k.ref=Kn(g,p,f),k.return=g,k):(k=pi(f.type,f.key,f.props,null,g.mode,k),k.ref=Kn(g,p,f),k.return=g,k)}function d(g,p,f,k){return p===null||p.tag!==4||p.stateNode.containerInfo!==f.containerInfo||p.stateNode.implementation!==f.implementation?(p=Ma(f,g.mode,k),p.return=g,p):(p=a(p,f.children||[]),p.return=g,p)}function m(g,p,f,k,j){return p===null||p.tag!==7?(p=Jt(f,g.mode,k,j),p.return=g,p):(p=a(p,f),p.return=g,p)}function y(g,p,f){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Ea(""+p,g.mode,f),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Fr:return f=pi(p.type,p.key,p.props,null,g.mode,f),f.ref=Kn(g,null,p),f.return=g,f;case un:return p=Ma(p,g.mode,f),p.return=g,p;case kt:var k=p._init;return y(g,k(p._payload),f)}if(er(p)||Vn(p))return p=Jt(p,g.mode,f,null),p.return=g,p;Jr(g,p)}return null}function u(g,p,f,k){var j=p!==null?p.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return j!==null?null:c(g,p,""+f,k);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Fr:return f.key===j?o(g,p,f,k):null;case un:return f.key===j?d(g,p,f,k):null;case kt:return j=f._init,u(g,p,j(f._payload),k)}if(er(f)||Vn(f))return j!==null?null:m(g,p,f,k,null);Jr(g,f)}return null}function h(g,p,f,k,j){if(typeof k=="string"&&k!==""||typeof k=="number")return g=g.get(f)||null,c(p,g,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Fr:return g=g.get(k.key===null?f:k.key)||null,o(p,g,k,j);case un:return g=g.get(k.key===null?f:k.key)||null,d(p,g,k,j);case kt:var E=k._init;return h(g,p,f,E(k._payload),j)}if(er(k)||Vn(k))return g=g.get(f)||null,m(p,g,k,j,null);Jr(p,k)}return null}function x(g,p,f,k){for(var j=null,E=null,b=p,M=p=0,D=null;b!==null&&M<f.length;M++){b.index>M?(D=b,b=null):D=b.sibling;var q=u(g,b,f[M],k);if(q===null){b===null&&(b=D);break}e&&b&&q.alternate===null&&t(g,b),p=s(q,p,M),E===null?j=q:E.sibling=q,E=q,b=D}if(M===f.length)return n(g,b),G&&Qt(g,M),j;if(b===null){for(;M<f.length;M++)b=y(g,f[M],k),b!==null&&(p=s(b,p,M),E===null?j=b:E.sibling=b,E=b);return G&&Qt(g,M),j}for(b=r(g,b);M<f.length;M++)D=h(b,g,M,f[M],k),D!==null&&(e&&D.alternate!==null&&b.delete(D.key===null?M:D.key),p=s(D,p,M),E===null?j=D:E.sibling=D,E=D);return e&&b.forEach(function(Me){return t(g,Me)}),G&&Qt(g,M),j}function v(g,p,f,k){var j=Vn(f);if(typeof j!="function")throw Error(S(150));if(f=j.call(f),f==null)throw Error(S(151));for(var E=j=null,b=p,M=p=0,D=null,q=f.next();b!==null&&!q.done;M++,q=f.next()){b.index>M?(D=b,b=null):D=b.sibling;var Me=u(g,b,q.value,k);if(Me===null){b===null&&(b=D);break}e&&b&&Me.alternate===null&&t(g,b),p=s(Me,p,M),E===null?j=Me:E.sibling=Me,E=Me,b=D}if(q.done)return n(g,b),G&&Qt(g,M),j;if(b===null){for(;!q.done;M++,q=f.next())q=y(g,q.value,k),q!==null&&(p=s(q,p,M),E===null?j=q:E.sibling=q,E=q);return G&&Qt(g,M),j}for(b=r(g,b);!q.done;M++,q=f.next())q=h(b,g,M,q.value,k),q!==null&&(e&&q.alternate!==null&&b.delete(q.key===null?M:q.key),p=s(q,p,M),E===null?j=q:E.sibling=q,E=q);return e&&b.forEach(function(wt){return t(g,wt)}),G&&Qt(g,M),j}function N(g,p,f,k){if(typeof f=="object"&&f!==null&&f.type===hn&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Fr:e:{for(var j=f.key,E=p;E!==null;){if(E.key===j){if(j=f.type,j===hn){if(E.tag===7){n(g,E.sibling),p=a(E,f.props.children),p.return=g,g=p;break e}}else if(E.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===kt&&lo(j)===E.type){n(g,E.sibling),p=a(E,f.props),p.ref=Kn(g,E,f),p.return=g,g=p;break e}n(g,E);break}else t(g,E);E=E.sibling}f.type===hn?(p=Jt(f.props.children,g.mode,k,f.key),p.return=g,g=p):(k=pi(f.type,f.key,f.props,null,g.mode,k),k.ref=Kn(g,p,f),k.return=g,g=k)}return l(g);case un:e:{for(E=f.key;p!==null;){if(p.key===E)if(p.tag===4&&p.stateNode.containerInfo===f.containerInfo&&p.stateNode.implementation===f.implementation){n(g,p.sibling),p=a(p,f.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else t(g,p);p=p.sibling}p=Ma(f,g.mode,k),p.return=g,g=p}return l(g);case kt:return E=f._init,N(g,p,E(f._payload),k)}if(er(f))return x(g,p,f,k);if(Vn(f))return v(g,p,f,k);Jr(g,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,p!==null&&p.tag===6?(n(g,p.sibling),p=a(p,f),p.return=g,g=p):(n(g,p),p=Ea(f,g.mode,k),p.return=g,g=p),l(g)):n(g,p)}return N}var Ln=Jc(!0),Zc=Jc(!1),Ei=Ht(null),Mi=null,wn=null,Ks=null;function Xs(){Ks=wn=Mi=null}function Js(e){var t=Ei.current;U(Ei),e._currentValue=t}function ss(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function En(e,t){Mi=e,Ks=wn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Se=!0),e.firstContext=null)}function Fe(e){var t=e._currentValue;if(Ks!==e)if(e={context:e,memoizedValue:t,next:null},wn===null){if(Mi===null)throw Error(S(308));wn=e,Mi.dependencies={lanes:0,firstContext:e}}else wn=wn.next=e;return t}var Yt=null;function Zs(e){Yt===null?Yt=[e]:Yt.push(e)}function ed(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,Zs(t)):(n.next=a.next,a.next=n),t.interleaved=n,ut(e,r)}function ut(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Nt=!1;function el(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function td(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function lt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Rt(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,F&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,ut(e,n)}return a=r.interleaved,a===null?(t.next=t,Zs(r)):(t.next=a.next,a.next=t),r.interleaved=t,ut(e,n)}function oi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$s(e,n)}}function oo(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?a=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?a=s=t:s=s.next=t}else a=s=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Pi(e,t,n,r){var a=e.updateQueue;Nt=!1;var s=a.firstBaseUpdate,l=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var o=c,d=o.next;o.next=null,l===null?s=d:l.next=d,l=o;var m=e.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==l&&(c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=o))}if(s!==null){var y=a.baseState;l=0,m=d=o=null,c=s;do{var u=c.lane,h=c.eventTime;if((r&u)===u){m!==null&&(m=m.next={eventTime:h,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var x=e,v=c;switch(u=t,h=n,v.tag){case 1:if(x=v.payload,typeof x=="function"){y=x.call(h,y,u);break e}y=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=v.payload,u=typeof x=="function"?x.call(h,y,u):x,u==null)break e;y=J({},y,u);break e;case 2:Nt=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,u=a.effects,u===null?a.effects=[c]:u.push(c))}else h={eventTime:h,lane:u,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(d=m=h,o=y):m=m.next=h,l|=u;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;u=c,c=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}while(!0);if(m===null&&(o=y),a.baseState=o,a.firstBaseUpdate=d,a.lastBaseUpdate=m,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else s===null&&(a.shared.lanes=0);nn|=l,e.lanes=l,e.memoizedState=y}}function co(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(S(191,a));a.call(r)}}}var zr={},et=Ht(zr),_r=Ht(zr),Cr=Ht(zr);function Kt(e){if(e===zr)throw Error(S(174));return e}function tl(e,t){switch(V(Cr,t),V(_r,e),V(et,zr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Oa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Oa(t,e)}U(et),V(et,t)}function Rn(){U(et),U(_r),U(Cr)}function nd(e){Kt(Cr.current);var t=Kt(et.current),n=Oa(t,e.type);t!==n&&(V(_r,e),V(et,n))}function nl(e){_r.current===e&&(U(et),U(_r))}var K=Ht(0);function Ti(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=[];function rl(){for(var e=0;e<ja.length;e++)ja[e]._workInProgressVersionPrimary=null;ja.length=0}var ci=ft.ReactCurrentDispatcher,ka=ft.ReactCurrentBatchConfig,tn=0,X=null,se=null,oe=null,Ii=!1,dr=!1,Er=0,um=0;function fe(){throw Error(S(321))}function il(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ye(e[n],t[n]))return!1;return!0}function al(e,t,n,r,a,s){if(tn=s,X=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ci.current=e===null||e.memoizedState===null?fm:ym,e=n(r,a),dr){s=0;do{if(dr=!1,Er=0,25<=s)throw Error(S(301));s+=1,oe=se=null,t.updateQueue=null,ci.current=gm,e=n(r,a)}while(dr)}if(ci.current=Li,t=se!==null&&se.next!==null,tn=0,oe=se=X=null,Ii=!1,t)throw Error(S(300));return e}function sl(){var e=Er!==0;return Er=0,e}function Xe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oe===null?X.memoizedState=oe=e:oe=oe.next=e,oe}function He(){if(se===null){var e=X.alternate;e=e!==null?e.memoizedState:null}else e=se.next;var t=oe===null?X.memoizedState:oe.next;if(t!==null)oe=t,se=e;else{if(e===null)throw Error(S(310));se=e,e={memoizedState:se.memoizedState,baseState:se.baseState,baseQueue:se.baseQueue,queue:se.queue,next:null},oe===null?X.memoizedState=oe=e:oe=oe.next=e}return oe}function Mr(e,t){return typeof t=="function"?t(e):t}function Na(e){var t=He(),n=t.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=e;var r=se,a=r.baseQueue,s=n.pending;if(s!==null){if(a!==null){var l=a.next;a.next=s.next,s.next=l}r.baseQueue=a=s,n.pending=null}if(a!==null){s=a.next,r=r.baseState;var c=l=null,o=null,d=s;do{var m=d.lane;if((tn&m)===m)o!==null&&(o=o.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var y={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};o===null?(c=o=y,l=r):o=o.next=y,X.lanes|=m,nn|=m}d=d.next}while(d!==null&&d!==s);o===null?l=r:o.next=c,Ye(r,t.memoizedState)||(Se=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=o,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do s=a.lane,X.lanes|=s,nn|=s,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Sa(e){var t=He(),n=t.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,s=t.memoizedState;if(a!==null){n.pending=null;var l=a=a.next;do s=e(s,l.action),l=l.next;while(l!==a);Ye(s,t.memoizedState)||(Se=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function rd(){}function id(e,t){var n=X,r=He(),a=t(),s=!Ye(r.memoizedState,a);if(s&&(r.memoizedState=a,Se=!0),r=r.queue,ll(ld.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||oe!==null&&oe.memoizedState.tag&1){if(n.flags|=2048,Pr(9,sd.bind(null,n,r,a,t),void 0,null),de===null)throw Error(S(349));tn&30||ad(n,t,a)}return a}function ad(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=X.updateQueue,t===null?(t={lastEffect:null,stores:null},X.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function sd(e,t,n,r){t.value=n,t.getSnapshot=r,od(t)&&cd(e)}function ld(e,t,n){return n(function(){od(t)&&cd(e)})}function od(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ye(e,n)}catch{return!0}}function cd(e){var t=ut(e,1);t!==null&&Ge(t,e,1,-1)}function uo(e){var t=Xe();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:e},t.queue=e,e=e.dispatch=pm.bind(null,X,e),[t.memoizedState,e]}function Pr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=X.updateQueue,t===null?(t={lastEffect:null,stores:null},X.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function dd(){return He().memoizedState}function di(e,t,n,r){var a=Xe();X.flags|=e,a.memoizedState=Pr(1|t,n,void 0,r===void 0?null:r)}function Yi(e,t,n,r){var a=He();r=r===void 0?null:r;var s=void 0;if(se!==null){var l=se.memoizedState;if(s=l.destroy,r!==null&&il(r,l.deps)){a.memoizedState=Pr(t,n,s,r);return}}X.flags|=e,a.memoizedState=Pr(1|t,n,s,r)}function ho(e,t){return di(8390656,8,e,t)}function ll(e,t){return Yi(2048,8,e,t)}function ud(e,t){return Yi(4,2,e,t)}function hd(e,t){return Yi(4,4,e,t)}function md(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pd(e,t,n){return n=n!=null?n.concat([e]):null,Yi(4,4,md.bind(null,t,e),n)}function ol(){}function fd(e,t){var n=He();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&il(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function yd(e,t){var n=He();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&il(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function gd(e,t,n){return tn&21?(Ye(n,t)||(n=jc(),X.lanes|=n,nn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Se=!0),e.memoizedState=n)}function hm(e,t){var n=W;W=n!==0&&4>n?n:4,e(!0);var r=ka.transition;ka.transition={};try{e(!1),t()}finally{W=n,ka.transition=r}}function xd(){return He().memoizedState}function mm(e,t,n){var r=zt(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},vd(e))wd(t,n);else if(n=ed(e,t,n,r),n!==null){var a=be();Ge(n,e,r,a),bd(n,t,r)}}function pm(e,t,n){var r=zt(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(vd(e))wd(t,a);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var l=t.lastRenderedState,c=s(l,n);if(a.hasEagerState=!0,a.eagerState=c,Ye(c,l)){var o=t.interleaved;o===null?(a.next=a,Zs(t)):(a.next=o.next,o.next=a),t.interleaved=a;return}}catch{}finally{}n=ed(e,t,a,r),n!==null&&(a=be(),Ge(n,e,r,a),bd(n,t,r))}}function vd(e){var t=e.alternate;return e===X||t!==null&&t===X}function wd(e,t){dr=Ii=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function bd(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$s(e,n)}}var Li={readContext:Fe,useCallback:fe,useContext:fe,useEffect:fe,useImperativeHandle:fe,useInsertionEffect:fe,useLayoutEffect:fe,useMemo:fe,useReducer:fe,useRef:fe,useState:fe,useDebugValue:fe,useDeferredValue:fe,useTransition:fe,useMutableSource:fe,useSyncExternalStore:fe,useId:fe,unstable_isNewReconciler:!1},fm={readContext:Fe,useCallback:function(e,t){return Xe().memoizedState=[e,t===void 0?null:t],e},useContext:Fe,useEffect:ho,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,di(4194308,4,md.bind(null,t,e),n)},useLayoutEffect:function(e,t){return di(4194308,4,e,t)},useInsertionEffect:function(e,t){return di(4,2,e,t)},useMemo:function(e,t){var n=Xe();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Xe();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=mm.bind(null,X,e),[r.memoizedState,e]},useRef:function(e){var t=Xe();return e={current:e},t.memoizedState=e},useState:uo,useDebugValue:ol,useDeferredValue:function(e){return Xe().memoizedState=e},useTransition:function(){var e=uo(!1),t=e[0];return e=hm.bind(null,e[1]),Xe().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=X,a=Xe();if(G){if(n===void 0)throw Error(S(407));n=n()}else{if(n=t(),de===null)throw Error(S(349));tn&30||ad(r,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,ho(ld.bind(null,r,s,e),[e]),r.flags|=2048,Pr(9,sd.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Xe(),t=de.identifierPrefix;if(G){var n=st,r=at;n=(r&~(1<<32-Ue(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Er++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=um++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ym={readContext:Fe,useCallback:fd,useContext:Fe,useEffect:ll,useImperativeHandle:pd,useInsertionEffect:ud,useLayoutEffect:hd,useMemo:yd,useReducer:Na,useRef:dd,useState:function(){return Na(Mr)},useDebugValue:ol,useDeferredValue:function(e){var t=He();return gd(t,se.memoizedState,e)},useTransition:function(){var e=Na(Mr)[0],t=He().memoizedState;return[e,t]},useMutableSource:rd,useSyncExternalStore:id,useId:xd,unstable_isNewReconciler:!1},gm={readContext:Fe,useCallback:fd,useContext:Fe,useEffect:ll,useImperativeHandle:pd,useInsertionEffect:ud,useLayoutEffect:hd,useMemo:yd,useReducer:Sa,useRef:dd,useState:function(){return Sa(Mr)},useDebugValue:ol,useDeferredValue:function(e){var t=He();return se===null?t.memoizedState=e:gd(t,se.memoizedState,e)},useTransition:function(){var e=Sa(Mr)[0],t=He().memoizedState;return[e,t]},useMutableSource:rd,useSyncExternalStore:id,useId:xd,unstable_isNewReconciler:!1};function We(e,t){if(e&&e.defaultProps){t=J({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ls(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:J({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ki={isMounted:function(e){return(e=e._reactInternals)?ln(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=be(),a=zt(e),s=lt(r,a);s.payload=t,n!=null&&(s.callback=n),t=Rt(e,s,a),t!==null&&(Ge(t,e,a,r),oi(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=be(),a=zt(e),s=lt(r,a);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Rt(e,s,a),t!==null&&(Ge(t,e,a,r),oi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=be(),r=zt(e),a=lt(n,r);a.tag=2,t!=null&&(a.callback=t),t=Rt(e,a,r),t!==null&&(Ge(t,e,r,n),oi(t,e,r))}};function mo(e,t,n,r,a,s,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,l):t.prototype&&t.prototype.isPureReactComponent?!jr(n,r)||!jr(a,s):!0}function jd(e,t,n){var r=!1,a=$t,s=t.contextType;return typeof s=="object"&&s!==null?s=Fe(s):(a=Ce(t)?Zt:xe.current,r=t.contextTypes,s=(r=r!=null)?Tn(e,a):$t),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ki,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function po(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ki.enqueueReplaceState(t,t.state,null)}function os(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},el(e);var s=t.contextType;typeof s=="object"&&s!==null?a.context=Fe(s):(s=Ce(t)?Zt:xe.current,a.context=Tn(e,s)),a.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(ls(e,t,s,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Ki.enqueueReplaceState(a,a.state,null),Pi(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function qn(e,t){try{var n="",r=t;do n+=Vu(r),r=r.return;while(r);var a=n}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:a,digest:null}}function _a(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function cs(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var xm=typeof WeakMap=="function"?WeakMap:Map;function kd(e,t,n){n=lt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qi||(qi=!0,vs=r),cs(e,t)},n}function Nd(e,t,n){n=lt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){cs(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){cs(e,t),typeof r!="function"&&(qt===null?qt=new Set([this]):qt.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function fo(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new xm;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Im.bind(null,e,t,n),t.then(e,e))}function yo(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function go(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=lt(-1,1),t.tag=2,Rt(n,t,1))),n.lanes|=1),e)}var vm=ft.ReactCurrentOwner,Se=!1;function ve(e,t,n,r){t.child=e===null?Zc(t,null,n,r):Ln(t,e.child,n,r)}function xo(e,t,n,r,a){n=n.render;var s=t.ref;return En(t,a),r=al(e,t,n,r,s,a),n=sl(),e!==null&&!Se?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ht(e,t,a)):(G&&n&&Us(t),t.flags|=1,ve(e,t,r,a),t.child)}function vo(e,t,n,r,a){if(e===null){var s=n.type;return typeof s=="function"&&!yl(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Sd(e,t,s,r,a)):(e=pi(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&a)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:jr,n(l,r)&&e.ref===t.ref)return ht(e,t,a)}return t.flags|=1,e=At(s,r),e.ref=t.ref,e.return=t,t.child=e}function Sd(e,t,n,r,a){if(e!==null){var s=e.memoizedProps;if(jr(s,r)&&e.ref===t.ref)if(Se=!1,t.pendingProps=r=s,(e.lanes&a)!==0)e.flags&131072&&(Se=!0);else return t.lanes=e.lanes,ht(e,t,a)}return ds(e,t,n,r,a)}function _d(e,t,n){var r=t.pendingProps,a=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},V(jn,Pe),Pe|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,V(jn,Pe),Pe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,V(jn,Pe),Pe|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,V(jn,Pe),Pe|=r;return ve(e,t,a,n),t.child}function Cd(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ds(e,t,n,r,a){var s=Ce(n)?Zt:xe.current;return s=Tn(t,s),En(t,a),n=al(e,t,n,r,s,a),r=sl(),e!==null&&!Se?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ht(e,t,a)):(G&&r&&Us(t),t.flags|=1,ve(e,t,n,a),t.child)}function wo(e,t,n,r,a){if(Ce(n)){var s=!0;Si(t)}else s=!1;if(En(t,a),t.stateNode===null)ui(e,t),jd(t,n,r),os(t,n,r,a),r=!0;else if(e===null){var l=t.stateNode,c=t.memoizedProps;l.props=c;var o=l.context,d=n.contextType;typeof d=="object"&&d!==null?d=Fe(d):(d=Ce(n)?Zt:xe.current,d=Tn(t,d));var m=n.getDerivedStateFromProps,y=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==r||o!==d)&&po(t,l,r,d),Nt=!1;var u=t.memoizedState;l.state=u,Pi(t,r,l,a),o=t.memoizedState,c!==r||u!==o||_e.current||Nt?(typeof m=="function"&&(ls(t,n,m,r),o=t.memoizedState),(c=Nt||mo(t,n,c,r,u,o,d))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=o),l.props=r,l.state=o,l.context=d,r=c):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,td(e,t),c=t.memoizedProps,d=t.type===t.elementType?c:We(t.type,c),l.props=d,y=t.pendingProps,u=l.context,o=n.contextType,typeof o=="object"&&o!==null?o=Fe(o):(o=Ce(n)?Zt:xe.current,o=Tn(t,o));var h=n.getDerivedStateFromProps;(m=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==y||u!==o)&&po(t,l,r,o),Nt=!1,u=t.memoizedState,l.state=u,Pi(t,r,l,a);var x=t.memoizedState;c!==y||u!==x||_e.current||Nt?(typeof h=="function"&&(ls(t,n,h,r),x=t.memoizedState),(d=Nt||mo(t,n,d,r,u,x,o)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,x,o),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,x,o)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),l.props=r,l.state=x,l.context=o,r=d):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),r=!1)}return us(e,t,n,r,s,a)}function us(e,t,n,r,a,s){Cd(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return a&&io(t,n,!1),ht(e,t,s);r=t.stateNode,vm.current=t;var c=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Ln(t,e.child,null,s),t.child=Ln(t,null,c,s)):ve(e,t,c,s),t.memoizedState=r.state,a&&io(t,n,!0),t.child}function Ed(e){var t=e.stateNode;t.pendingContext?ro(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ro(e,t.context,!1),tl(e,t.containerInfo)}function bo(e,t,n,r,a){return In(),Ys(a),t.flags|=256,ve(e,t,n,r),t.child}var hs={dehydrated:null,treeContext:null,retryLane:0};function ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Md(e,t,n){var r=t.pendingProps,a=K.current,s=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),V(K,a&1),e===null)return as(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,s?(r=t.mode,s=t.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=Zi(l,r,0,null),e=Jt(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=ms(n),t.memoizedState=hs,e):cl(t,l));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return wm(e,t,l,r,c,a,n);if(s){s=r.fallback,l=t.mode,a=e.child,c=a.sibling;var o={mode:"hidden",children:r.children};return!(l&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=o,t.deletions=null):(r=At(a,o),r.subtreeFlags=a.subtreeFlags&14680064),c!==null?s=At(c,s):(s=Jt(s,l,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,l=e.child.memoizedState,l=l===null?ms(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=hs,r}return s=e.child,e=s.sibling,r=At(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function cl(e,t){return t=Zi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zr(e,t,n,r){return r!==null&&Ys(r),Ln(t,e.child,null,n),e=cl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wm(e,t,n,r,a,s,l){if(n)return t.flags&256?(t.flags&=-257,r=_a(Error(S(422))),Zr(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,a=t.mode,r=Zi({mode:"visible",children:r.children},a,0,null),s=Jt(s,a,l,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Ln(t,e.child,null,l),t.child.memoizedState=ms(l),t.memoizedState=hs,s);if(!(t.mode&1))return Zr(e,t,l,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var c=r.dgst;return r=c,s=Error(S(419)),r=_a(s,r,void 0),Zr(e,t,l,r)}if(c=(l&e.childLanes)!==0,Se||c){if(r=de,r!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|l)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,ut(e,a),Ge(r,e,a,-1))}return fl(),r=_a(Error(S(421))),Zr(e,t,l,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Lm.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,Te=Lt(a.nextSibling),Ie=t,G=!0,Qe=null,e!==null&&(ze[Ae++]=at,ze[Ae++]=st,ze[Ae++]=en,at=e.id,st=e.overflow,en=t),t=cl(t,r.children),t.flags|=4096,t)}function jo(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ss(e.return,t,n)}function Ca(e,t,n,r,a){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function Pd(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(ve(e,t,r.children,n),r=K.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jo(e,n,t);else if(e.tag===19)jo(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(V(K,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Ti(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Ca(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ti(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Ca(t,!0,n,null,s);break;case"together":Ca(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ui(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ht(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),nn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(S(153));if(t.child!==null){for(e=t.child,n=At(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=At(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function bm(e,t,n){switch(t.tag){case 3:Ed(t),In();break;case 5:nd(t);break;case 1:Ce(t.type)&&Si(t);break;case 4:tl(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;V(Ei,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(V(K,K.current&1),t.flags|=128,null):n&t.child.childLanes?Md(e,t,n):(V(K,K.current&1),e=ht(e,t,n),e!==null?e.sibling:null);V(K,K.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Pd(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),V(K,K.current),r)break;return null;case 22:case 23:return t.lanes=0,_d(e,t,n)}return ht(e,t,n)}var Td,ps,Id,Ld;Td=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ps=function(){};Id=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Kt(et.current);var s=null;switch(n){case"input":a=za(e,a),r=za(e,r),s=[];break;case"select":a=J({},a,{value:void 0}),r=J({},r,{value:void 0}),s=[];break;case"textarea":a=$a(e,a),r=$a(e,r),s=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ki)}Fa(n,r);var l;n=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var c=a[d];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(fr.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var o=r[d];if(c=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&o!==c&&(o!=null||c!=null))if(d==="style")if(c){for(l in c)!c.hasOwnProperty(l)||o&&o.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in o)o.hasOwnProperty(l)&&c[l]!==o[l]&&(n||(n={}),n[l]=o[l])}else n||(s||(s=[]),s.push(d,n)),n=o;else d==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,c=c?c.__html:void 0,o!=null&&c!==o&&(s=s||[]).push(d,o)):d==="children"?typeof o!="string"&&typeof o!="number"||(s=s||[]).push(d,""+o):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(fr.hasOwnProperty(d)?(o!=null&&d==="onScroll"&&Q("scroll",e),s||c===o||(s=[])):(s=s||[]).push(d,o))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}};Ld=function(e,t,n,r){n!==r&&(t.flags|=4)};function Xn(e,t){if(!G)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function jm(e,t,n){var r=t.pendingProps;switch(Gs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ye(t),null;case 1:return Ce(t.type)&&Ni(),ye(t),null;case 3:return r=t.stateNode,Rn(),U(_e),U(xe),rl(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Xr(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qe!==null&&(js(Qe),Qe=null))),ps(e,t),ye(t),null;case 5:nl(t);var a=Kt(Cr.current);if(n=t.type,e!==null&&t.stateNode!=null)Id(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(S(166));return ye(t),null}if(e=Kt(et.current),Xr(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Je]=t,r[Sr]=s,e=(t.mode&1)!==0,n){case"dialog":Q("cancel",r),Q("close",r);break;case"iframe":case"object":case"embed":Q("load",r);break;case"video":case"audio":for(a=0;a<nr.length;a++)Q(nr[a],r);break;case"source":Q("error",r);break;case"img":case"image":case"link":Q("error",r),Q("load",r);break;case"details":Q("toggle",r);break;case"input":Pl(r,s),Q("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Q("invalid",r);break;case"textarea":Il(r,s),Q("invalid",r)}Fa(n,s),a=null;for(var l in s)if(s.hasOwnProperty(l)){var c=s[l];l==="children"?typeof c=="string"?r.textContent!==c&&(s.suppressHydrationWarning!==!0&&Kr(r.textContent,c,e),a=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&Kr(r.textContent,c,e),a=["children",""+c]):fr.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&Q("scroll",r)}switch(n){case"input":Hr(r),Tl(r,s,!0);break;case"textarea":Hr(r),Ll(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ki)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lc(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Je]=t,e[Sr]=r,Td(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ha(n,r),n){case"dialog":Q("cancel",e),Q("close",e),a=r;break;case"iframe":case"object":case"embed":Q("load",e),a=r;break;case"video":case"audio":for(a=0;a<nr.length;a++)Q(nr[a],e);a=r;break;case"source":Q("error",e),a=r;break;case"img":case"image":case"link":Q("error",e),Q("load",e),a=r;break;case"details":Q("toggle",e),a=r;break;case"input":Pl(e,r),a=za(e,r),Q("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=J({},r,{value:void 0}),Q("invalid",e);break;case"textarea":Il(e,r),a=$a(e,r),Q("invalid",e);break;default:a=r}Fa(n,a),c=a;for(s in c)if(c.hasOwnProperty(s)){var o=c[s];s==="style"?dc(e,o):s==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&oc(e,o)):s==="children"?typeof o=="string"?(n!=="textarea"||o!=="")&&yr(e,o):typeof o=="number"&&yr(e,""+o):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(fr.hasOwnProperty(s)?o!=null&&s==="onScroll"&&Q("scroll",e):o!=null&&Ls(e,s,o,l))}switch(n){case"input":Hr(e),Tl(e,r,!1);break;case"textarea":Hr(e),Ll(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Dt(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Nn(e,!!r.multiple,s,!1):r.defaultValue!=null&&Nn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ki)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ye(t),null;case 6:if(e&&t.stateNode!=null)Ld(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(S(166));if(n=Kt(Cr.current),Kt(et.current),Xr(t)){if(r=t.stateNode,n=t.memoizedProps,r[Je]=t,(s=r.nodeValue!==n)&&(e=Ie,e!==null))switch(e.tag){case 3:Kr(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Kr(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Je]=t,t.stateNode=r}return ye(t),null;case 13:if(U(K),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(G&&Te!==null&&t.mode&1&&!(t.flags&128))Xc(),In(),t.flags|=98560,s=!1;else if(s=Xr(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(S(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(S(317));s[Je]=t}else In(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ye(t),s=!1}else Qe!==null&&(js(Qe),Qe=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||K.current&1?le===0&&(le=3):fl())),t.updateQueue!==null&&(t.flags|=4),ye(t),null);case 4:return Rn(),ps(e,t),e===null&&kr(t.stateNode.containerInfo),ye(t),null;case 10:return Js(t.type._context),ye(t),null;case 17:return Ce(t.type)&&Ni(),ye(t),null;case 19:if(U(K),s=t.memoizedState,s===null)return ye(t),null;if(r=(t.flags&128)!==0,l=s.rendering,l===null)if(r)Xn(s,!1);else{if(le!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Ti(e),l!==null){for(t.flags|=128,Xn(s,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return V(K,K.current&1|2),t.child}e=e.sibling}s.tail!==null&&te()>zn&&(t.flags|=128,r=!0,Xn(s,!1),t.lanes=4194304)}else{if(!r)if(e=Ti(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Xn(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!G)return ye(t),null}else 2*te()-s.renderingStartTime>zn&&n!==1073741824&&(t.flags|=128,r=!0,Xn(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(n=s.last,n!==null?n.sibling=l:t.child=l,s.last=l)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=te(),t.sibling=null,n=K.current,V(K,r?n&1|2:n&1),t):(ye(t),null);case 22:case 23:return pl(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Pe&1073741824&&(ye(t),t.subtreeFlags&6&&(t.flags|=8192)):ye(t),null;case 24:return null;case 25:return null}throw Error(S(156,t.tag))}function km(e,t){switch(Gs(t),t.tag){case 1:return Ce(t.type)&&Ni(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rn(),U(_e),U(xe),rl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return nl(t),null;case 13:if(U(K),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(S(340));In()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return U(K),null;case 4:return Rn(),null;case 10:return Js(t.type._context),null;case 22:case 23:return pl(),null;case 24:return null;default:return null}}var ei=!1,ge=!1,Nm=typeof WeakSet=="function"?WeakSet:Set,T=null;function bn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ee(e,t,r)}else n.current=null}function fs(e,t,n){try{n()}catch(r){ee(e,t,r)}}var ko=!1;function Sm(e,t){if(Ja=wi,e=Dc(),Qs(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,c=-1,o=-1,d=0,m=0,y=e,u=null;t:for(;;){for(var h;y!==n||a!==0&&y.nodeType!==3||(c=l+a),y!==s||r!==0&&y.nodeType!==3||(o=l+r),y.nodeType===3&&(l+=y.nodeValue.length),(h=y.firstChild)!==null;)u=y,y=h;for(;;){if(y===e)break t;if(u===n&&++d===a&&(c=l),u===s&&++m===r&&(o=l),(h=y.nextSibling)!==null)break;y=u,u=y.parentNode}y=h}n=c===-1||o===-1?null:{start:c,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(Za={focusedElem:e,selectionRange:n},wi=!1,T=t;T!==null;)if(t=T,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,T=e;else for(;T!==null;){t=T;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var v=x.memoizedProps,N=x.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:We(t.type,v),N);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(S(163))}}catch(k){ee(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,T=e;break}T=t.return}return x=ko,ko=!1,x}function ur(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,s!==void 0&&fs(t,n,s)}a=a.next}while(a!==r)}}function Xi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ys(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Rd(e){var t=e.alternate;t!==null&&(e.alternate=null,Rd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Je],delete t[Sr],delete t[ns],delete t[lm],delete t[om])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qd(e){return e.tag===5||e.tag===3||e.tag===4}function No(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gs(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ki));else if(r!==4&&(e=e.child,e!==null))for(gs(e,t,n),e=e.sibling;e!==null;)gs(e,t,n),e=e.sibling}function xs(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(xs(e,t,n),e=e.sibling;e!==null;)xs(e,t,n),e=e.sibling}var he=null,Ve=!1;function bt(e,t,n){for(n=n.child;n!==null;)zd(e,t,n),n=n.sibling}function zd(e,t,n){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(Bi,n)}catch{}switch(n.tag){case 5:ge||bn(n,t);case 6:var r=he,a=Ve;he=null,bt(e,t,n),he=r,Ve=a,he!==null&&(Ve?(e=he,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):he.removeChild(n.stateNode));break;case 18:he!==null&&(Ve?(e=he,n=n.stateNode,e.nodeType===8?wa(e.parentNode,n):e.nodeType===1&&wa(e,n),wr(e)):wa(he,n.stateNode));break;case 4:r=he,a=Ve,he=n.stateNode.containerInfo,Ve=!0,bt(e,t,n),he=r,Ve=a;break;case 0:case 11:case 14:case 15:if(!ge&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var s=a,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&fs(n,t,l),a=a.next}while(a!==r)}bt(e,t,n);break;case 1:if(!ge&&(bn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){ee(n,t,c)}bt(e,t,n);break;case 21:bt(e,t,n);break;case 22:n.mode&1?(ge=(r=ge)||n.memoizedState!==null,bt(e,t,n),ge=r):bt(e,t,n);break;default:bt(e,t,n)}}function So(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Nm),t.forEach(function(r){var a=Rm.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Be(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var s=e,l=t,c=l;e:for(;c!==null;){switch(c.tag){case 5:he=c.stateNode,Ve=!1;break e;case 3:he=c.stateNode.containerInfo,Ve=!0;break e;case 4:he=c.stateNode.containerInfo,Ve=!0;break e}c=c.return}if(he===null)throw Error(S(160));zd(s,l,a),he=null,Ve=!1;var o=a.alternate;o!==null&&(o.return=null),a.return=null}catch(d){ee(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ad(t,e),t=t.sibling}function Ad(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Be(t,e),Ke(e),r&4){try{ur(3,e,e.return),Xi(3,e)}catch(v){ee(e,e.return,v)}try{ur(5,e,e.return)}catch(v){ee(e,e.return,v)}}break;case 1:Be(t,e),Ke(e),r&512&&n!==null&&bn(n,n.return);break;case 5:if(Be(t,e),Ke(e),r&512&&n!==null&&bn(n,n.return),e.flags&32){var a=e.stateNode;try{yr(a,"")}catch(v){ee(e,e.return,v)}}if(r&4&&(a=e.stateNode,a!=null)){var s=e.memoizedProps,l=n!==null?n.memoizedProps:s,c=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&ac(a,s),Ha(c,l);var d=Ha(c,s);for(l=0;l<o.length;l+=2){var m=o[l],y=o[l+1];m==="style"?dc(a,y):m==="dangerouslySetInnerHTML"?oc(a,y):m==="children"?yr(a,y):Ls(a,m,y,d)}switch(c){case"input":Aa(a,s);break;case"textarea":sc(a,s);break;case"select":var u=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Nn(a,!!s.multiple,h,!1):u!==!!s.multiple&&(s.defaultValue!=null?Nn(a,!!s.multiple,s.defaultValue,!0):Nn(a,!!s.multiple,s.multiple?[]:"",!1))}a[Sr]=s}catch(v){ee(e,e.return,v)}}break;case 6:if(Be(t,e),Ke(e),r&4){if(e.stateNode===null)throw Error(S(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(v){ee(e,e.return,v)}}break;case 3:if(Be(t,e),Ke(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wr(t.containerInfo)}catch(v){ee(e,e.return,v)}break;case 4:Be(t,e),Ke(e);break;case 13:Be(t,e),Ke(e),a=e.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(hl=te())),r&4&&So(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(ge=(d=ge)||m,Be(t,e),ge=d):Be(t,e),Ke(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!m&&e.mode&1)for(T=e,m=e.child;m!==null;){for(y=T=m;T!==null;){switch(u=T,h=u.child,u.tag){case 0:case 11:case 14:case 15:ur(4,u,u.return);break;case 1:bn(u,u.return);var x=u.stateNode;if(typeof x.componentWillUnmount=="function"){r=u,n=u.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(v){ee(r,n,v)}}break;case 5:bn(u,u.return);break;case 22:if(u.memoizedState!==null){Co(y);continue}}h!==null?(h.return=u,T=h):Co(y)}m=m.sibling}e:for(m=null,y=e;;){if(y.tag===5){if(m===null){m=y;try{a=y.stateNode,d?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=y.stateNode,o=y.memoizedProps.style,l=o!=null&&o.hasOwnProperty("display")?o.display:null,c.style.display=cc("display",l))}catch(v){ee(e,e.return,v)}}}else if(y.tag===6){if(m===null)try{y.stateNode.nodeValue=d?"":y.memoizedProps}catch(v){ee(e,e.return,v)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;m===y&&(m=null),y=y.return}m===y&&(m=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Be(t,e),Ke(e),r&4&&So(e);break;case 21:break;default:Be(t,e),Ke(e)}}function Ke(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(qd(n)){var r=n;break e}n=n.return}throw Error(S(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(yr(a,""),r.flags&=-33);var s=No(e);xs(e,s,a);break;case 3:case 4:var l=r.stateNode.containerInfo,c=No(e);gs(e,c,l);break;default:throw Error(S(161))}}catch(o){ee(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _m(e,t,n){T=e,Dd(e)}function Dd(e,t,n){for(var r=(e.mode&1)!==0;T!==null;){var a=T,s=a.child;if(a.tag===22&&r){var l=a.memoizedState!==null||ei;if(!l){var c=a.alternate,o=c!==null&&c.memoizedState!==null||ge;c=ei;var d=ge;if(ei=l,(ge=o)&&!d)for(T=a;T!==null;)l=T,o=l.child,l.tag===22&&l.memoizedState!==null?Eo(a):o!==null?(o.return=l,T=o):Eo(a);for(;s!==null;)T=s,Dd(s),s=s.sibling;T=a,ei=c,ge=d}_o(e)}else a.subtreeFlags&8772&&s!==null?(s.return=a,T=s):_o(e)}}function _o(e){for(;T!==null;){var t=T;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ge||Xi(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ge)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:We(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&co(t,s,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}co(t,l,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&n.focus();break;case"img":o.src&&(n.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var y=m.dehydrated;y!==null&&wr(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(S(163))}ge||t.flags&512&&ys(t)}catch(u){ee(t,t.return,u)}}if(t===e){T=null;break}if(n=t.sibling,n!==null){n.return=t.return,T=n;break}T=t.return}}function Co(e){for(;T!==null;){var t=T;if(t===e){T=null;break}var n=t.sibling;if(n!==null){n.return=t.return,T=n;break}T=t.return}}function Eo(e){for(;T!==null;){var t=T;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Xi(4,t)}catch(o){ee(t,n,o)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(o){ee(t,a,o)}}var s=t.return;try{ys(t)}catch(o){ee(t,s,o)}break;case 5:var l=t.return;try{ys(t)}catch(o){ee(t,l,o)}}}catch(o){ee(t,t.return,o)}if(t===e){T=null;break}var c=t.sibling;if(c!==null){c.return=t.return,T=c;break}T=t.return}}var Cm=Math.ceil,Ri=ft.ReactCurrentDispatcher,dl=ft.ReactCurrentOwner,Oe=ft.ReactCurrentBatchConfig,F=0,de=null,ae=null,me=0,Pe=0,jn=Ht(0),le=0,Tr=null,nn=0,Ji=0,ul=0,hr=null,Ne=null,hl=0,zn=1/0,rt=null,qi=!1,vs=null,qt=null,ti=!1,Mt=null,zi=0,mr=0,ws=null,hi=-1,mi=0;function be(){return F&6?te():hi!==-1?hi:hi=te()}function zt(e){return e.mode&1?F&2&&me!==0?me&-me:dm.transition!==null?(mi===0&&(mi=jc()),mi):(e=W,e!==0||(e=window.event,e=e===void 0?16:Mc(e.type)),e):1}function Ge(e,t,n,r){if(50<mr)throw mr=0,ws=null,Error(S(185));Lr(e,n,r),(!(F&2)||e!==de)&&(e===de&&(!(F&2)&&(Ji|=n),le===4&&_t(e,me)),Ee(e,r),n===1&&F===0&&!(t.mode&1)&&(zn=te()+500,Gi&&Bt()))}function Ee(e,t){var n=e.callbackNode;dh(e,t);var r=vi(e,e===de?me:0);if(r===0)n!==null&&zl(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&zl(n),t===1)e.tag===0?cm(Mo.bind(null,e)):Gc(Mo.bind(null,e)),am(function(){!(F&6)&&Bt()}),n=null;else{switch(kc(r)){case 1:n=Ds;break;case 4:n=wc;break;case 16:n=xi;break;case 536870912:n=bc;break;default:n=xi}n=Qd(n,$d.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function $d(e,t){if(hi=-1,mi=0,F&6)throw Error(S(327));var n=e.callbackNode;if(Mn()&&e.callbackNode!==n)return null;var r=vi(e,e===de?me:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ai(e,r);else{t=r;var a=F;F|=2;var s=Fd();(de!==e||me!==t)&&(rt=null,zn=te()+500,Xt(e,t));do try{Pm();break}catch(c){Od(e,c)}while(!0);Xs(),Ri.current=s,F=a,ae!==null?t=0:(de=null,me=0,t=le)}if(t!==0){if(t===2&&(a=Ua(e),a!==0&&(r=a,t=bs(e,a))),t===1)throw n=Tr,Xt(e,0),_t(e,r),Ee(e,te()),n;if(t===6)_t(e,r);else{if(a=e.current.alternate,!(r&30)&&!Em(a)&&(t=Ai(e,r),t===2&&(s=Ua(e),s!==0&&(r=s,t=bs(e,s))),t===1))throw n=Tr,Xt(e,0),_t(e,r),Ee(e,te()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(S(345));case 2:Ut(e,Ne,rt);break;case 3:if(_t(e,r),(r&130023424)===r&&(t=hl+500-te(),10<t)){if(vi(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){be(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ts(Ut.bind(null,e,Ne,rt),t);break}Ut(e,Ne,rt);break;case 4:if(_t(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var l=31-Ue(r);s=1<<l,l=t[l],l>a&&(a=l),r&=~s}if(r=a,r=te()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cm(r/1960))-r,10<r){e.timeoutHandle=ts(Ut.bind(null,e,Ne,rt),r);break}Ut(e,Ne,rt);break;case 5:Ut(e,Ne,rt);break;default:throw Error(S(329))}}}return Ee(e,te()),e.callbackNode===n?$d.bind(null,e):null}function bs(e,t){var n=hr;return e.current.memoizedState.isDehydrated&&(Xt(e,t).flags|=256),e=Ai(e,t),e!==2&&(t=Ne,Ne=n,t!==null&&js(t)),e}function js(e){Ne===null?Ne=e:Ne.push.apply(Ne,e)}function Em(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!Ye(s(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _t(e,t){for(t&=~ul,t&=~Ji,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ue(t),r=1<<n;e[n]=-1,t&=~r}}function Mo(e){if(F&6)throw Error(S(327));Mn();var t=vi(e,0);if(!(t&1))return Ee(e,te()),null;var n=Ai(e,t);if(e.tag!==0&&n===2){var r=Ua(e);r!==0&&(t=r,n=bs(e,r))}if(n===1)throw n=Tr,Xt(e,0),_t(e,t),Ee(e,te()),n;if(n===6)throw Error(S(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ut(e,Ne,rt),Ee(e,te()),null}function ml(e,t){var n=F;F|=1;try{return e(t)}finally{F=n,F===0&&(zn=te()+500,Gi&&Bt())}}function rn(e){Mt!==null&&Mt.tag===0&&!(F&6)&&Mn();var t=F;F|=1;var n=Oe.transition,r=W;try{if(Oe.transition=null,W=1,e)return e()}finally{W=r,Oe.transition=n,F=t,!(F&6)&&Bt()}}function pl(){Pe=jn.current,U(jn)}function Xt(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,im(n)),ae!==null)for(n=ae.return;n!==null;){var r=n;switch(Gs(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ni();break;case 3:Rn(),U(_e),U(xe),rl();break;case 5:nl(r);break;case 4:Rn();break;case 13:U(K);break;case 19:U(K);break;case 10:Js(r.type._context);break;case 22:case 23:pl()}n=n.return}if(de=e,ae=e=At(e.current,null),me=Pe=t,le=0,Tr=null,ul=Ji=nn=0,Ne=hr=null,Yt!==null){for(t=0;t<Yt.length;t++)if(n=Yt[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=a,r.next=l}n.pending=r}Yt=null}return e}function Od(e,t){do{var n=ae;try{if(Xs(),ci.current=Li,Ii){for(var r=X.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Ii=!1}if(tn=0,oe=se=X=null,dr=!1,Er=0,dl.current=null,n===null||n.return===null){le=1,Tr=t,ae=null;break}e:{var s=e,l=n.return,c=n,o=t;if(t=me,c.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var d=o,m=c,y=m.tag;if(!(m.mode&1)&&(y===0||y===11||y===15)){var u=m.alternate;u?(m.updateQueue=u.updateQueue,m.memoizedState=u.memoizedState,m.lanes=u.lanes):(m.updateQueue=null,m.memoizedState=null)}var h=yo(l);if(h!==null){h.flags&=-257,go(h,l,c,s,t),h.mode&1&&fo(s,d,t),t=h,o=d;var x=t.updateQueue;if(x===null){var v=new Set;v.add(o),t.updateQueue=v}else x.add(o);break e}else{if(!(t&1)){fo(s,d,t),fl();break e}o=Error(S(426))}}else if(G&&c.mode&1){var N=yo(l);if(N!==null){!(N.flags&65536)&&(N.flags|=256),go(N,l,c,s,t),Ys(qn(o,c));break e}}s=o=qn(o,c),le!==4&&(le=2),hr===null?hr=[s]:hr.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var g=kd(s,o,t);oo(s,g);break e;case 1:c=o;var p=s.type,f=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(qt===null||!qt.has(f)))){s.flags|=65536,t&=-t,s.lanes|=t;var k=Nd(s,c,t);oo(s,k);break e}}s=s.return}while(s!==null)}Bd(n)}catch(j){t=j,ae===n&&n!==null&&(ae=n=n.return);continue}break}while(!0)}function Fd(){var e=Ri.current;return Ri.current=Li,e===null?Li:e}function fl(){(le===0||le===3||le===2)&&(le=4),de===null||!(nn&268435455)&&!(Ji&268435455)||_t(de,me)}function Ai(e,t){var n=F;F|=2;var r=Fd();(de!==e||me!==t)&&(rt=null,Xt(e,t));do try{Mm();break}catch(a){Od(e,a)}while(!0);if(Xs(),F=n,Ri.current=r,ae!==null)throw Error(S(261));return de=null,me=0,le}function Mm(){for(;ae!==null;)Hd(ae)}function Pm(){for(;ae!==null&&!th();)Hd(ae)}function Hd(e){var t=Vd(e.alternate,e,Pe);e.memoizedProps=e.pendingProps,t===null?Bd(e):ae=t,dl.current=null}function Bd(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=km(n,t),n!==null){n.flags&=32767,ae=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{le=6,ae=null;return}}else if(n=jm(n,t,Pe),n!==null){ae=n;return}if(t=t.sibling,t!==null){ae=t;return}ae=t=e}while(t!==null);le===0&&(le=5)}function Ut(e,t,n){var r=W,a=Oe.transition;try{Oe.transition=null,W=1,Tm(e,t,n,r)}finally{Oe.transition=a,W=r}return null}function Tm(e,t,n,r){do Mn();while(Mt!==null);if(F&6)throw Error(S(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(S(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(uh(e,s),e===de&&(ae=de=null,me=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ti||(ti=!0,Qd(xi,function(){return Mn(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Oe.transition,Oe.transition=null;var l=W;W=1;var c=F;F|=4,dl.current=null,Sm(e,n),Ad(n,e),Xh(Za),wi=!!Ja,Za=Ja=null,e.current=n,_m(n),nh(),F=c,W=l,Oe.transition=s}else e.current=n;if(ti&&(ti=!1,Mt=e,zi=a),s=e.pendingLanes,s===0&&(qt=null),ah(n.stateNode),Ee(e,te()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(qi)throw qi=!1,e=vs,vs=null,e;return zi&1&&e.tag!==0&&Mn(),s=e.pendingLanes,s&1?e===ws?mr++:(mr=0,ws=e):mr=0,Bt(),null}function Mn(){if(Mt!==null){var e=kc(zi),t=Oe.transition,n=W;try{if(Oe.transition=null,W=16>e?16:e,Mt===null)var r=!1;else{if(e=Mt,Mt=null,zi=0,F&6)throw Error(S(331));var a=F;for(F|=4,T=e.current;T!==null;){var s=T,l=s.child;if(T.flags&16){var c=s.deletions;if(c!==null){for(var o=0;o<c.length;o++){var d=c[o];for(T=d;T!==null;){var m=T;switch(m.tag){case 0:case 11:case 15:ur(8,m,s)}var y=m.child;if(y!==null)y.return=m,T=y;else for(;T!==null;){m=T;var u=m.sibling,h=m.return;if(Rd(m),m===d){T=null;break}if(u!==null){u.return=h,T=u;break}T=h}}}var x=s.alternate;if(x!==null){var v=x.child;if(v!==null){x.child=null;do{var N=v.sibling;v.sibling=null,v=N}while(v!==null)}}T=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,T=l;else e:for(;T!==null;){if(s=T,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ur(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,T=g;break e}T=s.return}}var p=e.current;for(T=p;T!==null;){l=T;var f=l.child;if(l.subtreeFlags&2064&&f!==null)f.return=l,T=f;else e:for(l=p;T!==null;){if(c=T,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Xi(9,c)}}catch(j){ee(c,c.return,j)}if(c===l){T=null;break e}var k=c.sibling;if(k!==null){k.return=c.return,T=k;break e}T=c.return}}if(F=a,Bt(),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(Bi,e)}catch{}r=!0}return r}finally{W=n,Oe.transition=t}}return!1}function Po(e,t,n){t=qn(n,t),t=kd(e,t,1),e=Rt(e,t,1),t=be(),e!==null&&(Lr(e,1,t),Ee(e,t))}function ee(e,t,n){if(e.tag===3)Po(e,e,n);else for(;t!==null;){if(t.tag===3){Po(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qt===null||!qt.has(r))){e=qn(n,e),e=Nd(t,e,1),t=Rt(t,e,1),e=be(),t!==null&&(Lr(t,1,e),Ee(t,e));break}}t=t.return}}function Im(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=be(),e.pingedLanes|=e.suspendedLanes&n,de===e&&(me&n)===n&&(le===4||le===3&&(me&130023424)===me&&500>te()-hl?Xt(e,0):ul|=n),Ee(e,t)}function Wd(e,t){t===0&&(e.mode&1?(t=Vr,Vr<<=1,!(Vr&130023424)&&(Vr=4194304)):t=1);var n=be();e=ut(e,t),e!==null&&(Lr(e,t,n),Ee(e,n))}function Lm(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Wd(e,n)}function Rm(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(S(314))}r!==null&&r.delete(t),Wd(e,n)}var Vd;Vd=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||_e.current)Se=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Se=!1,bm(e,t,n);Se=!!(e.flags&131072)}else Se=!1,G&&t.flags&1048576&&Yc(t,Ci,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ui(e,t),e=t.pendingProps;var a=Tn(t,xe.current);En(t,n),a=al(null,t,r,e,a,n);var s=sl();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ce(r)?(s=!0,Si(t)):s=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,el(t),a.updater=Ki,t.stateNode=a,a._reactInternals=t,os(t,r,e,n),t=us(null,t,r,!0,s,n)):(t.tag=0,G&&s&&Us(t),ve(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ui(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=zm(r),e=We(r,e),a){case 0:t=ds(null,t,r,e,n);break e;case 1:t=wo(null,t,r,e,n);break e;case 11:t=xo(null,t,r,e,n);break e;case 14:t=vo(null,t,r,We(r.type,e),n);break e}throw Error(S(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:We(r,a),ds(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:We(r,a),wo(e,t,r,a,n);case 3:e:{if(Ed(t),e===null)throw Error(S(387));r=t.pendingProps,s=t.memoizedState,a=s.element,td(e,t),Pi(t,r,null,n);var l=t.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){a=qn(Error(S(423)),t),t=bo(e,t,r,n,a);break e}else if(r!==a){a=qn(Error(S(424)),t),t=bo(e,t,r,n,a);break e}else for(Te=Lt(t.stateNode.containerInfo.firstChild),Ie=t,G=!0,Qe=null,n=Zc(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(In(),r===a){t=ht(e,t,n);break e}ve(e,t,r,n)}t=t.child}return t;case 5:return nd(t),e===null&&as(t),r=t.type,a=t.pendingProps,s=e!==null?e.memoizedProps:null,l=a.children,es(r,a)?l=null:s!==null&&es(r,s)&&(t.flags|=32),Cd(e,t),ve(e,t,l,n),t.child;case 6:return e===null&&as(t),null;case 13:return Md(e,t,n);case 4:return tl(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ln(t,null,r,n):ve(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:We(r,a),xo(e,t,r,a,n);case 7:return ve(e,t,t.pendingProps,n),t.child;case 8:return ve(e,t,t.pendingProps.children,n),t.child;case 12:return ve(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,s=t.memoizedProps,l=a.value,V(Ei,r._currentValue),r._currentValue=l,s!==null)if(Ye(s.value,l)){if(s.children===a.children&&!_e.current){t=ht(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var c=s.dependencies;if(c!==null){l=s.child;for(var o=c.firstContext;o!==null;){if(o.context===r){if(s.tag===1){o=lt(-1,n&-n),o.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?o.next=o:(o.next=m.next,m.next=o),d.pending=o}}s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),ss(s.return,n,t),c.lanes|=n;break}o=o.next}}else if(s.tag===10)l=s.type===t.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(S(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),ss(l,n,t),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===t){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}ve(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,En(t,n),a=Fe(a),r=r(a),t.flags|=1,ve(e,t,r,n),t.child;case 14:return r=t.type,a=We(r,t.pendingProps),a=We(r.type,a),vo(e,t,r,a,n);case 15:return Sd(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:We(r,a),ui(e,t),t.tag=1,Ce(r)?(e=!0,Si(t)):e=!1,En(t,n),jd(t,r,a),os(t,r,a,n),us(null,t,r,!0,e,n);case 19:return Pd(e,t,n);case 22:return _d(e,t,n)}throw Error(S(156,t.tag))};function Qd(e,t){return vc(e,t)}function qm(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function De(e,t,n,r){return new qm(e,t,n,r)}function yl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zm(e){if(typeof e=="function")return yl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===qs)return 11;if(e===zs)return 14}return 2}function At(e,t){var n=e.alternate;return n===null?(n=De(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function pi(e,t,n,r,a,s){var l=2;if(r=e,typeof e=="function")yl(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case hn:return Jt(n.children,a,s,t);case Rs:l=8,a|=8;break;case Ia:return e=De(12,n,t,a|2),e.elementType=Ia,e.lanes=s,e;case La:return e=De(13,n,t,a),e.elementType=La,e.lanes=s,e;case Ra:return e=De(19,n,t,a),e.elementType=Ra,e.lanes=s,e;case nc:return Zi(n,a,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ec:l=10;break e;case tc:l=9;break e;case qs:l=11;break e;case zs:l=14;break e;case kt:l=16,r=null;break e}throw Error(S(130,e==null?e:typeof e,""))}return t=De(l,n,t,a),t.elementType=e,t.type=r,t.lanes=s,t}function Jt(e,t,n,r){return e=De(7,e,r,t),e.lanes=n,e}function Zi(e,t,n,r){return e=De(22,e,r,t),e.elementType=nc,e.lanes=n,e.stateNode={isHidden:!1},e}function Ea(e,t,n){return e=De(6,e,null,t),e.lanes=n,e}function Ma(e,t,n){return t=De(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Am(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ca(0),this.expirationTimes=ca(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ca(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function gl(e,t,n,r,a,s,l,c,o){return e=new Am(e,t,n,c,o),t===1?(t=1,s===!0&&(t|=8)):t=0,s=De(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},el(s),e}function Dm(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:un,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ud(e){if(!e)return $t;e=e._reactInternals;e:{if(ln(e)!==e||e.tag!==1)throw Error(S(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ce(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(S(171))}if(e.tag===1){var n=e.type;if(Ce(n))return Uc(e,n,t)}return t}function Gd(e,t,n,r,a,s,l,c,o){return e=gl(n,r,!0,e,a,s,l,c,o),e.context=Ud(null),n=e.current,r=be(),a=zt(n),s=lt(r,a),s.callback=t??null,Rt(n,s,a),e.current.lanes=a,Lr(e,a,r),Ee(e,r),e}function ea(e,t,n,r){var a=t.current,s=be(),l=zt(a);return n=Ud(n),t.context===null?t.context=n:t.pendingContext=n,t=lt(s,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Rt(a,t,l),e!==null&&(Ge(e,a,l,s),oi(e,a,l)),l}function Di(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function To(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function xl(e,t){To(e,t),(e=e.alternate)&&To(e,t)}function $m(){return null}var Yd=typeof reportError=="function"?reportError:function(e){console.error(e)};function vl(e){this._internalRoot=e}ta.prototype.render=vl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(S(409));ea(e,t,null,null)};ta.prototype.unmount=vl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rn(function(){ea(null,e,null,null)}),t[dt]=null}};function ta(e){this._internalRoot=e}ta.prototype.unstable_scheduleHydration=function(e){if(e){var t=_c();e={blockedOn:null,target:e,priority:t};for(var n=0;n<St.length&&t!==0&&t<St[n].priority;n++);St.splice(n,0,e),n===0&&Ec(e)}};function wl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function na(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Io(){}function Om(e,t,n,r,a){if(a){if(typeof r=="function"){var s=r;r=function(){var d=Di(l);s.call(d)}}var l=Gd(t,r,e,0,null,!1,!1,"",Io);return e._reactRootContainer=l,e[dt]=l.current,kr(e.nodeType===8?e.parentNode:e),rn(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var c=r;r=function(){var d=Di(o);c.call(d)}}var o=gl(e,0,!1,null,null,!1,!1,"",Io);return e._reactRootContainer=o,e[dt]=o.current,kr(e.nodeType===8?e.parentNode:e),rn(function(){ea(t,o,n,r)}),o}function ra(e,t,n,r,a){var s=n._reactRootContainer;if(s){var l=s;if(typeof a=="function"){var c=a;a=function(){var o=Di(l);c.call(o)}}ea(t,l,e,a)}else l=Om(n,t,e,a,r);return Di(l)}Nc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=tr(t.pendingLanes);n!==0&&($s(t,n|1),Ee(t,te()),!(F&6)&&(zn=te()+500,Bt()))}break;case 13:rn(function(){var r=ut(e,1);if(r!==null){var a=be();Ge(r,e,1,a)}}),xl(e,1)}};Os=function(e){if(e.tag===13){var t=ut(e,134217728);if(t!==null){var n=be();Ge(t,e,134217728,n)}xl(e,134217728)}};Sc=function(e){if(e.tag===13){var t=zt(e),n=ut(e,t);if(n!==null){var r=be();Ge(n,e,t,r)}xl(e,t)}};_c=function(){return W};Cc=function(e,t){var n=W;try{return W=e,t()}finally{W=n}};Wa=function(e,t,n){switch(t){case"input":if(Aa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Ui(r);if(!a)throw Error(S(90));ic(r),Aa(r,a)}}}break;case"textarea":sc(e,n);break;case"select":t=n.value,t!=null&&Nn(e,!!n.multiple,t,!1)}};mc=ml;pc=rn;var Fm={usingClientEntryPoint:!1,Events:[qr,yn,Ui,uc,hc,ml]},Jn={findFiberByHostInstance:Gt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hm={bundleType:Jn.bundleType,version:Jn.version,rendererPackageName:Jn.rendererPackageName,rendererConfig:Jn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ft.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=gc(e),e===null?null:e.stateNode},findFiberByHostInstance:Jn.findFiberByHostInstance||$m,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ni=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ni.isDisabled&&ni.supportsFiber)try{Bi=ni.inject(Hm),Ze=ni}catch{}}Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fm;Re.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wl(t))throw Error(S(200));return Dm(e,t,null,n)};Re.createRoot=function(e,t){if(!wl(e))throw Error(S(299));var n=!1,r="",a=Yd;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=gl(e,1,!1,null,null,n,!1,r,a),e[dt]=t.current,kr(e.nodeType===8?e.parentNode:e),new vl(t)};Re.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(S(188)):(e=Object.keys(e).join(","),Error(S(268,e)));return e=gc(t),e=e===null?null:e.stateNode,e};Re.flushSync=function(e){return rn(e)};Re.hydrate=function(e,t,n){if(!na(t))throw Error(S(200));return ra(null,e,t,!0,n)};Re.hydrateRoot=function(e,t,n){if(!wl(e))throw Error(S(405));var r=n!=null&&n.hydratedSources||null,a=!1,s="",l=Yd;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Gd(t,null,e,1,n??null,a,!1,s,l),e[dt]=t.current,kr(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new ta(t)};Re.render=function(e,t,n){if(!na(t))throw Error(S(200));return ra(null,e,t,!1,n)};Re.unmountComponentAtNode=function(e){if(!na(e))throw Error(S(40));return e._reactRootContainer?(rn(function(){ra(null,null,e,!1,function(){e._reactRootContainer=null,e[dt]=null})}),!0):!1};Re.unstable_batchedUpdates=ml;Re.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!na(n))throw Error(S(200));if(e==null||e._reactInternals===void 0)throw Error(S(38));return ra(e,t,n,!1,r)};Re.version="18.3.1-next-f1338f8080-20240426";function Kd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kd)}catch(e){console.error(e)}}Kd(),Ko.exports=Re;var Bm=Ko.exports,Xd,Lo=Bm;Xd=Lo.createRoot,Lo.hydrateRoot;const I=[{id:"slash",name:"Slash",description:"A basic melee attack with a bladed weapon",energyCost:2,damage:15,range:1,cooldown:1,currentCooldown:0,unlockLevel:1,animation:"slash"},{id:"power_strike",name:"Power Strike",description:"A devastating melee attack that deals massive damage",energyCost:5,damage:35,range:1,cooldown:3,currentCooldown:0,unlockLevel:3,animation:"power_strike"},{id:"defensive_stance",name:"Defensive Stance",description:"Increases defense but reduces movement speed",energyCost:3,effect:{type:"buff",duration:5,value:10},range:0,cooldown:5,currentCooldown:0,unlockLevel:2,animation:"defensive_stance"},{id:"aimed_shot",name:"Aimed Shot",description:"A precise ranged attack with increased critical chance",energyCost:4,damage:25,range:5,cooldown:2,currentCooldown:0,unlockLevel:1,animation:"aimed_shot"},{id:"quick_shot",name:"Quick Shot",description:"A fast ranged attack with reduced damage",energyCost:2,damage:12,range:4,cooldown:.5,currentCooldown:0,unlockLevel:1,animation:"quick_shot"},{id:"explosive_shot",name:"Explosive Shot",description:"A shot that explodes on impact, dealing area damage",energyCost:6,damage:30,range:5,cooldown:4,currentCooldown:0,unlockLevel:3,animation:"explosive_shot"},{id:"heal",name:"Heal",description:"Restore health to an ally",energyCost:4,healing:30,range:2,cooldown:1,currentCooldown:0,unlockLevel:1,animation:"heal"},{id:"poison_dart",name:"Poison Dart",description:"A ranged attack that poisons the target",energyCost:3,damage:10,effect:{type:"poison",duration:3,value:5},range:3,cooldown:2,currentCooldown:0,unlockLevel:2,animation:"poison_dart"},{id:"adrenaline_shot",name:"Adrenaline Shot",description:"Inject an ally with adrenaline, boosting their damage",energyCost:5,effect:{type:"buff",duration:4,value:15},range:2,cooldown:5,currentCooldown:0,unlockLevel:3,animation:"adrenaline_shot"},{id:"emp_blast",name:"EMP Blast",description:"An electromagnetic pulse that damages robotic enemies",energyCost:4,damage:25,range:3,cooldown:3,currentCooldown:0,unlockLevel:1,animation:"emp_blast"},{id:"turret_deploy",name:"Deploy Turret",description:"Deploy a temporary turret that attacks enemies",energyCost:8,damage:15,range:1,cooldown:8,currentCooldown:0,unlockLevel:3,animation:"turret_deploy"},{id:"shock_trap",name:"Shock Trap",description:"Place an electric trap that stuns enemies",energyCost:5,damage:20,effect:{type:"stun",duration:2,value:1},range:2,cooldown:4,currentCooldown:0,unlockLevel:2,animation:"shock_trap"},{id:"cure",name:"Cure",description:"Remove negative status effects from an ally",energyCost:3,range:2,cooldown:2,currentCooldown:0,unlockLevel:2,animation:"cure"},{id:"stimpack",name:"Stimpack",description:"Quick healing injection",energyCost:2,healing:20,range:1,cooldown:1,currentCooldown:0,unlockLevel:1,animation:"stimpack"}],w=[{id:"rusty_pipe",name:"Rusty Pipe",type:"weapon",rarity:"common",description:"A makeshift weapon from the old world",stats:{damage:8,criticalChance:5},value:10,sprite:"rusty_pipe",stackable:!1},{id:"combat_knife",name:"Combat Knife",type:"weapon",rarity:"uncommon",description:"A sharp military-grade knife",stats:{damage:12,criticalChance:15,agility:2},value:25,sprite:"combat_knife",stackable:!1},{id:"assault_rifle",name:"Assault Rifle",type:"weapon",rarity:"rare",description:"A reliable automatic weapon",stats:{damage:20,criticalChance:10,strength:1},value:150,sprite:"assault_rifle",stackable:!1},{id:"plasma_rifle",name:"Plasma Rifle",type:"weapon",rarity:"epic",description:"An advanced energy weapon",stats:{damage:35,criticalChance:20,intelligence:3},value:500,sprite:"plasma_rifle",stackable:!1},{id:"leather_jacket",name:"Leather Jacket",type:"armor",rarity:"common",description:"Worn but protective leather armor",stats:{defense:5,endurance:1},value:15,sprite:"leather_jacket",stackable:!1},{id:"combat_armor",name:"Combat Armor",type:"armor",rarity:"uncommon",description:"Military-grade protective gear",stats:{defense:12,strength:2,endurance:2},value:75,sprite:"combat_armor",stackable:!1},{id:"power_armor",name:"Power Armor",type:"armor",rarity:"legendary",description:"Advanced powered exoskeleton",stats:{defense:25,strength:5,endurance:5,agility:-2},value:1e3,sprite:"power_armor",stackable:!1},{id:"stimpak",name:"Stimpak",type:"consumable",rarity:"common",description:"Instantly restores health",quantity:1,value:20,sprite:"stimpak",stackable:!0},{id:"rad_away",name:"Rad-Away",type:"consumable",rarity:"uncommon",description:"Removes radiation poisoning",quantity:1,value:30,sprite:"rad_away",stackable:!0},{id:"psycho",name:"Psycho",type:"consumable",rarity:"rare",description:"Increases damage but causes addiction",quantity:1,value:50,sprite:"psycho",stackable:!0},{id:"buffout",name:"Buffout",type:"consumable",rarity:"uncommon",description:"Temporarily increases strength and endurance",quantity:1,value:40,sprite:"buffout",stackable:!0},{id:"mentats",name:"Mentats",type:"consumable",rarity:"uncommon",description:"Temporarily increases intelligence and perception",quantity:1,value:35,sprite:"mentats",stackable:!0},{id:"scrap_metal",name:"Scrap Metal",type:"material",rarity:"common",description:"Useful for crafting and repairs",quantity:1,value:1,sprite:"scrap_metal",stackable:!0},{id:"electronics",name:"Electronics",type:"material",rarity:"uncommon",description:"Complex electronic components",quantity:1,value:8,sprite:"electronics",stackable:!0},{id:"rare_earth",name:"Rare Earth Elements",type:"material",rarity:"rare",description:"Precious materials for advanced crafting",quantity:1,value:35,sprite:"rare_earth",stackable:!0},{id:"rusty_can",name:"Rusty Can",type:"material",rarity:"common",description:"An old, rusted tin can. Barely worth anything.",quantity:1,value:1,sprite:"rusty_can",stackable:!0},{id:"broken_glass",name:"Broken Glass",type:"material",rarity:"common",description:"Shards of broken glass. Handle with care.",quantity:1,value:1,sprite:"broken_glass",stackable:!0},{id:"dirty_water",name:"Dirty Water",type:"consumable",rarity:"common",description:"Contaminated water. Might make you sick.",quantity:1,value:2,sprite:"dirty_water",stackable:!0},{id:"moldy_food",name:"Moldy Food",type:"consumable",rarity:"common",description:"Food that has seen better days. Probably not safe to eat.",quantity:1,value:1,sprite:"moldy_food",stackable:!0},{id:"old_newspaper",name:"Old Newspaper",type:"material",rarity:"common",description:"A yellowed newspaper from before the war. Good for starting fires.",quantity:1,value:1,sprite:"old_newspaper",stackable:!0},{id:"bent_spoon",name:"Bent Spoon",type:"material",rarity:"common",description:"A twisted piece of cutlery. Might have some scrap value.",quantity:1,value:1,sprite:"bent_spoon",stackable:!0}],Wm=[{id:"alien_blaster",name:"Alien Blaster",type:"weapon",rarity:"legendary",description:"An otherworldly energy weapon of unknown origin",stats:{damage:50,criticalChance:25,intelligence:2},value:2e3,sprite:"alien_blaster",stackable:!1},{id:"alien_power_cell",name:"Alien Power Cell",type:"material",rarity:"rare",description:"Advanced alien energy storage device",quantity:1,value:100,sprite:"alien_power_cell",stackable:!0},{id:"pip_boy",name:"Pip-Boy 3000",type:"accessory",rarity:"epic",description:"Personal Information Processor from Vault-Tec",stats:{intelligence:3,perception:2},value:1500,sprite:"pip_boy",stackable:!1},{id:"vault_suit",name:"Vault 101 Jumpsuit",type:"armor",rarity:"uncommon",description:"Standard issue Vault-Tec jumpsuit",stats:{defense:3,endurance:1},value:50,sprite:"vault_suit",stackable:!1},{id:"brotherhood_armor",name:"Brotherhood Combat Armor",type:"armor",rarity:"rare",description:"Advanced combat armor used by the Brotherhood of Steel",stats:{defense:18,strength:2,endurance:3},value:400,sprite:"brotherhood_armor",stackable:!1},{id:"laser_rifle",name:"Laser Rifle",type:"weapon",rarity:"rare",description:"Military-grade energy weapon",stats:{damage:28,criticalChance:15,intelligence:1},value:300,sprite:"laser_rifle",stackable:!1},{id:"enclave_armor",name:"Enclave Power Armor",type:"armor",rarity:"epic",description:"Advanced power armor used by Enclave forces",stats:{defense:30,strength:6,endurance:6,agility:-3},value:1500,sprite:"enclave_armor",stackable:!1},{id:"geck",name:"G.E.C.K.",type:"quest",rarity:"legendary",description:"Garden of Eden Creation Kit - the key to Project Purity",value:0,sprite:"geck",stackable:!1},{id:"declaration_independence",name:"Declaration of Independence",type:"quest",rarity:"legendary",description:"The founding document of the United States of America",value:0,sprite:"declaration",stackable:!1},{id:"water_chip",name:"Water Chip",type:"quest",rarity:"epic",description:"Essential component for water purification systems",value:0,sprite:"water_chip",stackable:!1},{id:"nuka_cola",name:"Nuka-Cola",type:"consumable",rarity:"common",description:"The refreshing taste of the old world",quantity:1,value:15,sprite:"nuka_cola",stackable:!0},{id:"purified_water",name:"Purified Water",type:"consumable",rarity:"uncommon",description:"Clean, radiation-free water",quantity:1,value:25,sprite:"purified_water",stackable:!0}];w.push(...Wm);const Vm=[{id:"escape_vault_101",title:"Escape!",description:"Your father has left Vault 101, breaking the most sacred rule. The Overseer wants you gone, and the only way out is through the vault door that has been sealed for 200 years.",objectives:[{id:"find_father_room",description:"Search your father's room for clues",type:"explore",target:"father_room",current:0,required:1,completed:!1},{id:"get_pip_boy",description:"Retrieve your Pip-Boy 3000",type:"collect",target:"pip_boy",current:0,required:1,completed:!1},{id:"reach_vault_door",description:"Reach the vault entrance",type:"explore",target:"vault_door",current:0,required:1,completed:!1},{id:"exit_vault",description:"Step into the Capital Wasteland",type:"explore",target:"wasteland_surface",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:200},{type:"item",value:1,item:w.find(e=>e.id==="pip_boy")}],status:"active",requiredLevel:1},{id:"following_in_his_footsteps",title:"Following in His Footsteps",description:"Your father James has left Vault 101 to continue his work on Project Purity. Track him down by following the trail of people who have seen him.",objectives:[{id:"talk_to_simms",description:"Speak with Sheriff Simms in Megaton",type:"talk",target:"sheriff_lucas",current:0,required:1,completed:!1},{id:"visit_gnr",description:"Travel to Galaxy News Radio",type:"explore",target:"galaxy_news_radio",current:0,required:1,completed:!1},{id:"talk_three_dog",description:"Speak with Three Dog",type:"talk",target:"three_dog",current:0,required:1,completed:!1},{id:"reach_rivet_city",description:"Travel to Rivet City",type:"explore",target:"rivet_city",current:0,required:1,completed:!1},{id:"talk_dr_li",description:"Speak with Dr. Madison Li",type:"talk",target:"dr_li",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:300},{type:"gold",value:200},{type:"item",value:1,item:w.find(e=>e.id==="combat_armor")}],status:"available",requiredLevel:2},{id:"scientific_pursuits",title:"Scientific Pursuits",description:"Dr. Li has told you that your father went to the Jefferson Memorial to restart Project Purity. Follow him there, but be prepared for danger.",objectives:[{id:"reach_jefferson_memorial",description:"Travel to the Jefferson Memorial",type:"explore",target:"jefferson_memorial",current:0,required:1,completed:!1},{id:"clear_super_mutants",description:"Clear super mutants from Project Purity",type:"kill",target:"super_mutant",current:0,required:8,completed:!1},{id:"find_james",description:"Locate your father James",type:"talk",target:"james",current:0,required:1,completed:!1},{id:"activate_project_purity",description:"Help activate Project Purity",type:"explore",target:"project_purity_activation",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:400},{type:"gold",value:300},{type:"item",value:1,item:w.find(e=>e.id==="plasma_rifle")}],status:"available",requiredLevel:5},{id:"the_waters_of_life",title:"The Waters of Life",description:"Project Purity is operational, but the Enclave has arrived to seize control. Work with the Brotherhood of Steel to protect the water purifier and ensure it serves all of humanity.",objectives:[{id:"escape_enclave",description:"Escape the Enclave assault on Project Purity",type:"explore",target:"enclave_escape",current:0,required:1,completed:!1},{id:"reach_citadel",description:"Travel to the Citadel",type:"explore",target:"citadel",current:0,required:1,completed:!1},{id:"talk_elder_lyons",description:"Speak with Elder Lyons",type:"talk",target:"elder_lyons",current:0,required:1,completed:!1},{id:"retrieve_geck",description:"Retrieve the G.E.C.K. from Vault 87",type:"collect",target:"geck",current:0,required:1,completed:!1},{id:"return_project_purity",description:"Return to Project Purity with the G.E.C.K.",type:"explore",target:"project_purity_return",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:600},{type:"gold",value:500},{type:"item",value:1,item:w.find(e=>e.id==="power_armor")}],status:"available",requiredLevel:8},{id:"take_it_back",title:"Take It Back!",description:"The final battle for Project Purity has begun. Lead the Brotherhood of Steel in an assault on the Jefferson Memorial to reclaim the water purifier from the Enclave.",objectives:[{id:"assault_memorial",description:"Join the Brotherhood assault on the Memorial",type:"explore",target:"memorial_assault",current:0,required:1,completed:!1},{id:"defeat_enclave_forces",description:"Defeat the Enclave forces",type:"kill",target:"enclave_soldier",current:0,required:15,completed:!1},{id:"reach_control_room",description:"Reach the Project Purity control room",type:"explore",target:"purity_control_room",current:0,required:1,completed:!1},{id:"activate_purifier",description:"Activate the water purifier",type:"explore",target:"purifier_final_activation",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:1e3},{type:"gold",value:1e3},{type:"item",value:1,item:w.find(e=>e.id==="power_armor")}],status:"available",requiredLevel:15}],Qm=[{id:"the_power_of_atom",title:"The Power of the Atom",description:"Megaton is built around an unexploded atomic bomb. Sheriff Simms wants it disarmed, but others have different ideas about the bomb's fate.",objectives:[{id:"examine_bomb",description:"Examine the atomic bomb in Megaton",type:"explore",target:"megaton_bomb",current:0,required:1,completed:!1},{id:"talk_burke",description:"Speak with Mr. Burke about the bomb",type:"talk",target:"burke",current:0,required:1,completed:!1},{id:"make_bomb_choice",description:"Decide the fate of Megaton's bomb",type:"explore",target:"bomb_decision",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:300},{type:"gold",value:500},{type:"item",value:1,item:w.find(e=>e.id==="power_armor")}],status:"available",requiredLevel:3},{id:"wasteland_survival_guide",title:"The Wasteland Survival Guide",description:"Moira Brown in Megaton wants to write the definitive guide to wasteland survival. She needs someone to test her theories in the field.",objectives:[{id:"test_radiation",description:"Test the effects of radiation exposure",type:"explore",target:"radiation_test",current:0,required:1,completed:!1},{id:"test_injury",description:"Test injury treatment methods",type:"explore",target:"injury_test",current:0,required:1,completed:!1},{id:"test_food",description:"Test wasteland food sources",type:"collect",target:"wasteland_food",current:0,required:5,completed:!1},{id:"test_combat",description:"Test combat techniques against raiders",type:"kill",target:"raider",current:0,required:10,completed:!1},{id:"complete_guide",description:"Return to Moira with your findings",type:"talk",target:"moira_brown",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:400},{type:"gold",value:300},{type:"item",value:1,item:w.find(e=>e.id==="combat_armor")}],status:"available",requiredLevel:2},{id:"blood_ties",title:"Blood Ties",description:'The residents of Arefu are being terrorized by a group calling themselves "The Family." Investigate these mysterious attackers and their connection to a missing boy.',objectives:[{id:"investigate_arefu",description:"Investigate the attacks in Arefu",type:"explore",target:"arefu_investigation",current:0,required:1,completed:!1},{id:"find_ian_west",description:"Find Ian West",type:"talk",target:"ian_west",current:0,required:1,completed:!1},{id:"meet_the_family",description:"Meet with The Family",type:"talk",target:"vance",current:0,required:1,completed:!1},{id:"resolve_conflict",description:"Resolve the conflict between Arefu and The Family",type:"talk",target:"family_resolution",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:350},{type:"gold",value:250},{type:"item",value:1,item:w.find(e=>e.id==="combat_knife")}],status:"available",requiredLevel:4},{id:"the_superhuman_gambit",title:"The Superhuman Gambit",description:"The town of Canterbury Commons is caught in the middle of a battle between two costumed characters: the AntAgonizer and the Mechanist.",objectives:[{id:"reach_canterbury",description:"Travel to Canterbury Commons",type:"explore",target:"canterbury_commons",current:0,required:1,completed:!1},{id:"talk_uncle_roe",description:"Speak with Uncle Roe",type:"talk",target:"uncle_roe",current:0,required:1,completed:!1},{id:"investigate_antagonizer",description:"Investigate the AntAgonizer",type:"explore",target:"antagonizer_lair",current:0,required:1,completed:!1},{id:"investigate_mechanist",description:"Investigate the Mechanist",type:"explore",target:"mechanist_lair",current:0,required:1,completed:!1},{id:"resolve_conflict",description:"End the conflict between the two heroes",type:"talk",target:"hero_resolution",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:300},{type:"gold",value:400},{type:"item",value:1,item:w.find(e=>e.id==="power_armor")}],status:"available",requiredLevel:6},{id:"stealing_independence",title:"Stealing Independence",description:"Abraham Washington in Rivet City wants you to retrieve the Declaration of Independence from the National Archives, but the building is heavily defended.",objectives:[{id:"reach_archives",description:"Travel to the National Archives",type:"explore",target:"national_archives",current:0,required:1,completed:!1},{id:"clear_super_mutants",description:"Clear super mutants from the Archives",type:"kill",target:"super_mutant",current:0,required:12,completed:!1},{id:"find_declaration",description:"Locate the Declaration of Independence",type:"collect",target:"declaration_independence",current:0,required:1,completed:!1},{id:"return_washington",description:"Return the Declaration to Abraham Washington",type:"talk",target:"abraham_washington",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:450},{type:"gold",value:600},{type:"item",value:1,item:w.find(e=>e.id==="plasma_rifle")}],status:"available",requiredLevel:8},{id:"reillys_rangers",title:"Reilly's Rangers",description:"Reilly's Rangers are trapped in the Statesman Hotel, surrounded by super mutants. Mount a rescue mission to save the elite mercenary team.",objectives:[{id:"find_reilly",description:"Find Reilly in the Underworld",type:"talk",target:"reilly",current:0,required:1,completed:!1},{id:"reach_statesman_hotel",description:"Travel to the Statesman Hotel",type:"explore",target:"statesman_hotel",current:0,required:1,completed:!1},{id:"rescue_rangers",description:"Rescue the trapped Rangers",type:"talk",target:"trapped_ranger",current:0,required:3,completed:!1},{id:"clear_escape_route",description:"Clear an escape route",type:"kill",target:"super_mutant",current:0,required:15,completed:!1},{id:"return_reilly",description:"Return to Reilly",type:"talk",target:"reilly",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:500},{type:"gold",value:700},{type:"item",value:1,item:w.find(e=>e.id==="combat_armor")}],status:"available",requiredLevel:10},{id:"the_replicated_man",title:"The Replicated Man",description:"Dr. Zimmer from the Commonwealth is searching for an escaped android. Help him track down the runaway, or help the android escape its pursuers.",objectives:[{id:"talk_zimmer",description:"Speak with Dr. Zimmer in Rivet City",type:"talk",target:"dr_zimmer",current:0,required:1,completed:!1},{id:"investigate_android",description:"Investigate reports of the android",type:"explore",target:"android_clues",current:0,required:3,completed:!1},{id:"find_android",description:"Locate the escaped android",type:"talk",target:"android",current:0,required:1,completed:!1},{id:"make_choice",description:"Decide the android's fate",type:"talk",target:"android_choice",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:400},{type:"gold",value:500},{type:"item",value:1,item:w.find(e=>e.id==="plasma_rifle")}],status:"available",requiredLevel:12},{id:"trouble_on_the_homefront",title:"Trouble on the Homefront",description:"Vault 101 is in crisis. The Overseer is dead, and the vault is divided between those who want to open to the outside world and those who want to remain sealed.",objectives:[{id:"return_vault_101",description:"Return to Vault 101",type:"explore",target:"vault_101_return",current:0,required:1,completed:!1},{id:"investigate_crisis",description:"Investigate the crisis in the vault",type:"talk",target:"vault_resident",current:0,required:3,completed:!1},{id:"resolve_conflict",description:"Resolve the conflict in Vault 101",type:"talk",target:"vault_resolution",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:350},{type:"gold",value:300},{type:"item",value:1,item:w.find(e=>e.id==="combat_armor")}],status:"available",requiredLevel:14}],Um=[{id:"into_the_pitt",title:"Into the Pitt",description:"Travel to the industrial wasteland of The Pitt and discover the dark secrets of this slave city built on steel production.",objectives:[{id:"reach_the_pitt",description:"Travel to The Pitt",type:"explore",target:"the_pitt_entrance",current:0,required:1,completed:!1},{id:"meet_werner",description:"Meet with Werner in the steelyard",type:"talk",target:"werner",current:0,required:1,completed:!1},{id:"investigate_situation",description:"Investigate the situation in The Pitt",type:"explore",target:"pitt_investigation",current:0,required:3,completed:!1},{id:"meet_ashur",description:"Meet with Lord Ashur",type:"talk",target:"ashur",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:400},{type:"gold",value:300},{type:"item",value:1,item:w.find(e=>e.id==="combat_armor")}],status:"available",requiredLevel:8},{id:"unsafe_working_conditions",title:"Unsafe Working Conditions",description:"Choose between supporting Lord Ashur's vision of a cure for the Trog Degenerative Contagion or helping the Underground free the workers.",objectives:[{id:"choose_faction",description:"Choose between Ashur and the Underground",type:"talk",target:"pitt_faction_choice",current:0,required:1,completed:!1},{id:"complete_faction_mission",description:"Complete your chosen faction's mission",type:"explore",target:"pitt_faction_mission",current:0,required:1,completed:!1},{id:"resolve_pitt_crisis",description:"Resolve the crisis in The Pitt",type:"talk",target:"pitt_resolution",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:600},{type:"gold",value:500},{type:"item",value:1,item:w.find(e=>e.id==="power_armor")}],status:"available",requiredLevel:10},{id:"the_local_flavor",title:"The Local Flavor",description:"Point Lookout harbors dark secrets and ancient conflicts. Navigate the war between Desmond Lockheart and Professor Calvert.",objectives:[{id:"reach_point_lookout",description:"Travel to Point Lookout",type:"explore",target:"point_lookout_dock",current:0,required:1,completed:!1},{id:"meet_desmond",description:"Meet Desmond Lockheart",type:"talk",target:"desmond",current:0,required:1,completed:!1},{id:"investigate_calvert",description:"Investigate Professor Calvert",type:"explore",target:"calvert_mansion",current:0,required:1,completed:!1},{id:"choose_side",description:"Choose between Desmond and Calvert",type:"talk",target:"lookout_faction_choice",current:0,required:1,completed:!1},{id:"end_ancient_war",description:"End the ancient war",type:"kill",target:"ancient_enemy",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:500},{type:"gold",value:600},{type:"item",value:1,item:w.find(e=>e.id==="plasma_rifle")}],status:"available",requiredLevel:12},{id:"not_of_this_world",title:"Not of This World",description:"You've been abducted by aliens and taken aboard their mothership. Escape and prevent an invasion of Earth.",objectives:[{id:"escape_holding_cell",description:"Escape from the alien holding cell",type:"explore",target:"alien_cell_escape",current:0,required:1,completed:!1},{id:"free_prisoners",description:"Free the other human prisoners",type:"talk",target:"human_prisoner",current:0,required:4,completed:!1},{id:"reach_armory",description:"Reach the alien armory",type:"explore",target:"alien_armory",current:0,required:1,completed:!1},{id:"take_bridge",description:"Capture the ship's bridge",type:"kill",target:"alien_captain",current:0,required:1,completed:!1},{id:"destroy_mothership",description:"Destroy the alien mothership",type:"explore",target:"ship_destruction",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:800},{type:"item",value:1,item:w.find(e=>e.id==="alien_blaster")},{type:"item",value:1,item:w.find(e=>e.id==="power_armor")}],status:"available",requiredLevel:15},{id:"death_from_above",title:"Death From Above",description:"The Enclave has mobile base crawler threatening the Capital Wasteland. Work with the Brotherhood to destroy this massive war machine.",objectives:[{id:"locate_crawler",description:"Locate the Enclave mobile base crawler",type:"explore",target:"enclave_crawler",current:0,required:1,completed:!1},{id:"infiltrate_crawler",description:"Infiltrate the mobile base",type:"explore",target:"crawler_infiltration",current:0,required:1,completed:!1},{id:"sabotage_crawler",description:"Sabotage the crawler's systems",type:"explore",target:"crawler_sabotage",current:0,required:3,completed:!1},{id:"escape_crawler",description:"Escape before the crawler is destroyed",type:"explore",target:"crawler_escape",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:750},{type:"gold",value:800},{type:"item",value:1,item:w.find(e=>e.id==="power_armor")}],status:"available",requiredLevel:20}],Jd=[...Vm,...Qm,...Um],yt=[{id:"trader_joe",name:"Trader Joe",type:"trader",mapId:"capital_wasteland",position:{x:15*32+16,y:20*32+16},sprite:"trader",dialogue:[{id:"greeting",text:"Welcome, survivor! I have goods to trade. What can I do for you?",choices:[{id:"trade",text:"Show me your wares",action:"open_trade"},{id:"info",text:"Tell me about this place",nextNode:"info"},{id:"leave",text:"Maybe later",nextNode:"goodbye"}]},{id:"info",text:"This wasteland is dangerous, but there are opportunities for those brave enough. I travel between settlements, trading supplies.",choices:[{id:"trade",text:"Show me your wares",action:"open_trade"},{id:"leave",text:"Thanks for the info",nextNode:"goodbye"}]},{id:"goodbye",text:"Safe travels, friend. Watch out for raiders!",choices:[]}],inventory:[w.find(e=>e.id==="stimpak"),w.find(e=>e.id==="combat_knife"),w.find(e=>e.id==="combat_armor"),w.find(e=>e.id==="scrap_metal")],faction:"neutral",isHostile:!1},{id:"quest_giver",name:"Captain Sarah",type:"quest_giver",mapId:"capital_wasteland",position:{x:30*32+16,y:40*32+16},sprite:"captain",dialogue:[{id:"greeting",text:"Survivor! Our settlement is under constant threat from raiders. We need someone skilled to help us.",choices:[{id:"accept",text:"I'll help you deal with the raiders",action:"give_quest"},{id:"info",text:"Tell me more about these raiders",nextNode:"raider_info"},{id:"decline",text:"I'm not ready for that",nextNode:"disappointed"}]},{id:"raider_info",text:"They've set up camp to the north. Heavily armed and dangerous. They've been attacking our supply convoys.",choices:[{id:"accept",text:"I'll take care of them",action:"give_quest"},{id:"decline",text:"Sounds too dangerous",nextNode:"disappointed"}]},{id:"disappointed",text:"I understand. The wasteland is dangerous. Come back when you're ready.",choices:[]},{id:"quest_given",text:"Thank you! Clear out that raider camp and we'll reward you well.",choices:[]}],quests:[{id:"raider_threat",title:"Clear the Raider Camp",description:"Eliminate the raider threat near the settlement",objectives:[{id:"kill_raiders",description:"Eliminate the raider threat (Kill 5 raiders)",type:"kill",target:"raider",current:0,required:5,completed:!1}],rewards:[{type:"experience",value:200},{type:"gold",value:100},{type:"item",value:1,item:w.find(e=>e.id==="combat_armor")}],status:"available",requiredLevel:1}],faction:"settlement",isHostile:!1},{id:"wanderer",name:"Old Pete",type:"neutral",mapId:"capital_wasteland",position:{x:10*32+16,y:60*32+16},sprite:"wanderer",dialogue:[{id:"greeting",text:"Been wandering these wastes for decades, I have. Seen things that would make your hair white.",choices:[{id:"stories",text:"Tell me about what you've seen",nextNode:"stories"},{id:"advice",text:"Any advice for a fellow wanderer?",nextNode:"advice"},{id:"leave",text:"Take care, old timer",nextNode:"goodbye"}]},{id:"stories",text:"Raiders, mutants, machines that still work from before the bombs... This land is full of dangers and wonders.",choices:[{id:"advice",text:"Any survival tips?",nextNode:"advice"},{id:"leave",text:"Thanks for sharing",nextNode:"goodbye"}]},{id:"advice",text:"Always carry water, never trust a raider, and remember - in the wasteland, your reputation matters more than caps.",choices:[{id:"leave",text:"Wise words, thanks",nextNode:"goodbye"}]},{id:"goodbye",text:"May the road rise up to meet you, wanderer.",choices:[]}],faction:"neutral",isHostile:!1},{id:"doctor_smith",name:"Dr. Smith",type:"trader",mapId:"eastern_districts",position:{x:70*32+16,y:30*32+16},sprite:"doctor",dialogue:[{id:"greeting",text:"Welcome to my clinic! I have medical supplies and can treat your wounds.",choices:[{id:"trade",text:"Show me your medical supplies",action:"open_trade"},{id:"heal",text:"I need healing",action:"heal_player"},{id:"quest",text:"Do you need any help?",nextNode:"quest_offer"},{id:"leave",text:"Maybe later",nextNode:"goodbye"}]},{id:"quest_offer",text:"Actually, yes! I'm running low on medical supplies. If you could bring me some Stimpaks, I'd be very grateful.",choices:[{id:"accept_quest",text:"I'll help you gather supplies",action:"give_quest"},{id:"trade",text:"Let me see what you have first",action:"open_trade"},{id:"leave",text:"I'll think about it",nextNode:"goodbye"}]},{id:"goodbye",text:"Stay safe out there. The wasteland is dangerous.",choices:[]}],inventory:[{...w.find(e=>e.id==="stimpak"),quantity:3},{...w.find(e=>e.id==="rad_away"),quantity:2},w.find(e=>e.id==="mentats")],quests:[{id:"medical_supplies",title:"Medical Emergency",description:"Dr. Smith needs medical supplies for his clinic.",objectives:[{id:"collect_stimpaks",description:"Collect 5 Stimpaks",type:"collect",target:"stimpak",current:0,required:5,completed:!1},{id:"deliver_supplies",description:"Deliver the supplies to Dr. Smith",type:"talk",target:"doctor_smith",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:150},{type:"gold",value:75},{type:"item",value:1,item:w.find(e=>e.id==="rad_away")}],status:"available",requiredLevel:1}],faction:"medical",isHostile:!1},{id:"mechanic_bob",name:"Mechanic Bob",type:"trader",mapId:"northern_wasteland",position:{x:50*32+16,y:80*32+16},sprite:"mechanic",dialogue:[{id:"greeting",text:"Need some gear fixed or looking for quality weapons? You came to the right place!",choices:[{id:"trade",text:"Show me your wares",action:"open_trade"},{id:"repair",text:"Can you repair my equipment?",nextNode:"repair_info"},{id:"quest",text:"Got any work for me?",nextNode:"quest_offer"},{id:"leave",text:"Just browsing",nextNode:"goodbye"}]},{id:"repair_info",text:"I can fix most things, but it'll cost you. Bring me scrap metal and I'll make your gear good as new.",choices:[{id:"trade",text:"Let's see what you have",action:"open_trade"},{id:"leave",text:"I'll think about it",nextNode:"goodbye"}]},{id:"quest_offer",text:"I need someone to collect scrap and electronics for my projects. The wasteland is full of useful junk if you know where to look.",choices:[{id:"accept_quest",text:"I'll gather materials for you",action:"give_quest"},{id:"trade",text:"What can you offer in return?",action:"open_trade"},{id:"leave",text:"Not interested",nextNode:"goodbye"}]},{id:"goodbye",text:"Come back when you need quality work done!",choices:[]}],inventory:[w.find(e=>e.id==="assault_rifle"),w.find(e=>e.id==="combat_armor"),{...w.find(e=>e.id==="scrap_metal"),quantity:10},{...w.find(e=>e.id==="electronics"),quantity:3}],quests:[{id:"scavenger_hunt",title:"Scavenger's Dream",description:"Collect valuable scrap materials for the settlement.",objectives:[{id:"collect_scrap",description:"Collect 10 Scrap Metal",type:"collect",target:"scrap_metal",current:0,required:10,completed:!1},{id:"collect_electronics",description:"Collect 3 Electronics",type:"collect",target:"electronics",current:0,required:3,completed:!1}],rewards:[{type:"experience",value:180},{type:"gold",value:120},{type:"item",value:1,item:w.find(e=>e.id==="assault_rifle")}],status:"available",requiredLevel:3}],faction:"mechanics",isHostile:!1},{id:"vault_overseer",name:"Overseer Martinez",type:"quest_giver",mapId:"capital_wasteland",position:{x:85*32+16,y:15*32+16},sprite:"overseer",dialogue:[{id:"greeting",text:"Welcome to Vault 101. We've been monitoring the surface conditions. The situation is... concerning.",choices:[{id:"situation",text:"What kind of situation?",nextNode:"vault_mission"},{id:"vault_info",text:"Tell me about this vault",nextNode:"vault_info"},{id:"leave",text:"I should go",nextNode:"goodbye"}]},{id:"vault_mission",text:"Our water purification system is failing. We need someone to venture into the old tech facility and retrieve a replacement water chip.",choices:[{id:"accept_mission",text:"I'll find your water chip",action:"give_quest"},{id:"vault_info",text:"First, tell me about this place",nextNode:"vault_info"},{id:"decline",text:"That sounds dangerous",nextNode:"disappointed"}]},{id:"vault_info",text:"Vault 101 was designed to house 1000 people indefinitely. We've maintained our technology, but some systems are beginning to fail after all these years.",choices:[{id:"accept_mission",text:"I'll help with the water chip",action:"give_quest"},{id:"leave",text:"Interesting. I'll consider it",nextNode:"goodbye"}]},{id:"disappointed",text:"I understand your hesitation. The facility is heavily guarded by automated defenses. But without that chip, our people will die.",choices:[{id:"accept_mission",text:"Alright, I'll do it",action:"give_quest"},{id:"leave",text:"I need time to think",nextNode:"goodbye"}]},{id:"goodbye",text:"The vault's doors are always open to you, surface dweller.",choices:[]}],quests:[{id:"water_chip_quest",title:"The Water Chip",description:"Retrieve a water chip from the old tech facility to save Vault 101.",objectives:[{id:"find_facility",description:"Locate the old tech facility",type:"explore",target:"tech_facility",current:0,required:1,completed:!1},{id:"defeat_security",description:"Disable the facility's security robots",type:"kill",target:"robot",current:0,required:3,completed:!1},{id:"retrieve_chip",description:"Find and retrieve the water chip",type:"collect",target:"water_chip",current:0,required:1,completed:!1}],rewards:[{type:"experience",value:300},{type:"gold",value:200},{type:"item",value:1,item:w.find(e=>e.id==="power_armor")}],status:"available",requiredLevel:5}],faction:"vault",isHostile:!1}],ks={warrior:{name:"Warrior",description:"A tough melee fighter with high health and strength",baseStats:{strength:15,agility:8,intelligence:6,endurance:14,luck:7,perception:8,charisma:6},startingSkills:["slash","power_strike","defensive_stance"],sprite:"warrior"},ranger:{name:"Ranger",description:"A skilled marksman with high agility and perception",baseStats:{strength:10,agility:15,intelligence:10,endurance:10,luck:10,perception:14,charisma:8},startingSkills:["aimed_shot","quick_shot","explosive_shot"],sprite:"ranger"},medic:{name:"Medic",description:"A healer with knowledge of medicine and technology",baseStats:{strength:7,agility:9,intelligence:15,endurance:11,luck:8,perception:10,charisma:12},startingSkills:["heal","poison_dart","adrenaline_shot"],sprite:"medic"},engineer:{name:"Engineer",description:"A tech specialist who can craft and repair equipment",baseStats:{strength:9,agility:11,intelligence:14,endurance:9,luck:12,perception:11,charisma:7},startingSkills:["emp_blast","turret_deploy","shock_trap"],sprite:"engineer"}},Ro=[{id:"vault_dweller",name:"Vault Dweller",description:"Raised in the safety of an underground vault",bonuses:{intelligence:2,endurance:1},penalties:{charisma:-1},startingItems:["pip_boy","vault_suit"]},{id:"wasteland_wanderer",name:"Wasteland Wanderer",description:"Born and raised in the harsh wasteland",bonuses:{endurance:2,perception:1},penalties:{intelligence:-1},startingItems:["leather_jacket","water_bottle"]},{id:"tribal",name:"Tribal",description:"Member of a primitive post-war tribe",bonuses:{strength:2,agility:1},penalties:{intelligence:-1},startingItems:["tribal_spear","healing_powder"]},{id:"raider",name:"Ex-Raider",description:"Former member of a raider gang seeking redemption",bonuses:{strength:1,agility:1,luck:1},penalties:{charisma:-2},startingItems:["sawed_off_shotgun","leather_armor"]}],qo=[{id:"fast_metabolism",name:"Fast Metabolism",description:"Your body processes food and chems quickly",bonus:"Healing items are 50% more effective",penalty:"Radiation damage is 25% higher"},{id:"heavy_handed",name:"Heavy Handed",description:"You swing weapons with great force",bonus:"+4 melee damage",penalty:"-30% critical hit chance"},{id:"small_frame",name:"Small Frame",description:"You are not quite as big as other people",bonus:"+1 Agility",penalty:"Limbs are easier to cripple"},{id:"one_hander",name:"One Hander",description:"You excel with one-handed weapons",bonus:"+20% accuracy with one-handed weapons",penalty:"-40% accuracy with two-handed weapons"}];w.find(e=>e.id==="rusty_pipe"),w.find(e=>e.id==="scrap_metal"),I.find(e=>e.id==="slash"),w.find(e=>e.id==="rad_away"),w.find(e=>e.id==="scrap_metal"),I.find(e=>e.id==="slash"),I.find(e=>e.id==="poison_dart"),w.find(e=>e.id==="electronics"),w.find(e=>e.id==="scrap_metal"),I.find(e=>e.id==="aimed_shot"),I.find(e=>e.id==="emp_blast"),w.find(e=>e.id==="combat_armor"),w.find(e=>e.id==="assault_rifle"),w.find(e=>e.id==="scrap_metal"),I.find(e=>e.id==="power_strike"),I.find(e=>e.id==="aimed_shot");const Gm=(e,t)=>{const n=ks[t],r=n.startingSkills.map(s=>I.find(l=>l.id===s)).filter(Boolean),a={id:"player",name:e,background:"vault_dweller",age:25,gender:"male",class:t,level:1,experience:0,experienceToNext:100,health:100,maxHealth:100,energy:50,maxEnergy:50,radiation:0,maxRadiation:1e3,stats:{...n.baseStats},derivedStats:{carryWeight:n.baseStats.strength*10,actionPoints:Math.floor(n.baseStats.agility/2),criticalChance:n.baseStats.luck,damageResistance:0,radiationResistance:n.baseStats.endurance*2},skills:r,perks:[],equipment:{weapon:w.find(s=>s.id==="rusty_pipe"),armor:w.find(s=>s.id==="leather_jacket")},isInParty:!0,position:{x:50*32,y:50*32},direction:"down",isMoving:!1,sprite:n.sprite,statusEffects:[],biography:"",traits:[]};return a.equipmentBonuses={damage:0,defense:0,strength:0,agility:0,intelligence:0,endurance:0,luck:0,criticalChance:0},a},Ym=[{id:"first_kill",name:"First Blood",description:"Kill your first enemy",icon:"skull",unlocked:!1,progress:0,maxProgress:1},{id:"level_up",name:"Growing Stronger",description:"Reach level 5",icon:"star",unlocked:!1,progress:0,maxProgress:5},{id:"explorer",name:"Explorer",description:"Discover 100 tiles",icon:"map",unlocked:!1,progress:0,maxProgress:100},{id:"collector",name:"Collector",description:"Find 50 items",icon:"package",unlocked:!1,progress:0,maxProgress:50},{id:"survivor",name:"Survivor",description:"Survive for 1 hour",icon:"clock",unlocked:!1,progress:0,maxProgress:3600},{id:"quest_master",name:"Quest Master",description:"Complete 10 quests",icon:"scroll",unlocked:!1,progress:0,maxProgress:10},{id:"raider_slayer",name:"Raider Slayer",description:"Kill 25 raiders",icon:"sword",unlocked:!1,progress:0,maxProgress:25}];[...Jd.filter(e=>e.status==="active")];const gt=[{id:"raider_scavenger_1",name:"Raider Scavenger",type:"raider",level:2,health:45,maxHealth:45,energy:12,maxEnergy:12,defense:3,damage:14,experience:20,loot:[{item:w.find(e=>e.id==="rusty_pipe"),chance:.15,quantity:1},{item:w.find(e=>e.id==="scrap_metal"),chance:.4,quantity:1},{item:w.find(e=>e.id==="rusty_can"),chance:.6,quantity:1},{item:w.find(e=>e.id==="stimpak"),chance:.05,quantity:1}],position:{x:1500,y:1500},direction:"down",isMoving:!1,sprite:"raider_scavenger",ai:{type:"aggressive",range:6,speed:72},statusEffects:[],skills:[I.find(e=>e.id==="slash")]},{id:"raider_scavenger_2",name:"Raider Scavenger",type:"raider",level:2,health:45,maxHealth:45,energy:12,maxEnergy:12,defense:3,damage:14,experience:20,loot:[{item:w.find(e=>e.id==="rusty_pipe"),chance:.15,quantity:1},{item:w.find(e=>e.id==="scrap_metal"),chance:.4,quantity:1},{item:w.find(e=>e.id==="rusty_can"),chance:.6,quantity:1},{item:w.find(e=>e.id==="stimpak"),chance:.05,quantity:1}],position:{x:1600,y:1550},direction:"down",isMoving:!1,sprite:"raider_scavenger",ai:{type:"aggressive",range:6,speed:72},statusEffects:[],skills:[I.find(e=>e.id==="slash")]},{id:"raider_scavenger",name:"Raider Scavenger",type:"raider",level:2,health:45,maxHealth:45,energy:12,maxEnergy:12,defense:3,damage:14,experience:20,loot:[{item:w.find(e=>e.id==="rusty_pipe"),chance:.15,quantity:1},{item:w.find(e=>e.id==="scrap_metal"),chance:.4,quantity:1},{item:w.find(e=>e.id==="rusty_can"),chance:.6,quantity:1},{item:w.find(e=>e.id==="stimpak"),chance:.05,quantity:1}],position:{x:1200,y:1200},direction:"down",isMoving:!1,sprite:"raider_scavenger",ai:{type:"aggressive",range:6,speed:72},statusEffects:[],skills:[I.find(e=>e.id==="slash")]},{id:"super_mutant_brute",name:"Super Mutant Brute",type:"mutant",level:8,health:150,maxHealth:150,energy:20,maxEnergy:20,defense:12,damage:35,experience:80,loot:[{item:w.find(e=>e.id==="assault_rifle"),chance:.08,quantity:1},{item:w.find(e=>e.id==="scrap_metal"),chance:.6,quantity:2},{item:w.find(e=>e.id==="electronics"),chance:.3,quantity:1},{item:w.find(e=>e.id==="rad_away"),chance:.15,quantity:1}],position:{x:2e3,y:2e3},direction:"down",isMoving:!1,sprite:"super_mutant_brute",ai:{type:"aggressive",range:8,speed:48},statusEffects:[],skills:[I.find(e=>e.id==="power_strike"),I.find(e=>e.id==="aimed_shot")]},{id:"enclave_soldier",name:"Enclave Soldier",type:"robot",level:12,health:200,maxHealth:200,energy:35,maxEnergy:35,defense:18,damage:45,experience:120,loot:[{item:w.find(e=>e.id==="plasma_rifle"),chance:.12,quantity:1},{item:w.find(e=>e.id==="power_armor"),chance:.03,quantity:1},{item:w.find(e=>e.id==="electronics"),chance:.5,quantity:2},{item:w.find(e=>e.id==="scrap_metal"),chance:.8,quantity:3}],position:{x:2500,y:1800},direction:"down",isMoving:!1,sprite:"enclave_soldier",ai:{type:"aggressive",range:10,speed:64},statusEffects:[],skills:[I.find(e=>e.id==="aimed_shot"),I.find(e=>e.id==="explosive_shot")]},{id:"feral_ghoul",name:"Feral Ghoul",type:"mutant",level:4,health:60,maxHealth:60,energy:15,maxEnergy:15,defense:2,damage:20,experience:35,loot:[{item:w.find(e=>e.id==="scrap_metal"),chance:.3,quantity:1},{item:w.find(e=>e.id==="dirty_water"),chance:.4,quantity:1},{item:w.find(e=>e.id==="moldy_food"),chance:.3,quantity:1},{item:w.find(e=>e.id==="rad_away"),chance:.1,quantity:1}],position:{x:1800,y:1400},direction:"down",isMoving:!1,sprite:"feral_ghoul",ai:{type:"aggressive",range:5,speed:80},statusEffects:[],skills:[I.find(e=>e.id==="slash"),I.find(e=>e.id==="poison_dart")]},{id:"deathclaw",name:"Deathclaw",type:"beast",level:15,health:300,maxHealth:300,energy:40,maxEnergy:40,defense:15,damage:60,experience:200,loot:[{item:w.find(e=>e.id==="rare_earth"),chance:.25,quantity:1},{item:w.find(e=>e.id==="scrap_metal"),chance:.7,quantity:4},{item:w.find(e=>e.id==="electronics"),chance:.4,quantity:2}],position:{x:3e3,y:3e3},direction:"down",isMoving:!1,sprite:"deathclaw",ai:{type:"aggressive",range:12,speed:96},statusEffects:[],skills:[I.find(e=>e.id==="power_strike"),I.find(e=>e.id==="slash")]},{id:"trog",name:"Trog",type:"mutant",mapId:"northern_wasteland",level:6,health:80,maxHealth:80,energy:18,maxEnergy:18,defense:5,damage:25,experience:45,loot:[{item:w.find(e=>e.id==="scrap_metal"),chance:.8,quantity:3},{item:w.find(e=>e.id==="electronics"),chance:.3,quantity:1}],position:{x:500,y:500},direction:"down",isMoving:!1,sprite:"trog",ai:{type:"aggressive",range:6,speed:88},statusEffects:[],skills:[I.find(e=>e.id==="slash"),I.find(e=>e.id==="poison_dart")]},{id:"pitt_raider",name:"Pitt Raider",type:"raider",mapId:"northern_wasteland",level:7,health:90,maxHealth:90,energy:20,maxEnergy:20,defense:8,damage:28,experience:55,loot:[{item:w.find(e=>e.id==="combat_armor"),chance:.4,quantity:1},{item:w.find(e=>e.id==="assault_rifle"),chance:.3,quantity:1},{item:w.find(e=>e.id==="scrap_metal"),chance:.9,quantity:4}],position:{x:600,y:600},direction:"down",isMoving:!1,sprite:"pitt_raider",ai:{type:"aggressive",range:7,speed:64},statusEffects:[],skills:[I.find(e=>e.id==="aimed_shot"),I.find(e=>e.id==="power_strike")]},{id:"wildman",name:"Wildman",type:"mutant",mapId:"northern_wasteland",level:9,health:120,maxHealth:120,energy:25,maxEnergy:25,defense:6,damage:32,experience:70,loot:[{item:w.find(e=>e.id==="scrap_metal"),chance:.7,quantity:3},{item:w.find(e=>e.id==="stimpak"),chance:.5,quantity:2}],position:{x:700,y:700},direction:"down",isMoving:!1,sprite:"wildman",ai:{type:"aggressive",range:8,speed:76},statusEffects:[],skills:[I.find(e=>e.id==="slash"),I.find(e=>e.id==="adrenaline_shot")]},{id:"swampfolk",name:"Swampfolk",type:"mutant",mapId:"southern_ruins",level:10,health:140,maxHealth:140,energy:28,maxEnergy:28,defense:10,damage:38,experience:85,loot:[{item:w.find(e=>e.id==="combat_knife"),chance:.6,quantity:1},{item:w.find(e=>e.id==="stimpak"),chance:.4,quantity:2},{item:w.find(e=>e.id==="scrap_metal"),chance:.5,quantity:2}],position:{x:800,y:800},direction:"down",isMoving:!1,sprite:"swampfolk",ai:{type:"aggressive",range:9,speed:56},statusEffects:[],skills:[I.find(e=>e.id==="poison_dart"),I.find(e=>e.id==="slash")]},{id:"mirelurk",name:"Mirelurk",type:"beast",mapId:"southern_ruins",level:8,health:110,maxHealth:110,energy:22,maxEnergy:22,defense:15,damage:30,experience:60,loot:[{item:w.find(e=>e.id==="scrap_metal"),chance:.8,quantity:4},{item:w.find(e=>e.id==="rad_away"),chance:.3,quantity:1}],position:{x:900,y:900},direction:"down",isMoving:!1,sprite:"mirelurk",ai:{type:"defensive",range:6,speed:40},statusEffects:[],skills:[I.find(e=>e.id==="defensive_stance"),I.find(e=>e.id==="slash")]},{id:"tribal_warrior",name:"Tribal Warrior",type:"raider",mapId:"southern_ruins",level:11,health:130,maxHealth:130,energy:30,maxEnergy:30,defense:8,damage:35,experience:90,loot:[{item:w.find(e=>e.id==="combat_knife"),chance:.7,quantity:1},{item:w.find(e=>e.id==="stimpak"),chance:.6,quantity:2},{item:w.find(e=>e.id==="rare_earth"),chance:.2,quantity:1}],position:{x:1e3,y:1e3},direction:"down",isMoving:!1,sprite:"tribal_warrior",ai:{type:"aggressive",range:8,speed:72},statusEffects:[],skills:[I.find(e=>e.id==="aimed_shot"),I.find(e=>e.id==="poison_dart")]},{id:"alien_worker",name:"Alien Worker",type:"robot",mapId:"eastern_districts",level:12,health:100,maxHealth:100,energy:40,maxEnergy:40,defense:12,damage:40,experience:100,loot:[{item:w.find(e=>e.id==="electronics"),chance:.9,quantity:5},{item:w.find(e=>e.id==="rare_earth"),chance:.6,quantity:2}],position:{x:1100,y:1100},direction:"down",isMoving:!1,sprite:"alien_worker",ai:{type:"defensive",range:8,speed:60},statusEffects:[],skills:[I.find(e=>e.id==="emp_blast"),I.find(e=>e.id==="shock_trap")]},{id:"alien_soldier",name:"Alien Soldier",type:"robot",mapId:"eastern_districts",level:15,health:180,maxHealth:180,energy:50,maxEnergy:50,defense:20,damage:55,experience:150,loot:[{item:w.find(e=>e.id==="plasma_rifle"),chance:.8,quantity:1},{item:w.find(e=>e.id==="electronics"),chance:1,quantity:8},{item:w.find(e=>e.id==="rare_earth"),chance:.7,quantity:3}],position:{x:1300,y:1300},direction:"down",isMoving:!1,sprite:"alien_soldier",ai:{type:"aggressive",range:12,speed:80},statusEffects:[],skills:[I.find(e=>e.id==="explosive_shot"),I.find(e=>e.id==="emp_blast")]},{id:"alien_captain",name:"Alien Captain",type:"boss",mapId:"eastern_districts",level:20,health:400,maxHealth:400,energy:80,maxEnergy:80,defense:25,damage:70,experience:300,loot:[{item:w.find(e=>e.id==="power_armor"),chance:1,quantity:1},{item:w.find(e=>e.id==="plasma_rifle"),chance:1,quantity:1},{item:w.find(e=>e.id==="rare_earth"),chance:1,quantity:10}],position:{x:1400,y:1400},direction:"down",isMoving:!1,sprite:"alien_captain",ai:{type:"aggressive",range:15,speed:64},statusEffects:[],skills:[I.find(e=>e.id==="explosive_shot"),I.find(e=>e.id==="turret_deploy"),I.find(e=>e.id==="emp_blast")]},{id:"brotherhood_outcast",name:"Brotherhood Outcast",type:"robot",mapId:"western_outskirts",level:10,health:160,maxHealth:160,energy:35,maxEnergy:35,defense:16,damage:42,experience:95,loot:[{item:w.find(e=>e.id==="combat_armor"),chance:.8,quantity:1},{item:w.find(e=>e.id==="assault_rifle"),chance:.6,quantity:1},{item:w.find(e=>e.id==="electronics"),chance:.7,quantity:3}],position:{x:1700,y:1700},direction:"down",isMoving:!1,sprite:"brotherhood_outcast",ai:{type:"aggressive",range:10,speed:56},statusEffects:[],skills:[I.find(e=>e.id==="aimed_shot"),I.find(e=>e.id==="defensive_stance")]},{id:"super_mutant_master",name:"Super Mutant Master",type:"boss",mapId:"western_outskirts",level:18,health:500,maxHealth:500,energy:60,maxEnergy:60,defense:20,damage:80,experience:400,loot:[{item:w.find(e=>e.id==="power_armor"),chance:.8,quantity:1},{item:w.find(e=>e.id==="plasma_rifle"),chance:1,quantity:1},{item:w.find(e=>e.id==="rare_earth"),chance:1,quantity:8}],position:{x:1900,y:1900},direction:"down",isMoving:!1,sprite:"super_mutant_master",ai:{type:"aggressive",range:12,speed:48},statusEffects:[],skills:[I.find(e=>e.id==="power_strike"),I.find(e=>e.id==="explosive_shot"),I.find(e=>e.id==="adrenaline_shot")]},{id:"tunnel_rat",name:"Giant Tunnel Rat",type:"beast",mapId:"metro_tunnels",level:3,health:40,maxHealth:40,energy:15,maxEnergy:15,defense:2,damage:18,experience:25,loot:[{item:w.find(e=>e.id==="scrap_metal"),chance:.4,quantity:1},{item:w.find(e=>e.id==="stimpak"),chance:.2,quantity:1}],position:{x:2100,y:2100},direction:"down",isMoving:!1,sprite:"tunnel_rat",ai:{type:"aggressive",range:4,speed:96},statusEffects:[],skills:[I.find(e=>e.id==="quick_shot")]},{id:"metro_ghoul",name:"Metro Ghoul",type:"mutant",mapId:"metro_tunnels",level:5,health:70,maxHealth:70,energy:18,maxEnergy:18,defense:4,damage:22,experience:40,loot:[{item:w.find(e=>e.id==="rad_away"),chance:.7,quantity:1},{item:w.find(e=>e.id==="scrap_metal"),chance:.6,quantity:2}],position:{x:2200,y:2200},direction:"down",isMoving:!1,sprite:"metro_ghoul",ai:{type:"aggressive",range:6,speed:72},statusEffects:[],skills:[I.find(e=>e.id==="slash"),I.find(e=>e.id==="poison_dart")]},{id:"metro_security_robot",name:"Metro Security Robot",type:"robot",mapId:"metro_tunnels",level:7,health:120,maxHealth:120,energy:30,maxEnergy:30,defense:14,damage:30,experience:65,loot:[{item:w.find(e=>e.id==="electronics"),chance:.9,quantity:4},{item:w.find(e=>e.id==="scrap_metal"),chance:1,quantity:6}],position:{x:2300,y:2300},direction:"down",isMoving:!1,sprite:"metro_security_robot",ai:{type:"patrol",range:8,speed:48},statusEffects:[],skills:[I.find(e=>e.id==="aimed_shot"),I.find(e=>e.id==="emp_blast")]},{id:"raider_veteran_1",name:"Raider Veteran",type:"raider",level:5,health:85,maxHealth:85,energy:20,maxEnergy:20,defense:8,damage:25,experience:50,loot:[{item:w.find(e=>e.id==="assault_rifle"),chance:.15,quantity:1},{item:w.find(e=>e.id==="combat_armor"),chance:.1,quantity:1},{item:w.find(e=>e.id==="scrap_metal"),chance:.7,quantity:3},{item:w.find(e=>e.id==="stimpak"),chance:.2,quantity:1}],position:{x:1650,y:1650},direction:"down",isMoving:!1,sprite:"raider_veteran",ai:{type:"aggressive",range:8,speed:56},statusEffects:[],skills:[I.find(e=>e.id==="power_strike"),I.find(e=>e.id==="aimed_shot")]},{id:"raider_veteran_2",name:"Raider Veteran",type:"raider",level:5,health:85,maxHealth:85,energy:20,maxEnergy:20,defense:8,damage:25,experience:50,loot:[{item:w.find(e=>e.id==="assault_rifle"),chance:.15,quantity:1},{item:w.find(e=>e.id==="combat_armor"),chance:.1,quantity:1},{item:w.find(e=>e.id==="scrap_metal"),chance:.7,quantity:3},{item:w.find(e=>e.id==="stimpak"),chance:.2,quantity:1}],position:{x:1750,y:1750},direction:"down",isMoving:!1,sprite:"raider_veteran",ai:{type:"aggressive",range:8,speed:56},statusEffects:[],skills:[I.find(e=>e.id==="power_strike"),I.find(e=>e.id==="aimed_shot")]},{id:"feral_ghoul_2",name:"Feral Ghoul",type:"mutant",level:4,health:60,maxHealth:60,energy:15,maxEnergy:15,defense:2,damage:20,experience:35,loot:[{item:w.find(e=>e.id==="scrap_metal"),chance:.3,quantity:1},{item:w.find(e=>e.id==="dirty_water"),chance:.4,quantity:1},{item:w.find(e=>e.id==="moldy_food"),chance:.3,quantity:1},{item:w.find(e=>e.id==="rad_away"),chance:.1,quantity:1}],position:{x:1850,y:1450},direction:"down",isMoving:!1,sprite:"feral_ghoul",ai:{type:"aggressive",range:5,speed:80},statusEffects:[],skills:[I.find(e=>e.id==="slash"),I.find(e=>e.id==="poison_dart")]},{id:"feral_ghoul_3",name:"Feral Ghoul",type:"mutant",level:4,health:60,maxHealth:60,energy:15,maxEnergy:15,defense:2,damage:20,experience:35,loot:[{item:w.find(e=>e.id==="scrap_metal"),chance:.3,quantity:1},{item:w.find(e=>e.id==="dirty_water"),chance:.4,quantity:1},{item:w.find(e=>e.id==="moldy_food"),chance:.3,quantity:1},{item:w.find(e=>e.id==="rad_away"),chance:.1,quantity:1}],position:{x:1900,y:1500},direction:"down",isMoving:!1,sprite:"feral_ghoul",ai:{type:"aggressive",range:5,speed:80},statusEffects:[],skills:[I.find(e=>e.id==="slash"),I.find(e=>e.id==="poison_dart")]},{id:"mole_rat_1",name:"Mole Rat",type:"beast",level:2,health:35,maxHealth:35,energy:12,maxEnergy:12,defense:1,damage:12,experience:15,loot:[{item:w.find(e=>e.id==="moldy_food"),chance:.4,quantity:1},{item:w.find(e=>e.id==="scrap_metal"),chance:.2,quantity:1}],position:{x:1300,y:1300},direction:"down",isMoving:!1,sprite:"mole_rat",ai:{type:"aggressive",range:3,speed:80},statusEffects:[],skills:[I.find(e=>e.id==="slash")]},{id:"mole_rat_2",name:"Mole Rat",type:"beast",level:2,health:35,maxHealth:35,energy:12,maxEnergy:12,defense:1,damage:12,experience:15,loot:[{item:w.find(e=>e.id==="moldy_food"),chance:.4,quantity:1},{item:w.find(e=>e.id==="scrap_metal"),chance:.2,quantity:1}],position:{x:1350,y:1350},direction:"down",isMoving:!1,sprite:"mole_rat",ai:{type:"aggressive",range:3,speed:80},statusEffects:[],skills:[I.find(e=>e.id==="slash")]},{id:"mole_rat_3",name:"Mole Rat",type:"beast",level:2,health:35,maxHealth:35,energy:12,maxEnergy:12,defense:1,damage:12,experience:15,loot:[{item:w.find(e=>e.id==="moldy_food"),chance:.4,quantity:1},{item:w.find(e=>e.id==="scrap_metal"),chance:.2,quantity:1}],position:{x:1400,y:1400},direction:"down",isMoving:!1,sprite:"mole_rat",ai:{type:"aggressive",range:3,speed:80},statusEffects:[],skills:[I.find(e=>e.id==="slash")]}],B=(e,t,n,r=!0)=>({x:e,y:t,type:n,walkable:r,sprite:n,discovered:!1,visible:!1,description:`${n} terrain`}),xt=(e,t,n,r,a,s,l,c)=>{for(let o=0;o<a;o++)for(let d=0;d<r;d++){const m=t+d,y=n+o;m<e[0].length&&y<e.length&&(e[y][m]={...e[y][m],type:"building",walkable:!1,buildingType:s,buildingName:l,buildingId:c,isEnterable:!!c,description:`${l} - ${s}`},d===Math.floor(r/2)&&o===a-1&&(e[y][m].walkable=!0,e[y][m].isEntrance=!0))}},mt=(e,t,n,r,a,s="dirt")=>{const l=e[0].length,c=e.length;let o=t,d=n;for(;o!==r;)o>=0&&o<l&&d>=0&&d<c&&e[d][o].type!=="building"&&e[d][o].type!=="water"&&(e[d][o]=B(o,d,s,!0)),o+=o<r?1:-1;for(;d!==a;)o>=0&&o<l&&d>=0&&d<c&&e[d][o].type!=="building"&&e[d][o].type!=="water"&&(e[d][o]=B(o,d,s,!0)),d+=d<a?1:-1},ce=(e,t,n,r="stone")=>{const a=e[0].length,s=e.length;if(t==="horizontal"&&n>=0&&n<s)for(let l=0;l<a;l++)e[n][l].type!=="building"&&e[n][l].type!=="water"&&(e[n][l]=B(l,n,r,!0));else if(t==="vertical"&&n>=0&&n<a)for(let l=0;l<s;l++)e[l][n].type!=="building"&&e[l][n].type!=="water"&&(e[l][n]=B(n,l,r,!0))},pt=(e,t,n,r,a)=>{const s=e[0].length,l=e.length;for(let c=Math.max(0,n-r);c<=Math.min(l-1,n+r);c++)for(let o=Math.max(0,t-r);o<=Math.min(s-1,t+r);o++)Math.sqrt((o-t)**2+(c-n)**2)<=r&&e[c][o].type!=="building"&&e[c][o].type!=="water"&&(e[c][o]=B(o,c,a,!0))},vt=(e,t,n=.005)=>{const r=[],a=Math.floor(e*t*n);for(let s=0;s<a;s++){const l=Math.floor(Math.random()*e),c=Math.floor(Math.random()*t),o=["container","corpse","cache"],d=o[Math.floor(Math.random()*o.length)],m=Math.random(),y=m<.7?1:m<.95?2:3,u=[];for(let h=0;h<y;h++){const x=Km(),v=Xm(x);u.push({...v,quantity:v.stackable&&Math.random()<.3?2:1})}r.push({id:`loot_${s}`,position:{x:l*32+16,y:c*32+16},items:u,type:d,sprite:d,discovered:!1,looted:!1})}return r},Km=()=>{const e=w.filter(l=>l.rarity==="common"),t=w.filter(l=>l.rarity==="uncommon"),n=w.filter(l=>l.rarity==="rare"),r=w.filter(l=>l.rarity==="epic"),a=w.filter(l=>l.rarity==="legendary"),s=[];for(let l=0;l<70;l++)s.push(...e.filter(c=>c.type==="material"||c.type==="consumable"&&c.value<=20));for(let l=0;l<20;l++)s.push(...e);for(let l=0;l<7;l++)s.push(...t);for(let l=0;l<2;l++)s.push(...n);return Math.random()<.004&&s.push(...r),Math.random()<.001&&s.push(...a),s},Xm=e=>e.length===0?w.find(t=>t.id==="scrap_metal")||w[0]:e[Math.floor(Math.random()*e.length)],Jm=()=>{const n=[];for(let c=0;c<120;c++){const o=[];for(let d=0;d<120;d++){const m=Math.random();m<.7?o.push(B(d,c,"grass",!0)):m<.85?o.push(B(d,c,"dirt",!0)):o.push(B(d,c,"stone",!0))}n.push(o)}[{x:20,y:20,radius:4},{x:90,y:70,radius:3},{x:50,y:100,radius:3},{x:80,y:30,radius:2}].forEach(c=>{for(let o=Math.max(0,c.y-c.radius);o<=Math.min(119,c.y+c.radius);o++)for(let d=Math.max(0,c.x-c.radius);d<=Math.min(119,c.x+c.radius);d++)Math.sqrt((d-c.x)**2+(o-c.y)**2)<=c.radius&&(n[o][d]=B(d,o,"water",!1))}),ce(n,"horizontal",60,"stone"),ce(n,"vertical",60,"stone"),[{x:30,y:30,width:8,height:6,type:"settlement",name:"Megaton City Hall"},{x:25,y:40,width:6,height:4,type:"market",name:"Megaton Market",buildingId:"megaton_saloon"},{x:40,y:35,width:5,height:4,type:"clinic",name:"Megaton Medical",buildingId:"megaton_clinic"},{x:35,y:25,width:4,height:3,type:"trader_post",name:"Craterside Supply",buildingId:"craterside_supply"},{x:45,y:40,width:4,height:3,type:"workshop",name:"Megaton Armory",buildingId:"megaton_armory"},{x:28,y:35,width:4,height:3,type:"tavern",name:"Megaton Saloon",buildingId:"megaton_saloon"},{x:32,y:28,width:4,height:3,type:"security",name:"Security Office",buildingId:"megaton_security"},{x:85,y:50,width:12,height:8,type:"city_hall",name:"Rivet City Council",buildingId:"rivet_city_bar"},{x:80,y:65,width:8,height:5,type:"market",name:"Rivet City Market",buildingId:"rivet_city_market"},{x:95,y:60,width:6,height:4,type:"clinic",name:"Rivet City Medical",buildingId:"rivet_city_clinic"},{x:75,y:45,width:5,height:4,type:"trader_post",name:"Rivet City Armory",buildingId:"rivet_city_armory"},{x:100,y:45,width:4,height:3,type:"workshop",name:"Rivet City Security",buildingId:"rivet_city_security"},{x:55,y:75,width:6,height:4,type:"market",name:"Canterbury Inn",buildingId:"canterbury_inn"},{x:65,y:80,width:5,height:3,type:"trader_post",name:"Uncle Roe's Trading",buildingId:"canterbury_trading_post"},{x:50,y:85,width:4,height:3,type:"clinic",name:"Canterbury Medical",buildingId:"canterbury_clinic"},{x:15,y:80,width:8,height:10,type:"luxury_tower",name:"Tenpenny Tower",buildingId:"tenpenny_lobby"},{x:10,y:95,width:5,height:3,type:"market",name:"Tenpenny Shop",buildingId:"tenpenny_shop"},{x:25,y:92,width:4,height:3,type:"clinic",name:"Tenpenny Medical",buildingId:"tenpenny_clinic"},{x:90,y:15,width:5,height:4,type:"settlement",name:"Arefu Town Hall",buildingId:"arefu_store"},{x:85,y:25,width:4,height:3,type:"trader_post",name:"Arefu Store",buildingId:"arefu_store"},{x:95,y:20,width:3,height:2,type:"clinic",name:"Arefu Medical",buildingId:"arefu_clinic"},{x:15,y:15,width:8,height:6,type:"vault",name:"Vault 101"},{x:70,y:25,width:4,height:3,type:"workshop",name:"Scrapyard Shop",buildingId:"scrapyard_shop"},{x:25,y:70,width:3,height:2,type:"trader_post",name:"Lone Wanderer Trading"},{x:105,y:85,width:4,height:3,type:"clinic",name:"Wasteland Medical",buildingId:"lone_wanderer_clinic"}].forEach(c=>{pt(n,c.x+Math.floor(c.width/2),c.y+Math.floor(c.height/2),8,"dirt"),xt(n,c.x,c.y,c.width,c.height,c.type,c.name,c.buildingId);const o=c.x+Math.floor(c.width/2),d=c.y+Math.floor(c.height/2);mt(n,o,d,60,60,"dirt")}),[{x:10,y:50,radius:5},{x:100,y:20,radius:4},{x:70,y:100,radius:4},{x:40,y:10,radius:3},{x:110,y:110,radius:3}].forEach(c=>{pt(n,c.x,c.y,c.radius,"ruins")});const l=[{direction:"north",targetMapId:"northern_wasteland",fromPosition:{x:60*32,y:0},toPosition:{x:60*32,y:119*32}},{direction:"south",targetMapId:"southern_ruins",fromPosition:{x:60*32,y:119*32},toPosition:{x:60*32,y:0}},{direction:"east",targetMapId:"eastern_districts",fromPosition:{x:119*32,y:60*32},toPosition:{x:0,y:60*32}},{direction:"west",targetMapId:"western_outskirts",fromPosition:{x:0,y:60*32},toPosition:{x:119*32,y:60*32}}];return{id:"capital_wasteland",width:120,height:120,tiles:n,name:"Capital Wasteland",bgMusic:"wasteland_ambient",npcs:yt.filter(c=>!c.mapId||c.mapId==="capital_wasteland"),enemies:gt.filter(c=>!c.mapId||c.mapId==="capital_wasteland"),lootables:vt(120,120,.003),connections:l}},Zm=()=>{const n=[];for(let s=0;s<60;s++){const l=[];for(let c=0;c<60;c++)l.push(B(c,s,"dirt",!0));n.push(l)}for(let s=0;s<60;s++)for(let l=0;l<60;l++){const c=Math.random();c<.3?n[s][l]=B(l,s,"stone",!0):c<.4&&(n[s][l]=B(l,s,"ruins",!0))}ce(n,"horizontal",20,"stone"),ce(n,"horizontal",40,"stone"),ce(n,"vertical",25,"stone"),ce(n,"vertical",45,"stone"),[{x:20,y:20,width:12,height:8,type:"factory",name:"Old Factory"},{x:40,y:35,width:8,height:6,type:"power_plant",name:"Power Station"},{x:10,y:45,width:6,height:4,type:"warehouse",name:"Supply Depot"}].forEach(s=>{pt(n,s.x+Math.floor(s.width/2),s.y+Math.floor(s.height/2),6,"stone"),xt(n,s.x,s.y,s.width,s.height,s.type,s.name);const l=s.x+Math.floor(s.width/2),c=s.y+Math.floor(s.height/2);let o=20;Math.abs(c-40)<Math.abs(c-20)&&(o=40),mt(n,l,c,l,o,"stone")});const a=[{direction:"south",targetMapId:"capital_wasteland",fromPosition:{x:30*32,y:59*32},toPosition:{x:30*32,y:0}},{direction:"north",targetMapId:"the_pitt",fromPosition:{x:30*32,y:0},toPosition:{x:30*32,y:59*32}}];return{id:"northern_wasteland",width:60,height:60,tiles:n,name:"Northern Wasteland",bgMusic:"industrial_ambient",npcs:yt.filter(s=>s.mapId==="northern_wasteland"),enemies:gt.filter(s=>s.mapId==="northern_wasteland"),lootables:vt(60,60,.008),connections:a}},ep=()=>{const n=[];for(let s=0;s<60;s++){const l=[];for(let c=0;c<60;c++)l.push(B(c,s,"ruins",!0));n.push(l)}for(let s=10;s<60;s+=10)ce(n,"vertical",s,"stone");for(let s=10;s<60;s+=10)ce(n,"horizontal",s,"stone");for(let s=0;s<60;s++)for(let l=0;l<60;l++)if(n[s][l].type==="ruins"){const c=Math.random();c<.2?n[s][l]=B(l,s,"dirt",!0):c<.3&&(n[s][l]=B(l,s,"stone",!0))}[{x:15,y:15,width:10,height:8,type:"city_hall",name:"Ruined City Hall"},{x:35,y:25,width:8,height:6,type:"hospital",name:"Abandoned Hospital"},{x:45,y:45,width:6,height:4,type:"school",name:"Old School"}].forEach(s=>{pt(n,s.x+Math.floor(s.width/2),s.y+Math.floor(s.height/2),5,"stone"),xt(n,s.x,s.y,s.width,s.height,s.type,s.name)});const a=[{direction:"north",targetMapId:"capital_wasteland",fromPosition:{x:30*32,y:0},toPosition:{x:30*32,y:59*32}},{direction:"south",targetMapId:"point_lookout",fromPosition:{x:30*32,y:59*32},toPosition:{x:30*32,y:0}}];return{id:"southern_ruins",width:60,height:60,tiles:n,name:"Southern Ruins",bgMusic:"ruins_ambient",npcs:yt.filter(s=>s.mapId==="southern_ruins"),enemies:gt.filter(s=>s.mapId==="southern_ruins"),lootables:vt(60,60,.006),connections:a}},tp=()=>{const n=[];for(let s=0;s<60;s++){const l=[];for(let c=0;c<60;c++)l.push(B(c,s,"stone",!0));n.push(l)}for(let s=0;s<60;s++)for(let l=0;l<60;l++){const c=Math.random();c<.2?n[s][l]=B(l,s,"dirt",!0):c<.3&&(n[s][l]=B(l,s,"grass",!0))}ce(n,"horizontal",30,"stone"),ce(n,"vertical",30,"stone"),[{x:20,y:20,width:15,height:10,type:"rivet_city",name:"Rivet City"},{x:10,y:40,width:8,height:6,type:"market",name:"Trading Post"},{x:45,y:15,width:6,height:4,type:"clinic",name:"Medical Center"}].forEach(s=>{pt(n,s.x+Math.floor(s.width/2),s.y+Math.floor(s.height/2),8,"stone"),xt(n,s.x,s.y,s.width,s.height,s.type,s.name);const l=s.x+Math.floor(s.width/2),c=s.y+Math.floor(s.height/2);mt(n,l,c,30,30,"stone")});const a=[{direction:"west",targetMapId:"capital_wasteland",fromPosition:{x:0,y:30*32},toPosition:{x:59*32,y:30*32}},{direction:"east",targetMapId:"citadel",fromPosition:{x:59*32,y:30*32},toPosition:{x:0,y:30*32}}];return{id:"eastern_districts",width:60,height:60,tiles:n,name:"Eastern Districts",bgMusic:"city_ambient",npcs:yt.filter(s=>s.mapId==="eastern_districts"),enemies:gt.filter(s=>s.mapId==="eastern_districts"),lootables:vt(60,60,.004),connections:a}},np=()=>{const n=[];for(let l=0;l<60;l++){const c=[];for(let o=0;o<60;o++)c.push(B(o,l,"grass",!0));n.push(c)}for(let l=0;l<60;l++)for(let c=0;c<60;c++){const o=Math.random();o<.3?n[l][c]=B(c,l,"dirt",!0):o<.4&&(n[l][c]=B(c,l,"stone",!0))}[{x:20,y:15,radius:4},{x:45,y:40,radius:3}].forEach(l=>{for(let c=Math.max(0,l.y-l.radius);c<=Math.min(59,l.y+l.radius);c++)for(let o=Math.max(0,l.x-l.radius);o<=Math.min(59,l.x+l.radius);o++)Math.sqrt((o-l.x)**2+(c-l.y)**2)<=l.radius&&(n[c][o]=B(o,c,"water",!1))}),mt(n,0,30,59,30,"dirt"),[{x:15,y:25,width:6,height:4,type:"ranger_station",name:"Ranger Outpost"},{x:40,y:35,width:5,height:3,type:"cabin",name:"Survivor's Cabin"},{x:25,y:50,width:4,height:3,type:"bunker",name:"Hidden Bunker"}].forEach(l=>{pt(n,l.x+Math.floor(l.width/2),l.y+Math.floor(l.height/2),4,"dirt"),xt(n,l.x,l.y,l.width,l.height,l.type,l.name);const c=l.x+Math.floor(l.width/2),o=l.y+Math.floor(l.height/2);mt(n,c,o,c,30,"dirt")});const s=[{direction:"east",targetMapId:"capital_wasteland",fromPosition:{x:59*32,y:30*32},toPosition:{x:0,y:30*32}},{direction:"west",targetMapId:"metro_tunnels",fromPosition:{x:0,y:30*32},toPosition:{x:59*32,y:30*32}}];return{id:"western_outskirts",width:60,height:60,tiles:n,name:"Western Outskirts",bgMusic:"wilderness_ambient",npcs:yt.filter(l=>l.mapId==="western_outskirts"),enemies:gt.filter(l=>l.mapId==="western_outskirts"),lootables:vt(60,60,.002),connections:s}},rp=()=>{const n=[];for(let s=0;s<40;s++){const l=[];for(let c=0;c<50;c++)l.push(B(c,s,"dirt",!0));n.push(l)}for(let s=0;s<40;s++)for(let l=0;l<50;l++){const c=Math.random();c<.4?n[s][l]=B(l,s,"ruins",!0):c<.5&&(n[s][l]=B(l,s,"stone",!0))}ce(n,"horizontal",20,"stone"),[{x:15,y:15,width:8,height:6,type:"steel_mill",name:"The Mill"},{x:30,y:20,width:6,height:4,type:"slave_quarters",name:"Worker Barracks"}].forEach(s=>{pt(n,s.x+Math.floor(s.width/2),s.y+Math.floor(s.height/2),5,"stone"),xt(n,s.x,s.y,s.width,s.height,s.type,s.name);const l=s.x+Math.floor(s.width/2);mt(n,l,s.y+s.height,l,20,"stone")});const a=[{direction:"south",targetMapId:"northern_wasteland",fromPosition:{x:25*32,y:39*32},toPosition:{x:30*32,y:0}}];return{id:"the_pitt",width:50,height:40,tiles:n,name:"The Pitt",bgMusic:"industrial_ambient",npcs:yt.filter(s=>s.mapId==="the_pitt"),enemies:gt.filter(s=>s.mapId==="the_pitt"),lootables:vt(50,40,.007),connections:a}},ip=()=>{const n=[];for(let s=0;s<45;s++){const l=[];for(let c=0;c<45;c++)Math.random()<.4?l.push(B(c,s,"water",!1)):l.push(B(c,s,"grass",!0));n.push(l)}ce(n,"horizontal",22,"stone"),ce(n,"vertical",22,"stone");for(let s=0;s<45;s++)n[22][s].walkable=!0;for(let s=0;s<45;s++)n[s][22].walkable=!0;[{x:15,y:15,width:6,height:4,type:"mansion",name:"Calvert Mansion"},{x:30,y:25,width:4,height:3,type:"lighthouse",name:"Point Lookout Lighthouse"}].forEach(s=>{pt(n,s.x+Math.floor(s.width/2),s.y+Math.floor(s.height/2),3,"dirt"),xt(n,s.x,s.y,s.width,s.height,s.type,s.name);const l=s.x+Math.floor(s.width/2),c=s.y+Math.floor(s.height/2);mt(n,l,c,22,22,"stone")});const a=[{direction:"north",targetMapId:"southern_ruins",fromPosition:{x:22*32,y:0},toPosition:{x:30*32,y:59*32}}];return{id:"point_lookout",width:45,height:45,tiles:n,name:"Point Lookout",bgMusic:"swamp_ambient",npcs:yt.filter(s=>s.mapId==="point_lookout"),enemies:gt.filter(s=>s.mapId==="point_lookout"),lootables:vt(45,45,.003),connections:a}},ap=()=>{const n=[];for(let s=0;s<40;s++){const l=[];for(let c=0;c<40;c++)l.push(B(c,s,"stone",!0));n.push(l)}ce(n,"horizontal",20,"stone"),ce(n,"vertical",20,"stone"),[{x:15,y:15,width:10,height:8,type:"citadel",name:"The Citadel"},{x:5,y:5,width:6,height:4,type:"armory",name:"Brotherhood Armory"}].forEach(s=>{xt(n,s.x,s.y,s.width,s.height,s.type,s.name);const l=s.x+Math.floor(s.width/2),c=s.y+Math.floor(s.height/2);mt(n,l,c,20,20,"stone")});const a=[{direction:"west",targetMapId:"eastern_districts",fromPosition:{x:0,y:20*32},toPosition:{x:59*32,y:30*32}}];return{id:"citadel",width:40,height:40,tiles:n,name:"The Citadel",bgMusic:"brotherhood_ambient",npcs:yt.filter(s=>s.mapId==="citadel"),enemies:gt.filter(s=>s.mapId==="citadel"),lootables:vt(40,40,.001),connections:a}},sp=()=>{const n=[];for(let s=0;s<25;s++){const l=[];for(let c=0;c<80;c++)l.push(B(c,s,"ruins",!0));n.push(l)}ce(n,"horizontal",12,"stone"),ce(n,"horizontal",8,"stone"),ce(n,"horizontal",16,"stone");for(let s=30;s<35;s++)for(let l=10;l<15;l++)n[l][s]=B(s,l,"water",!1);[{x:15,y:10,width:6,height:4,type:"metro_station",name:"Dupont Circle Station"},{x:40,y:8,width:6,height:4,type:"metro_station",name:"Gallery Place Station"},{x:65,y:12,width:6,height:4,type:"metro_station",name:"Union Station"}].forEach(s=>{pt(n,s.x+Math.floor(s.width/2),s.y+Math.floor(s.height/2),3,"stone"),xt(n,s.x,s.y,s.width,s.height,s.type,s.name);const l=s.x+Math.floor(s.width/2);mt(n,l,s.y+s.height,l,12,"stone")});const a=[{direction:"east",targetMapId:"western_outskirts",fromPosition:{x:79*32,y:12*32},toPosition:{x:0,y:30*32}}];return{id:"metro_tunnels",width:80,height:25,tiles:n,name:"Metro Tunnels",bgMusic:"underground_ambient",npcs:yt.filter(s=>s.mapId==="metro_tunnels"),enemies:gt.filter(s=>s.mapId==="metro_tunnels"),lootables:vt(80,25,.01),connections:a}},Zd={capital_wasteland:Jm,northern_wasteland:Zm,southern_ruins:ep,eastern_districts:tp,western_outskirts:np,the_pitt:rp,point_lookout:ip,citadel:ap,metro_tunnels:sp},pr=class pr{static saveGame(t,n,r){try{const a={version:"1.0.0",timestamp:Date.now(),gameState:{...n},settings:{...r}},s=`${this.SAVE_KEY_PREFIX}${t}`;return localStorage.setItem(s,JSON.stringify(a)),this.updateSaveList(t,a),!0}catch(a){return console.error("Failed to save game:",a),!1}}static loadGame(t){try{const n=`${this.SAVE_KEY_PREFIX}${t}`,r=localStorage.getItem(n);if(!r)return null;const a=JSON.parse(r);return this.validateSaveData(a)?a:(console.error("Invalid save data"),null)}catch(n){return console.error("Failed to load game:",n),null}}static deleteSave(t){try{const n=`${this.SAVE_KEY_PREFIX}${t}`;return localStorage.removeItem(n),this.updateSaveList(t,null),!0}catch(n){return console.error("Failed to delete save:",n),!1}}static getSaveList(){const t=[];for(let n=0;n<this.MAX_SAVES;n++)try{const r=`${this.SAVE_KEY_PREFIX}${n}`,a=localStorage.getItem(r);if(a){const s=JSON.parse(a);t[n]={slot:n,timestamp:s.timestamp,playerName:s.gameState.player.name,level:s.gameState.player.level,playtime:s.gameState.statistics.playtime}}else t[n]=null}catch{t[n]=null}return t}static saveSettings(t){try{return localStorage.setItem(this.SETTINGS_KEY,JSON.stringify(t)),!0}catch(n){return console.error("Failed to save settings:",n),!1}}static loadSettings(){try{const t=localStorage.getItem(this.SETTINGS_KEY);if(t)return JSON.parse(t)}catch(t){console.error("Failed to load settings:",t)}return{masterVolume:1,musicVolume:.8,sfxVolume:.8,graphics:"high",lowGraphicsMode:!1,autoDetectPerformance:!0,fullscreen:!1,showFPS:!0,autoSave:!0,difficulty:"normal"}}static exportSave(t){const n=this.loadGame(t);return n?btoa(JSON.stringify(n)):null}static importSave(t,n){try{const r=JSON.parse(atob(n));if(!this.validateSaveData(r))return!1;const a=`${this.SAVE_KEY_PREFIX}${t}`;return localStorage.setItem(a,JSON.stringify(r)),this.updateSaveList(t,r),!0}catch(r){return console.error("Failed to import save:",r),!1}}static validateSaveData(t){return t&&t.version&&t.timestamp&&t.gameState&&t.gameState.player&&t.gameState.player.name&&typeof t.gameState.player.level=="number"}static updateSaveList(t,n){try{const r="wasteland_rpg_save_list";let a=JSON.parse(localStorage.getItem(r)||"{}");n?a[t]={timestamp:n.timestamp,playerName:n.gameState.player.name,level:n.gameState.player.level,playtime:n.gameState.statistics.playtime}:delete a[t],localStorage.setItem(r,JSON.stringify(a))}catch(r){console.error("Failed to update save list:",r)}}static autoSave(t,n){return n.autoSave?this.saveGame(0,t,n):!1}static getStorageUsage(){let t=0;for(let a in localStorage)(a.startsWith(this.SAVE_KEY_PREFIX)||a===this.SETTINGS_KEY)&&(t+=localStorage[a].length);const n=5*1024*1024,r=t/n*100;return{used:t,total:n,percentage:r}}static clearAllSaves(){try{for(let t=0;t<this.MAX_SAVES;t++){const n=`${this.SAVE_KEY_PREFIX}${t}`;localStorage.removeItem(n)}return localStorage.removeItem("wasteland_rpg_save_list"),!0}catch(t){return console.error("Failed to clear saves:",t),!1}}};pr.SAVE_KEY_PREFIX="wasteland_rpg_save_",pr.SETTINGS_KEY="wasteland_rpg_settings",pr.MAX_SAVES=10;let Ct=pr;const lp=()=>{const[e,t]=C.useState(null),[n,r]=C.useState(Ct.loadSettings()),[a,s]=C.useState("menu"),l=C.useCallback(p=>{s(p)},[]);C.useEffect(()=>{if(e&&n.autoSave){const p=setInterval(()=>{Ct.autoSave(e,n)},3e4);return()=>clearInterval(p)}},[e,n.autoSave]);const c=C.useCallback(p=>{t(p)},[]),o=C.useCallback((p,f)=>{const k=Gm(p,f),j=Zd.capital_wasteland(),E=[{...w.find(M=>M.id==="stimpak"),quantity:3},{...w.find(M=>M.id==="scrap_metal"),quantity:5},{...w.find(M=>M.id==="combat_knife")},{...w.find(M=>M.id==="combat_armor")}],b={player:k,party:[k],allCharacters:[k],inventory:E,gold:100,currentMap:j,availableMaps:{capital_wasteland:j},mapPosition:{x:25,y:25},camera:{x:0,y:0},gameTime:0,dayNightCycle:.5,weather:"clear",quests:[],completedQuests:[],discoveredMaps:["wasteland"],gameMode:"exploration",base:{level:1,name:"Survivor's Haven",facilities:{workshop:1,medical:1,storage:1,training:1},resources:{scrap:50,food:30,medicine:10,fuel:20,electronics:5,rare_materials:0},defenses:[],population:1,morale:75},achievements:[...Ym],statistics:{playtime:0,enemiesKilled:0,questsCompleted:0,itemsFound:0,distanceTraveled:0,damageDealt:0,damageTaken:0,healingDone:0,goldEarned:0,goldSpent:0},visibilityMap:[],quests:[Jd.find(M=>M.id==="escape_vault_101")],devMode:{enabled:!1,selectedTool:"quest",questEditor:{id:"",title:"",description:"",objectives:[],rewards:[],requiredLevel:1},npcEditor:{id:"",name:"",type:"neutral",position:{x:400,y:400},dialogue:[],inventory:[],faction:"neutral",isHostile:!1},itemEditor:{id:"",name:"",type:"material",rarity:"common",description:"",stats:{},value:10,stackable:!1}}};t(b),s("playing")},[]),d=C.useCallback(p=>{const f=Ct.loadGame(p);return f?(t(f.gameState),r(f.settings),s("playing"),!0):!1},[]),m=C.useCallback(p=>e?Ct.saveGame(p,e,n):!1,[e,n]),y=C.useCallback(p=>{if(!e||!e.dialogue)return;const f=e.currentMap.npcs.find(b=>b.id===e.dialogue.npcId);if(!f)return;const k=f.dialogue.find(b=>b.id===e.dialogue.currentNode),j=k==null?void 0:k.choices.find(b=>b.id===p);if(!j)return;const E={...e};if(E.dialogue.history.push(`You: ${j.text}`),j.action==="give_quest"&&f.quests&&f.quests.forEach(b=>{E.quests.find(D=>D.id===b.id)||E.quests.push({...b,status:"active"})}),j.action==="open_trade"&&console.log("Opening trade with",f.name),j.nextNode){const b=f.dialogue.find(M=>M.id===j.nextNode);b&&(E.dialogue.currentNode=j.nextNode,E.dialogue.choices=b.choices,E.dialogue.history.push(`${f.name}: ${b.text}`))}else E.dialogue=void 0,E.gameMode="exploration";c(E)},[e]),u=C.useCallback((p,f,k=1)=>{if(!e)return;const j={...e},E=j.quests.find(b=>b.id===p);if(E&&E.status==="active"){const b=E.objectives.find(M=>M.id===f);b&&!b.completed&&(b.current=Math.min(b.current+k,b.required),b.current>=b.required&&(b.completed=!0),E.objectives.every(D=>D.completed)&&(E.status="completed",j.completedQuests.push(E.id),E.rewards.forEach(D=>{if(D.type==="experience")for(j.player.experience+=D.value;j.player.experience>=j.player.experienceToNext;)j.player.experience-=j.player.experienceToNext,j.player.level++,j.player.experienceToNext=j.player.level*100,j.player.maxHealth+=10,j.player.maxEnergy+=5,j.player.health=j.player.maxHealth,j.player.energy=j.player.maxEnergy;else D.type==="gold"?j.gold+=D.value:D.type==="item"&&D.item&&j.inventory.push({...D.item})})))}c(j)},[e,c]);C.useEffect(()=>{if(!e)return;const p={...e};let f=!1;const k=p.quests.find(j=>j.id==="first_steps");if(k&&k.status==="active"){const j=k.objectives.find(E=>E.id==="explore_tiles");if(j&&!j.completed){const E=p.currentMap.tiles.flat().filter(b=>b.discovered).length;E>j.current&&(j.current=Math.min(E,j.required),j.current>=j.required&&(j.completed=!0),f=!0)}}p.quests.forEach(j=>{j.status==="active"&&j.objectives.every(b=>b.completed)&&(j.status="completed",p.completedQuests.includes(j.id)||p.completedQuests.push(j.id),j.rewards.forEach(b=>{if(b.type==="experience")for(p.player.experience+=b.value;p.player.experience>=p.player.experienceToNext;)p.player.experience-=p.player.experienceToNext,p.player.level++,p.player.experienceToNext=p.player.level*100,p.player.maxHealth+=10,p.player.maxEnergy+=5,p.player.health=p.player.maxHealth,p.player.energy=p.player.maxEnergy;else b.type==="gold"?p.gold+=b.value:b.type==="item"&&b.item&&p.inventory.push({...b.item})}),f=!0)}),f&&c(p)},[e==null?void 0:e.currentMap.tiles,e==null?void 0:e.quests,c]);const h=C.useCallback(p=>{if(!e)return;const f={...e},k=f.quests.find(j=>j.id===p);k&&(k.status="completed",f.completedQuests.includes(p)||f.completedQuests.push(p),c(f))},[e,c]),x=C.useCallback(p=>{const f={...n,...p};r(f),Ct.saveSettings(f)},[n]),v=C.useCallback(()=>{s("character-creation")},[]),N=C.useCallback(()=>{s("menu"),c(null)},[]),g=C.useCallback(()=>{console.log("Quitting game...")},[]);return{gameState:e,settings:n,gameMode:a,setGameMode:l,createNewGame:o,loadGame:d,saveGame:m,updateSettings:x,updateGameState:c,startNewGame:v,returnToMenu:N,quitGame:g,handleDialogueChoice:y,updateQuestProgress:u,completeQuest:h}};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var op={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),L=(e,t)=>{const n=C.forwardRef(({color:r="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:c="",children:o,...d},m)=>C.createElement("svg",{ref:m,...op,width:a,height:a,stroke:r,strokeWidth:l?Number(s)*24/Number(a):s,className:["lucide",`lucide-${cp(e)}`,c].join(" "),...d},[...t.map(([y,u])=>C.createElement(y,u)),...Array.isArray(o)?o:[o]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=L("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=L("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=L("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=L("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=L("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=L("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=L("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=L("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=L("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=L("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=L("Dice6",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=L("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=L("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=L("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=L("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=L("Footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=L("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=L("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=L("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=L("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=L("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=L("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=L("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=L("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=L("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=L("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=L("Scroll",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=L("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=L("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=L("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=L("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=L("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=L("Skull",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["path",{d:"M8 20v2h8v-2",key:"ded4og"}],["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20",key:"xq9p5u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=L("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=L("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=L("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=L("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=L("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=L("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=L("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=L("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=L("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=L("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=L("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Ar=()=>{const e=C.useRef({menu:null,combat:null,exploration:null,victory:null,defeat:null,sfx:null});C.useEffect(()=>(e.current.menu||(e.current.menu=new Audio("/assets/audio/menu-theme.mp3")),e.current.combat||(e.current.combat=new Audio("/assets/audio/combat-theme.mp3")),e.current.exploration||(e.current.exploration=new Audio("/assets/audio/exploration-theme.mp3")),e.current.victory||(e.current.victory=new Audio("/assets/audio/victory.mp3")),e.current.defeat||(e.current.defeat=new Audio("/assets/audio/defeat.mp3")),e.current.sfx||(e.current.sfx=new Audio),()=>{Object.values(e.current).forEach(a=>{a&&(a.pause(),a.currentTime=0)})}),[]);const t=C.useCallback((a,s=.5,l=!0)=>{Object.entries(e.current).forEach(([o,d])=>{d&&o!==a&&o!=="sfx"&&(d.pause(),d.currentTime=0)});const c=e.current[a];c&&(c.volume=s,c.loop=l,c.paused&&c.play().catch(o=>console.log(`Failed to play ${a} audio:`,o)))},[]),n=C.useCallback(()=>{Object.entries(e.current).forEach(([a,s])=>{s&&a!=="sfx"&&(s.pause(),s.currentTime=0)})},[]),r=C.useCallback((a,s=.5)=>{const l=e.current.sfx;l&&(l.src=a,l.volume=s,l.play().catch(c=>console.log("Failed to play SFX:",c)))},[]);return{playMusic:t,stopMusic:n,playSfx:r}},Ip=({onNewGame:e,onLoadGame:t,onSettings:n,onQuit:r,settings:a,onUpdateSettings:s})=>{const[l,c]=C.useState(!1),{playMusic:o,stopMusic:d}=Ar();C.useEffect(()=>{const f=k=>{k.stopPropagation()};return document.addEventListener("keydown",f,!0),()=>document.removeEventListener("keydown",f,!0)},[]),C.useEffect(()=>(o("menu",.4,!0),()=>{d()}),[o,d]);const[m,y]=C.useState(!1),[u,h]=C.useState(!1),[x,v]=C.useState(!1),N=Ct.getSaveList(),g=f=>{const k=Math.floor(f/3600),j=Math.floor(f%3600/60);return`${k}h ${j}m`},p=f=>new Date(f).toLocaleDateString();return l?i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-red-900 to-black text-white flex items-center justify-center",children:i.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 max-w-4xl w-full mx-4 border-2 border-red-600",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-3xl font-bold text-red-400",children:"Load Game"}),i.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-white",children:i.jsx(we,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N.map((f,k)=>i.jsxs("div",{className:`
                  p-4 rounded-lg border-2 transition-all cursor-pointer
                  ${f?"bg-gray-700 border-gray-600 hover:border-red-400 hover:bg-gray-600":"bg-gray-900 border-gray-800 opacity-50 cursor-not-allowed"}
                `,onClick:()=>f&&t(k),children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Slot ",k+1]}),f&&i.jsx("span",{className:"text-sm text-gray-400",children:p(f.timestamp)})]}),f?i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"text-yellow-400 font-semibold",children:f.playerName}),i.jsxs("div",{className:"text-sm text-gray-300",children:["Level ",f.level]}),i.jsxs("div",{className:"text-sm text-gray-400",children:["Playtime: ",g(f.playtime)]})]}):i.jsx("div",{className:"text-gray-500",children:"Empty Slot"})]},k))})]})}):m?i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-red-900 to-black text-white flex items-center justify-center",children:i.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 max-w-4xl w-full mx-4 border-2 border-red-600",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-3xl font-bold text-red-400",children:"Achievements"}),i.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-white",children:i.jsx(we,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"text-center text-gray-400",children:[i.jsx(Ao,{className:"w-16 h-16 mx-auto mb-4"}),i.jsx("p",{children:"Start a new game to unlock achievements!"})]})]})}):u?i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-red-900 to-black text-white flex items-center justify-center",children:i.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 max-w-2xl w-full mx-4 border-2 border-red-600",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-3xl font-bold text-red-400",children:"Credits"}),i.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-white",children:i.jsx(we,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"space-y-6 text-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-yellow-400 mb-2",children:"Wasteland Survivors"}),i.jsx("p",{className:"text-gray-300",children:"A Post-Apocalyptic RPG Experience"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-red-400 mb-2",children:"Game Design & Development"}),i.jsx("p",{className:"text-gray-300",children:"Built with React, TypeScript, and HTML5 Canvas"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-red-400 mb-2",children:"Features"}),i.jsxs("ul",{className:"text-gray-300 space-y-1",children:[i.jsx("li",{children:"• Real-time character movement with arrow keys"}),i.jsx("li",{children:"• Turn-based tactical combat system"}),i.jsx("li",{children:"• Character progression and skill trees"}),i.jsx("li",{children:"• Save/Load system with multiple slots"}),i.jsx("li",{children:"• Dynamic weather and day/night cycle"}),i.jsx("li",{children:"• Achievement system"}),i.jsx("li",{children:"• Quest system with objectives"})]})]}),i.jsx("div",{className:"text-sm text-gray-500",children:"Version 1.0.0 - Built for production"})]})]})}):x?i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-red-900 to-black text-white flex items-center justify-center",children:i.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 max-w-2xl w-full mx-4 border-2 border-red-600",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-3xl font-bold text-red-400",children:"Settings"}),i.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-white",children:i.jsx(we,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-yellow-400 mb-4",children:"Graphics"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Low Graphics Mode (Better Performance)"}),i.jsx("button",{onClick:()=>s&&s({...a,lowGraphicsMode:!(a!=null&&a.lowGraphicsMode)}),className:`w-12 h-6 rounded-full transition-colors ${a!=null&&a.lowGraphicsMode?"bg-green-600":"bg-gray-600"}`,children:i.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition-transform ${a!=null&&a.lowGraphicsMode?"translate-x-6":"translate-x-1"}`})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Auto-detect Performance"}),i.jsx("button",{onClick:()=>s&&s({...a,autoDetectPerformance:!(a!=null&&a.autoDetectPerformance)}),className:`w-12 h-6 rounded-full transition-colors ${(a==null?void 0:a.autoDetectPerformance)!==!1?"bg-green-600":"bg-gray-600"}`,children:i.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition-transform ${(a==null?void 0:a.autoDetectPerformance)!==!1?"translate-x-6":"translate-x-1"}`})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Graphics Quality"}),i.jsxs("select",{value:(a==null?void 0:a.graphics)||"high",onChange:f=>s&&s({...a,graphics:f.target.value}),className:"bg-gray-700 border border-gray-600 rounded px-3 py-1",children:[i.jsx("option",{value:"low",children:"Low"}),i.jsx("option",{value:"medium",children:"Medium"}),i.jsx("option",{value:"high",children:"High"}),i.jsx("option",{value:"ultra",children:"Ultra"})]})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-yellow-400 mb-4",children:"Audio"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Master Volume"}),i.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:(a==null?void 0:a.masterVolume)||1,onChange:f=>s&&s({...a,masterVolume:parseFloat(f.target.value)}),className:"w-32"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Music Volume"}),i.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:(a==null?void 0:a.musicVolume)||.8,onChange:f=>s&&s({...a,musicVolume:parseFloat(f.target.value)}),className:"w-32"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-yellow-400 mb-4",children:"Gameplay"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Auto Save"}),i.jsx("button",{onClick:()=>s&&s({...a,autoSave:!(a!=null&&a.autoSave)}),className:`w-12 h-6 rounded-full transition-colors ${a!=null&&a.autoSave?"bg-green-600":"bg-gray-600"}`,children:i.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition-transform ${a!=null&&a.autoSave?"translate-x-6":"translate-x-1"}`})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Difficulty"}),i.jsxs("select",{value:(a==null?void 0:a.difficulty)||"normal",onChange:f=>s&&s({...a,difficulty:f.target.value}),className:"bg-gray-700 border border-gray-600 rounded px-3 py-1",children:[i.jsx("option",{value:"easy",children:"Easy"}),i.jsx("option",{value:"normal",children:"Normal"}),i.jsx("option",{value:"hard",children:"Hard"}),i.jsx("option",{value:"nightmare",children:"Nightmare"})]})]})]})]})]})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-red-900 to-black text-white flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"mb-12",children:[i.jsx("h1",{className:"text-6xl font-bold text-red-400 mb-4 tracking-wider",children:"WASTELAND"}),i.jsx("h2",{className:"text-3xl font-bold text-yellow-400 tracking-widest",children:"SURVIVORS"}),i.jsx("p",{className:"text-gray-300 mt-4 text-lg",children:"A Post-Apocalyptic RPG Experience"})]}),i.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[i.jsxs("button",{onClick:e,className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-4 px-8 rounded-lg transition-all duration-200 flex items-center justify-center gap-3 text-lg",children:[i.jsx(Np,{className:"w-6 h-6"}),"New Game"]}),i.jsxs("button",{onClick:()=>c(!0),className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-4 px-8 rounded-lg transition-all duration-200 flex items-center justify-center gap-3 text-lg",children:[i.jsx(bl,{className:"w-6 h-6"}),"Load Game"]}),i.jsxs("button",{onClick:()=>v(!0),className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-4 px-8 rounded-lg transition-all duration-200 flex items-center justify-center gap-3 text-lg",children:[i.jsx($i,{className:"w-6 h-6"}),"Settings"]}),i.jsxs("button",{onClick:()=>y(!0),className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-4 px-8 rounded-lg transition-all duration-200 flex items-center justify-center gap-3 text-lg",children:[i.jsx(Ao,{className:"w-6 h-6"}),"Achievements"]}),i.jsxs("button",{onClick:()=>h(!0),className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-4 px-8 rounded-lg transition-all duration-200 flex items-center justify-center gap-3 text-lg",children:[i.jsx(vp,{className:"w-6 h-6"}),"Credits"]})]}),i.jsx("div",{className:"mt-12 text-gray-500 text-sm",children:"Use arrow keys or WASD to move • Space to interact • I for inventory"})]})})},Lp=({onComplete:e})=>{const[t,n]=C.useState(0),[r,a]=C.useState(!1),[s,l]=C.useState(!1),{playMusic:c,stopMusic:o}=Ar(),d=[{background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)",title:"October 23, 2077",subtitle:"The Great War",text:"The world ended not with a whimper, but with the roar of atomic fire...",duration:4e3,effects:"nuclear-flash"},{background:"linear-gradient(135deg, #ff6b35 0%, #f7931e 50%, #ffcc02 100%)",title:"200 Years Later",subtitle:"The Capital Wasteland",text:"From the ashes of the old world, survivors emerge into a harsh new reality...",duration:4e3,effects:"wasteland-wind"},{background:"linear-gradient(135deg, #2c3e50 0%, #34495e 50%, #7f8c8d 100%)",title:"Vault 101",subtitle:"Your Story Begins",text:"Born in the safety of an underground vault, you've never seen the surface world...",duration:4e3,effects:"vault-hum"},{background:"linear-gradient(135deg, #8b4513 0%, #a0522d 50%, #cd853f 100%)",title:"Until Now",subtitle:"The Wasteland Awaits",text:"Your father has left the vault, breaking the most sacred rule. Now you must follow...",duration:4e3,effects:"door-opening"}];C.useEffect(()=>(c("menu",.4,!0),()=>{o()}),[c,o]),C.useEffect(()=>{l(!0);const y=setTimeout(()=>{a(!0)},500),u=setTimeout(()=>{t<d.length-1?(a(!1),setTimeout(()=>{n(t+1)},500)):setTimeout(e,2e3)},d[t].duration);return()=>{clearTimeout(y),clearTimeout(u)}},[t,e]);const m=()=>{s&&(playSfx("/assets/audio/select.mp3",.4),e(),l(!1))};return i.jsxs("div",{className:"fixed inset-0 flex items-center justify-center transition-all duration-1000 overflow-hidden",style:{background:d[t].background},children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[d[t].effects==="nuclear-flash"&&i.jsx("div",{className:"absolute inset-0 bg-white opacity-20 animate-pulse"}),d[t].effects==="wasteland-wind"&&i.jsx(i.Fragment,{children:[...Array(30)].map((y,u)=>i.jsx("div",{className:"absolute w-1 h-8 bg-yellow-600 opacity-30 animate-bounce",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${2+Math.random()*3}s`}},u))}),d[t].effects==="vault-hum"&&i.jsx("div",{className:"absolute inset-0 bg-blue-900 opacity-10 animate-pulse"}),d[t].effects==="door-opening"&&i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-transparent to-black animate-pulse"}),[...Array(20)].map((y,u)=>i.jsx("div",{className:"absolute w-2 h-2 bg-white rounded-full opacity-30 animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${2+Math.random()*3}s`}},u))]}),i.jsxs("div",{className:"relative z-10 w-full h-full flex flex-col",children:[i.jsx("div",{className:"h-16 bg-black opacity-80"}),i.jsx("div",{className:"flex-1 flex items-center justify-center px-8",children:i.jsxs("div",{className:`text-center transition-all duration-1000 ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,children:[i.jsx("h1",{className:"text-6xl md:text-8xl font-bold mb-4 text-white drop-shadow-2xl tracking-wider animate-pulse",children:d[t].title}),i.jsx("h2",{className:"text-2xl md:text-4xl font-semibold mb-8 text-yellow-400 drop-shadow-lg",children:d[t].subtitle}),i.jsx("p",{className:"text-lg md:text-xl text-gray-200 leading-relaxed max-w-2xl mx-auto drop-shadow-md",children:d[t].text})]})}),i.jsx("div",{className:"h-16 bg-black opacity-80"})]}),s&&i.jsxs("button",{onClick:m,className:"fixed bottom-8 right-8 bg-black bg-opacity-70 hover:bg-opacity-90 text-white px-6 py-3 rounded-lg transition-all duration-300 flex items-center gap-2 border border-gray-600 backdrop-blur-sm",children:[i.jsx(Cp,{className:"w-5 h-5"}),"Skip Intro"]}),i.jsx("div",{className:"fixed bottom-8 left-8 flex gap-2",children:d.map((y,u)=>i.jsx("div",{className:`w-4 h-4 rounded-full transition-all duration-500 ${u===t?"bg-yellow-400 scale-125":u<t?"bg-white":"bg-gray-600"}`},u))})]})},Rp=({onCreateCharacter:e,onBack:t})=>{var u;const[n,r]=C.useState("basic");C.useEffect(()=>{const h=x=>{x.key!=="Escape"&&x.stopPropagation()};return document.addEventListener("keydown",h,!0),()=>document.removeEventListener("keydown",h,!0)},[]);const[a,s]=C.useState({name:"",age:25,gender:"male",class:"warrior",background:"vault_dweller",stats:{strength:5,agility:5,intelligence:5,endurance:5,luck:5,perception:5,charisma:5},traits:[],biography:"",availablePoints:15}),l=h=>{switch(h){case"warrior":return i.jsx(Ot,{className:"w-8 h-8"});case"ranger":return i.jsx(Ss,{className:"w-8 h-8"});case"medic":return i.jsx(an,{className:"w-8 h-8"});case"engineer":return i.jsx(_s,{className:"w-8 h-8"})}},c=(h,x)=>{const v=a.stats[h]+x;if(v>=1&&v<=10){const N=x;a.availablePoints-N>=0&&s(g=>({...g,stats:{...g.stats,[h]:v},availablePoints:g.availablePoints-N}))}},o=h=>{s(x=>({...x,traits:x.traits.includes(h)?x.traits.filter(v=>v!==h):x.traits.length<2?[...x.traits,h]:x.traits}))},d=()=>{switch(n){case"basic":return a.name.trim().length>0;case"background":return!0;case"stats":return a.availablePoints===0;case"traits":return!0;case"confirm":return!0;default:return!1}},m=()=>{const h=["basic","background","stats","traits","confirm"],x=h.indexOf(n);x<h.length-1?r(h[x+1]):e(a)},y=()=>{const h=["basic","background","stats","traits","confirm"],x=h.indexOf(n);x>0?r(h[x-1]):t()};return i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-red-900 to-black text-white flex items-center justify-center",children:i.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 max-w-6xl w-full mx-4 border-2 border-red-600",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-4xl font-bold text-red-400 mb-2",children:"Create Your Survivor"}),i.jsxs("p",{className:"text-gray-300",children:["Step ",["basic","background","stats","traits","confirm"].indexOf(n)+1," of 5"]})]}),i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 mb-8",children:i.jsx("div",{className:"bg-red-600 h-2 rounded-full transition-all duration-300",style:{width:`${(["basic","background","stats","traits","confirm"].indexOf(n)+1)/5*100}%`}})}),n==="basic"&&i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("h3",{className:"text-2xl font-bold text-yellow-400 mb-6 text-center flex items-center justify-center gap-2",children:[i.jsx(Oi,{className:"w-6 h-6"}),"Basic Information"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name"}),i.jsx("input",{type:"text",value:a.name,onChange:h=>s(x=>({...x,name:h.target.value})),placeholder:"Enter your name...",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-red-400 focus:outline-none",maxLength:20})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Age"}),i.jsx("input",{type:"number",value:a.age,onChange:h=>s(x=>({...x,age:parseInt(h.target.value)||25})),min:"16",max:"80",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-red-400 focus:outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Gender"}),i.jsxs("select",{value:a.gender,onChange:h=>s(x=>({...x,gender:h.target.value})),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-red-400 focus:outline-none",children:[i.jsx("option",{value:"male",children:"Male"}),i.jsx("option",{value:"female",children:"Female"}),i.jsx("option",{value:"other",children:"Other"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Class"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(ks).map(([h,x])=>i.jsxs("button",{onClick:()=>s(v=>({...v,class:h})),className:`
                        p-3 rounded-lg border-2 transition-all flex items-center gap-2
                        ${a.class===h?"border-red-400 bg-red-900/30":"border-gray-600 bg-gray-700 hover:border-red-400"}
                      `,children:[l(h),i.jsx("span",{className:"text-sm font-bold",children:x.name})]},h))})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Biography (Optional)"}),i.jsx("textarea",{value:a.biography,onChange:h=>s(x=>({...x,biography:h.target.value})),placeholder:"Tell us about your character's background...",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-red-400 focus:outline-none h-24 resize-none",maxLength:500})]})]}),n==="background"&&i.jsxs("div",{children:[i.jsxs("h3",{className:"text-2xl font-bold text-yellow-400 mb-6 text-center flex items-center justify-center gap-2",children:[i.jsx(mp,{className:"w-6 h-6"}),"Choose Your Background"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Ro.map(h=>i.jsxs("div",{className:`
                    p-6 rounded-lg border-2 cursor-pointer transition-all
                    ${a.background===h.id?"border-red-400 bg-red-900/30":"border-gray-600 bg-gray-700 hover:border-red-400"}
                  `,onClick:()=>s(x=>({...x,background:h.id})),children:[i.jsx("h4",{className:"text-xl font-bold text-yellow-400 mb-2",children:h.name}),i.jsx("p",{className:"text-gray-300 mb-4",children:h.description}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-green-400 font-semibold",children:"Bonuses: "}),Object.entries(h.bonuses).map(([x,v])=>i.jsxs("span",{className:"text-green-400",children:["+",v," ",x," "]},x))]}),Object.keys(h.penalties).length>0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-red-400 font-semibold",children:"Penalties: "}),Object.entries(h.penalties).map(([x,v])=>i.jsxs("span",{className:"text-red-400",children:[v," ",x," "]},x))]})]})]},h.id))})]}),n==="stats"&&i.jsxs("div",{children:[i.jsxs("h3",{className:"text-2xl font-bold text-yellow-400 mb-6 text-center flex items-center justify-center gap-2",children:[i.jsx(fp,{className:"w-6 h-6"}),"Distribute Attribute Points"]}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("span",{className:"text-lg font-bold",children:"Available Points: "}),i.jsx("span",{className:"text-2xl font-bold text-yellow-400",children:a.availablePoints})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto",children:Object.entries(a.stats).map(([h,x])=>i.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"font-bold capitalize",children:h}),i.jsx("span",{className:"text-xl font-bold text-yellow-400",children:x})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>c(h,-1),disabled:x<=1,className:"bg-red-600 hover:bg-red-700 disabled:bg-gray-600 disabled:cursor-not-allowed w-8 h-8 rounded flex items-center justify-center",children:"-"}),i.jsx("div",{className:"flex-1 bg-gray-600 rounded-full h-4",children:i.jsx("div",{className:"bg-gradient-to-r from-red-500 to-yellow-500 h-4 rounded-full transition-all",style:{width:`${x/10*100}%`}})}),i.jsx("button",{onClick:()=>c(h,1),disabled:x>=10||a.availablePoints<=0,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed w-8 h-8 rounded flex items-center justify-center",children:"+"})]})]},h))})]}),n==="traits"&&i.jsxs("div",{children:[i.jsxs("h3",{className:"text-2xl font-bold text-yellow-400 mb-6 text-center flex items-center justify-center gap-2",children:[i.jsx(ot,{className:"w-6 h-6"}),"Choose Traits (Optional - Max 2)"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:qo.map(h=>i.jsxs("div",{className:`
                    p-4 rounded-lg border-2 cursor-pointer transition-all
                    ${a.traits.includes(h.id)?"border-yellow-400 bg-yellow-900/30":"border-gray-600 bg-gray-700 hover:border-yellow-400"}
                    ${a.traits.length>=2&&!a.traits.includes(h.id)?"opacity-50 cursor-not-allowed":""}
                  `,onClick:()=>o(h.id),children:[i.jsx("h4",{className:"text-lg font-bold text-yellow-400 mb-2",children:h.name}),i.jsx("p",{className:"text-gray-300 mb-3",children:h.description}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"text-green-400 text-sm",children:[i.jsx("span",{className:"font-semibold",children:"Bonus: "}),h.bonus]}),i.jsxs("div",{className:"text-red-400 text-sm",children:[i.jsx("span",{className:"font-semibold",children:"Penalty: "}),h.penalty]})]})]},h.id))}),i.jsxs("div",{className:"text-center mt-6 text-gray-400",children:["Selected: ",a.traits.length,"/2"]})]}),n==="confirm"&&i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsx("h3",{className:"text-2xl font-bold text-yellow-400 mb-6 text-center",children:"Confirm Your Character"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-gray-700 rounded-lg p-6",children:[i.jsx("h4",{className:"text-xl font-bold mb-4",children:"Character Details"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Name:"})," ",a.name]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Age:"})," ",a.age]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Gender:"})," ",a.gender]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Class:"})," ",ks[a.class].name]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Background:"})," ",(u=Ro.find(h=>h.id===a.background))==null?void 0:u.name]})]}),a.biography&&i.jsxs("div",{className:"mt-4",children:[i.jsx("span",{className:"font-semibold",children:"Biography:"}),i.jsx("p",{className:"text-gray-300 mt-1",children:a.biography})]})]}),i.jsxs("div",{className:"bg-gray-700 rounded-lg p-6",children:[i.jsx("h4",{className:"text-xl font-bold mb-4",children:"Attributes"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(a.stats).map(([h,x])=>i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{className:"capitalize",children:[h,":"]}),i.jsx("span",{className:"font-bold text-yellow-400",children:x})]},h))}),a.traits.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h5",{className:"font-semibold mb-2",children:"Traits:"}),a.traits.map(h=>{const x=qo.find(v=>v.id===h);return x?i.jsxs("div",{className:"text-sm text-yellow-400",children:["• ",x.name]},h):null})]})]})]})]}),i.jsxs("div",{className:"flex justify-between mt-8",children:[i.jsxs("button",{onClick:y,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition-all duration-200 flex items-center gap-2",children:[i.jsx(kn,{className:"w-4 h-4"}),"Back"]}),i.jsxs("button",{onClick:m,disabled:!d(),className:`
              font-bold py-3 px-6 rounded-lg transition-all duration-200 flex items-center gap-2
              ${d()?"bg-red-600 hover:bg-red-700 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}
            `,children:[n==="confirm"?"Create Character":"Next",i.jsx(eu,{className:"w-4 h-4"})]})]})]})})},jt=(e,t,n,r=!0)=>({x:e,y:t,type:n,walkable:r,sprite:n,discovered:!0,visible:!0,description:`${n} terrain`}),qp={id:"general_store",name:"General Store",type:"trader_post",width:12,height:10,floorType:"stone",wallType:"building",entrancePositions:[{x:6,y:9}],furnitureLayout:[{position:{x:3,y:3},type:"furniture",walkable:!1},{position:{x:4,y:3},type:"furniture",walkable:!1},{position:{x:5,y:3},type:"furniture",walkable:!1},{position:{x:8,y:2},type:"furniture",walkable:!1},{position:{x:9,y:2},type:"furniture",walkable:!1},{position:{x:8,y:7},type:"furniture",walkable:!1},{position:{x:9,y:7},type:"furniture",walkable:!1}],npcTemplates:[{id:"shopkeeper",name:"Shopkeeper",type:"trader",position:{x:4,y:4},inventory:["stimpak","rad_away","scrap_metal","combat_knife","nuka_cola"],dialogue:[{id:"greeting",text:"Welcome! I have supplies for any wasteland wanderer.",choices:[{id:"trade",text:"Show me your wares",action:"open_trade"},{id:"leave",text:"Just browsing",nextNode:"goodbye"}]},{id:"goodbye",text:"Come back anytime!",choices:[]}],faction:"neutral"}],lootableTemplates:[{position:{x:2,y:2},type:"container",items:["scrap_metal","rusty_can"]}],ambientMusic:"shop_ambient"},zp={id:"clinic",name:"Medical Clinic",type:"clinic",width:14,height:10,floorType:"stone",wallType:"building",entrancePositions:[{x:7,y:9}],furnitureLayout:[{position:{x:2,y:2},type:"furniture",walkable:!1},{position:{x:3,y:2},type:"furniture",walkable:!1},{position:{x:10,y:2},type:"furniture",walkable:!1},{position:{x:11,y:2},type:"furniture",walkable:!1},{position:{x:6,y:5},type:"furniture",walkable:!1},{position:{x:7,y:5},type:"furniture",walkable:!1}],npcTemplates:[{id:"doctor",name:"Doctor",type:"trader",position:{x:7,y:6},inventory:["stimpak","rad_away","buffout","mentats","psycho"],dialogue:[{id:"greeting",text:"Welcome to my clinic. I can heal your wounds or sell medical supplies.",choices:[{id:"heal",text:"I need healing",action:"heal_player"},{id:"trade",text:"Show me your medical supplies",action:"open_trade"},{id:"leave",text:"I'm fine",nextNode:"goodbye"}]},{id:"goodbye",text:"Stay healthy out there.",choices:[]}],faction:"medical"}],lootableTemplates:[{position:{x:11,y:3},type:"locker",items:["stimpak","rad_away"],locked:!0}],ambientMusic:"medical_ambient"},Ap={id:"weapon_shop",name:"Weapon Shop",type:"armory",width:15,height:12,floorType:"stone",wallType:"building",entrancePositions:[{x:7,y:11}],furnitureLayout:[{position:{x:4,y:4},type:"furniture",walkable:!1},{position:{x:5,y:4},type:"furniture",walkable:!1},{position:{x:6,y:4},type:"furniture",walkable:!1},{position:{x:2,y:2},type:"furniture",walkable:!1},{position:{x:2,y:3},type:"furniture",walkable:!1},{position:{x:12,y:2},type:"furniture",walkable:!1},{position:{x:12,y:3},type:"furniture",walkable:!1},{position:{x:8,y:8},type:"furniture",walkable:!1},{position:{x:9,y:8},type:"furniture",walkable:!1}],npcTemplates:[{id:"gunsmith",name:"Gunsmith",type:"trader",position:{x:5,y:5},inventory:["combat_knife","assault_rifle","combat_armor","scrap_metal","electronics"],dialogue:[{id:"greeting",text:"Looking for quality weapons and armor? You've come to the right place.",choices:[{id:"trade",text:"Show me your weapons",action:"open_trade"},{id:"repair",text:"Can you repair equipment?",nextNode:"repair_info"},{id:"leave",text:"Just looking",nextNode:"goodbye"}]},{id:"repair_info",text:"I can fix most weapons and armor. Bring me the item and some scrap metal.",choices:[{id:"trade",text:"Let me see what you have",action:"open_trade"},{id:"leave",text:"I'll think about it",nextNode:"goodbye"}]},{id:"goodbye",text:"Stay armed, stay alive!",choices:[]}],faction:"neutral"}],lootableTemplates:[{position:{x:10,y:9},type:"safe",items:["plasma_rifle","rare_earth"],locked:!0}],ambientMusic:"workshop_ambient"},Dp={id:"tavern",name:"Tavern",type:"tavern",width:18,height:14,floorType:"stone",wallType:"building",entrancePositions:[{x:9,y:13}],furnitureLayout:[{position:{x:6,y:4},type:"furniture",walkable:!1},{position:{x:7,y:4},type:"furniture",walkable:!1},{position:{x:8,y:4},type:"furniture",walkable:!1},{position:{x:9,y:4},type:"furniture",walkable:!1},{position:{x:10,y:4},type:"furniture",walkable:!1},{position:{x:3,y:7},type:"furniture",walkable:!1},{position:{x:13,y:7},type:"furniture",walkable:!1},{position:{x:3,y:10},type:"furniture",walkable:!1},{position:{x:13,y:10},type:"furniture",walkable:!1}],npcTemplates:[{id:"bartender",name:"Bartender",type:"trader",position:{x:8,y:5},inventory:["nuka_cola","purified_water","dirty_water","psycho","buffout"],dialogue:[{id:"greeting",text:"Welcome to my establishment! What can I get you?",choices:[{id:"drink",text:"I need a drink",action:"open_trade"},{id:"info",text:"Any news from the wasteland?",nextNode:"wasteland_news"},{id:"leave",text:"Maybe later",nextNode:"goodbye"}]},{id:"wasteland_news",text:"Travelers come through here all the time. Raiders to the north, strange lights in the east...",choices:[{id:"drink",text:"Interesting. How about that drink?",action:"open_trade"},{id:"leave",text:"Thanks for the info",nextNode:"goodbye"}]},{id:"goodbye",text:"Come back anytime, friend.",choices:[]}],faction:"neutral"},{id:"patron",name:"Local Patron",type:"neutral",position:{x:4,y:7},inventory:[],dialogue:[{id:"greeting",text:"Just trying to forget the wasteland for a while...",choices:[{id:"leave",text:"Enjoy your drink",nextNode:"goodbye"}]},{id:"goodbye",text:"Thanks, stranger.",choices:[]}],faction:"neutral"}],lootableTemplates:[{position:{x:15,y:3},type:"container",items:["nuka_cola","caps"]}],ambientMusic:"tavern_ambient"},$p={id:"security_office",name:"Security Office",type:"security",width:12,height:8,floorType:"stone",wallType:"building",entrancePositions:[{x:6,y:7}],furnitureLayout:[{position:{x:3,y:3},type:"furniture",walkable:!1},{position:{x:4,y:3},type:"furniture",walkable:!1},{position:{x:8,y:2},type:"furniture",walkable:!1},{position:{x:9,y:2},type:"furniture",walkable:!1}],npcTemplates:[{id:"guard_captain",name:"Guard Captain",type:"guard",position:{x:4,y:4},inventory:["combat_armor","assault_rifle","stimpak"],dialogue:[{id:"greeting",text:"This is a restricted area. State your business.",choices:[{id:"business",text:"I'm here on official business",nextNode:"official"},{id:"leave",text:"Sorry, I'll leave",nextNode:"goodbye"}]},{id:"official",text:"Alright, but don't cause any trouble.",choices:[{id:"leave",text:"Understood",nextNode:"goodbye"}]},{id:"goodbye",text:"Move along.",choices:[]}],faction:"security"}],lootableTemplates:[{position:{x:9,y:3},type:"locker",items:["combat_armor","assault_rifle"],locked:!0}],ambientMusic:"security_ambient"},re={general_store:qp,clinic:zp,weapon_shop:Ap,tavern:Dp,security_office:$p};function ie(e,t,n,r,a){const s=[];for(let o=0;o<e.height;o++){const d=[];for(let m=0;m<e.width;m++)d.push(jt(m,o,e.floorType,!0));s.push(d)}for(let o=0;o<e.width;o++)s[0][o]=jt(o,0,e.wallType,!1),s[e.height-1][o]=jt(o,e.height-1,e.wallType,!1);for(let o=0;o<e.height;o++)s[o][0]=jt(0,o,e.wallType,!1),s[o][e.width-1]=jt(e.width-1,o,e.wallType,!1);e.entrancePositions.forEach(o=>{s[o.y][o.x]=jt(o.x,o.y,e.floorType,!0),s[o.y][o.x].isEntrance=!0}),e.furnitureLayout.forEach(o=>{o.type==="furniture"?s[o.position.y][o.position.x]=jt(o.position.x,o.position.y,"ruins",o.walkable):s[o.position.y][o.position.x]=jt(o.position.x,o.position.y,o.type,o.walkable)});const l=e.npcTemplates.map(o=>({id:`${t}_${o.id}`,name:o.name,type:o.type,position:{x:o.position.x*32+16,y:o.position.y*32+16},sprite:o.type==="trader"?"trader":"npc",dialogue:o.dialogue,inventory:o.inventory.map(d=>{const m=w.find(y=>y.id===d);return m?{...m,quantity:m.stackable?Math.floor(Math.random()*5)+1:1}:null}).filter(Boolean),faction:o.faction,isHostile:!1})),c=e.lootableTemplates.map((o,d)=>({id:`${t}_loot_${d}`,position:{x:o.position.x*32+16,y:o.position.y*32+16},items:o.items.map(m=>{const y=w.find(u=>u.id===m);return y?{...y,quantity:y.stackable?Math.floor(Math.random()*3)+1:1}:null}).filter(Boolean),type:o.type,sprite:o.type,discovered:!1,looted:!1}));return{id:`${t}_interior`,width:e.width,height:e.height,tiles:s,name:n,bgMusic:e.ambientMusic,npcs:l,enemies:[],lootables:c,isInterior:!0,parentMapId:r,exitPosition:a,connections:[]}}const ru=[{id:"craterside_supply",name:"Craterside Supply",type:"trader_post",description:"Moira Brown's general store in Megaton",interiorMap:ie(re.general_store,"craterside_supply","Craterside Supply","capital_wasteland",{x:35*32+16,y:25*32+16}),entrancePosition:{x:37*32+16,y:27*32+16},exitPosition:{x:6*32+16,y:9*32+16}},{id:"megaton_clinic",name:"Megaton Clinic",type:"clinic",description:"Doc Church's medical clinic in Megaton",interiorMap:ie(re.clinic,"megaton_clinic","Megaton Clinic","capital_wasteland",{x:40*32+16,y:35*32+16}),entrancePosition:{x:42*32+16,y:37*32+16},exitPosition:{x:7*32+16,y:9*32+16}},{id:"megaton_armory",name:"Megaton Armory",type:"weapon_shop",description:"Weapons and armor shop in Megaton",interiorMap:ie(re.weapon_shop,"megaton_armory","Megaton Armory","capital_wasteland",{x:45*32+16,y:40*32+16}),entrancePosition:{x:47*32+16,y:42*32+16},exitPosition:{x:7*32+16,y:11*32+16}},{id:"megaton_saloon",name:"Megaton Saloon",type:"tavern",description:"The local watering hole in Megaton",interiorMap:ie(re.tavern,"megaton_saloon","Megaton Saloon","capital_wasteland",{x:28*32+16,y:35*32+16}),entrancePosition:{x:30*32+16,y:37*32+16},exitPosition:{x:9*32+16,y:13*32+16}},{id:"megaton_security",name:"Megaton Security Office",type:"security",description:"Sheriff Simms' security office",interiorMap:ie(re.security_office,"megaton_security","Megaton Security Office","capital_wasteland",{x:32*32+16,y:28*32+16}),entrancePosition:{x:34*32+16,y:30*32+16},exitPosition:{x:6*32+16,y:7*32+16}},{id:"rivet_city_market",name:"Rivet City Market",type:"market",description:"The bustling marketplace of Rivet City",interiorMap:ie(re.general_store,"rivet_city_market","Rivet City Market","capital_wasteland",{x:80*32+16,y:65*32+16}),entrancePosition:{x:84*32+16,y:67*32+16},exitPosition:{x:6*32+16,y:9*32+16}},{id:"rivet_city_clinic",name:"Rivet City Medical Bay",type:"clinic",description:"Advanced medical facility in Rivet City",interiorMap:ie(re.clinic,"rivet_city_clinic","Rivet City Medical Bay","capital_wasteland",{x:95*32+16,y:60*32+16}),entrancePosition:{x:97*32+16,y:62*32+16},exitPosition:{x:7*32+16,y:9*32+16}},{id:"rivet_city_armory",name:"Rivet City Armory",type:"weapon_shop",description:"High-quality weapons and armor",interiorMap:ie(re.weapon_shop,"rivet_city_armory","Rivet City Armory","capital_wasteland",{x:75*32+16,y:45*32+16}),entrancePosition:{x:77*32+16,y:47*32+16},exitPosition:{x:7*32+16,y:11*32+16}},{id:"rivet_city_bar",name:"Rivet City Bar",type:"tavern",description:"The Muddy Rudder - Rivet City's finest establishment",interiorMap:ie(re.tavern,"rivet_city_bar","The Muddy Rudder","capital_wasteland",{x:88*32+16,y:55*32+16}),entrancePosition:{x:90*32+16,y:57*32+16},exitPosition:{x:9*32+16,y:13*32+16}},{id:"rivet_city_security",name:"Rivet City Security",type:"security",description:"Rivet City security headquarters",interiorMap:ie(re.security_office,"rivet_city_security","Rivet City Security","capital_wasteland",{x:100*32+16,y:45*32+16}),entrancePosition:{x:102*32+16,y:47*32+16},exitPosition:{x:6*32+16,y:7*32+16}},{id:"canterbury_trading_post",name:"Canterbury Commons Trading Post",type:"trader_post",description:"Uncle Roe's caravan trading headquarters",interiorMap:ie(re.general_store,"canterbury_trading_post","Canterbury Commons Trading Post","capital_wasteland",{x:65*32+16,y:80*32+16}),entrancePosition:{x:67*32+16,y:82*32+16},exitPosition:{x:6*32+16,y:9*32+16}},{id:"canterbury_clinic",name:"Canterbury Medical",type:"clinic",description:"Small medical clinic in Canterbury Commons",interiorMap:ie(re.clinic,"canterbury_clinic","Canterbury Medical","capital_wasteland",{x:50*32+16,y:85*32+16}),entrancePosition:{x:52*32+16,y:87*32+16},exitPosition:{x:7*32+16,y:9*32+16}},{id:"canterbury_inn",name:"Canterbury Inn",type:"tavern",description:"Rest stop for weary travelers",interiorMap:ie(re.tavern,"canterbury_inn","Canterbury Inn","capital_wasteland",{x:58*32+16,y:78*32+16}),entrancePosition:{x:60*32+16,y:80*32+16},exitPosition:{x:9*32+16,y:13*32+16}},{id:"tenpenny_lobby",name:"Tenpenny Tower Lobby",type:"luxury",description:"Luxurious lobby of Tenpenny Tower",interiorMap:ie(re.tavern,"tenpenny_lobby","Tenpenny Tower Lobby","capital_wasteland",{x:15*32+16,y:80*32+16}),entrancePosition:{x:19*32+16,y:85*32+16},exitPosition:{x:9*32+16,y:13*32+16}},{id:"tenpenny_shop",name:"Tenpenny Tower Shop",type:"luxury_store",description:"High-end goods for the wealthy",interiorMap:ie(re.general_store,"tenpenny_shop","Tenpenny Tower Shop","capital_wasteland",{x:10*32+16,y:95*32+16}),entrancePosition:{x:12*32+16,y:97*32+16},exitPosition:{x:6*32+16,y:9*32+16}},{id:"tenpenny_clinic",name:"Tenpenny Medical Suite",type:"luxury_clinic",description:"Premium medical care for tower residents",interiorMap:ie(re.clinic,"tenpenny_clinic","Tenpenny Medical Suite","capital_wasteland",{x:25*32+16,y:92*32+16}),entrancePosition:{x:27*32+16,y:94*32+16},exitPosition:{x:7*32+16,y:9*32+16}},{id:"arefu_store",name:"Arefu General Store",type:"general_store",description:"Small general store in Arefu",interiorMap:ie(re.general_store,"arefu_store","Arefu General Store","capital_wasteland",{x:85*32+16,y:25*32+16}),entrancePosition:{x:87*32+16,y:27*32+16},exitPosition:{x:6*32+16,y:9*32+16}},{id:"arefu_clinic",name:"Arefu Medical",type:"clinic",description:"Basic medical care in Arefu",interiorMap:ie(re.clinic,"arefu_clinic","Arefu Medical","capital_wasteland",{x:95*32+16,y:20*32+16}),entrancePosition:{x:97*32+16,y:22*32+16},exitPosition:{x:7*32+16,y:9*32+16}},{id:"scrapyard_shop",name:"Scrapyard Trading Post",type:"scrap_dealer",description:"Dealing in salvage and scrap",interiorMap:ie(re.general_store,"scrapyard_shop","Scrapyard Trading Post","capital_wasteland",{x:70*32+16,y:25*32+16}),entrancePosition:{x:72*32+16,y:27*32+16},exitPosition:{x:6*32+16,y:9*32+16}},{id:"lone_wanderer_clinic",name:"Wasteland Medical",type:"field_clinic",description:"Mobile medical services",interiorMap:ie(re.clinic,"lone_wanderer_clinic","Wasteland Medical","capital_wasteland",{x:105*32+16,y:85*32+16}),entrancePosition:{x:107*32+16,y:87*32+16},exitPosition:{x:7*32+16,y:9*32+16}}],Op=e=>ru.find(t=>t.id===e),Fp=(e,t=48)=>ru.find(n=>Math.sqrt(Math.pow(n.entrancePosition.x-e.x,2)+Math.pow(n.entrancePosition.y-e.y,2))<=t);class Hp{constructor(t,n,r){this.keys={},this.lastTime=0,this.animationId=null,this.loadedMaps={},this.isTransitioning=!1,this.transitionCooldown=0,this.edgeTimer=0,this.isAtEdge=!1,this.edgeDirection=null,this.tileSprites={},this.characterSprites={},this.uiSprites={},this.particleSystem=[],this.lightingSystem=[],this.frameCount=0,this.lastFpsTime=0,this.targetFps=60,this.frameInterval=1e3/this.targetFps,this.lastRenderTime=0,this.visibleTileCache={},this.lastCameraPosition={x:-1,y:-1},this.renderBounds={startX:0,startY:0,endX:0,endY:0},this.isLowPerformanceDevice=!1,this.tileRenderCache=null,this.cacheInvalidated=!0,this.lastPlayerPosition={x:-1,y:-1},this.renderSkipCounter=0,this.maxRenderSkip=2,this.canvas=t,this.ctx=t.getContext("2d"),this.gameState={...n},this.settings=r||{lowGraphicsMode:!1},this.canvas.width=1024,this.canvas.height=768,this.initializeGraphics(),this.detectPerformance(),this.loadedMaps[this.gameState.currentMap.id]=this.gameState.currentMap,this.setupEventListeners(),this.gameLoop(0)}initializeGraphics(){this.createTileSprites(),this.createCharacterSprites(),this.createUISprites(),this.initializeLighting()}createTileSprites(){const n=document.createElement("canvas");n.width=n.height=32;const r=n.getContext("2d");r.fillStyle="#4a7c59",r.fillRect(0,0,32,32);for(let f=0;f<20;f++)r.fillStyle=`rgba(${60+Math.random()*40}, ${120+Math.random()*40}, ${70+Math.random()*30}, 0.6)`,r.fillRect(Math.random()*32,Math.random()*32,2,4);this.tileSprites.grass=n;const a=document.createElement("canvas");a.width=a.height=32;const s=a.getContext("2d");s.fillStyle="#696969",s.fillRect(0,0,32,32),s.strokeStyle="#555555",s.lineWidth=1;for(let f=0;f<32;f+=8)s.beginPath(),s.moveTo(0,f),s.lineTo(32,f),s.stroke();for(let f=0;f<32;f+=16)s.beginPath(),s.moveTo(f,0),s.lineTo(f,32),s.stroke();this.tileSprites.stone=a;const l=document.createElement("canvas");l.width=l.height=32;const c=l.getContext("2d");c.fillStyle="#8b4513",c.fillRect(0,0,32,32);for(let f=0;f<30;f++)c.fillStyle=`rgba(${100+Math.random()*50}, ${50+Math.random()*30}, ${10+Math.random()*20}, 0.4)`,c.fillRect(Math.random()*32,Math.random()*32,1,1);this.tileSprites.dirt=l;const o=document.createElement("canvas");o.width=o.height=32;const d=o.getContext("2d"),m=d.createLinearGradient(0,0,32,32);m.addColorStop(0,"#4682b4"),m.addColorStop(.5,"#5a9bd4"),m.addColorStop(1,"#4682b4"),d.fillStyle=m,d.fillRect(0,0,32,32),d.strokeStyle="rgba(255, 255, 255, 0.3)",d.lineWidth=1;for(let f=0;f<3;f++)d.beginPath(),d.arc(Math.random()*32,Math.random()*32,4+Math.random()*4,0,Math.PI*2),d.stroke();this.tileSprites.water=o;const y=document.createElement("canvas");y.width=y.height=32;const u=y.getContext("2d");u.fillStyle="#654321",u.fillRect(0,0,32,32),u.strokeStyle="#543a1a",u.lineWidth=1;for(let f=4;f<32;f+=8)u.beginPath(),u.moveTo(0,f),u.lineTo(32,f),u.stroke();this.tileSprites.building=y;const h=document.createElement("canvas");h.width=h.height=32;const x=h.getContext("2d");x.fillStyle="#8B4513",x.fillRect(0,0,32,32),x.fillStyle="#A0522D",x.fillRect(2,2,28,28),x.strokeStyle="#654321",x.lineWidth=2,x.strokeRect(0,0,32,32),this.tileSprites.furniture=h;const v=document.createElement("canvas");v.width=v.height=32;const N=v.getContext("2d");N.fillStyle="#2f2f2f",N.fillRect(0,0,32,32);for(let f=0;f<10;f++)N.fillStyle=`rgba(${80+Math.random()*40}, ${80+Math.random()*40}, ${80+Math.random()*40}, 0.8)`,N.fillRect(Math.random()*32,Math.random()*32,3+Math.random()*4,3+Math.random()*4);this.tileSprites.ruins=v;const g=document.createElement("canvas");g.width=g.height=32;const p=g.getContext("2d");p.fillStyle="#f4a460",p.fillRect(0,0,32,32);for(let f=0;f<50;f++)p.fillStyle=`rgba(${240+Math.random()*15}, ${160+Math.random()*20}, ${90+Math.random()*10}, 0.3)`,p.fillRect(Math.random()*32,Math.random()*32,1,1);this.tileSprites.sand=g}createCharacterSprites(){const n=document.createElement("canvas");n.width=n.height=24;const r=n.getContext("2d");r.fillStyle="#4a90e2",r.fillRect(6,8,12,16),r.fillStyle="#fdbcb4",r.fillRect(8,2,8,8),r.fillStyle="#4a90e2",r.fillRect(2,10,4,10),r.fillRect(18,10,4,10),r.fillStyle="#2c5aa0",r.fillRect(8,20,3,4),r.fillRect(13,20,3,4),this.characterSprites.player=n;const a=document.createElement("canvas");a.width=a.height=24;const s=a.getContext("2d");s.fillStyle="#44ff44",s.fillRect(6,8,12,16),s.fillStyle="#fdbcb4",s.fillRect(8,2,8,8),s.fillStyle="#44ff44",s.fillRect(2,10,4,10),s.fillRect(18,10,4,10),s.fillStyle="#2c8c2c",s.fillRect(8,20,3,4),s.fillRect(13,20,3,4),this.characterSprites.npc=a;const l=document.createElement("canvas");l.width=l.height=24;const c=l.getContext("2d");c.fillStyle="#ff0000",c.fillRect(6,8,12,16),c.fillStyle="#cc0000",c.fillRect(8,2,8,8),c.fillStyle="#ff0000",c.fillRect(2,10,4,10),c.fillRect(18,10,4,10),c.fillStyle="#aa0000",c.fillRect(8,20,3,4),c.fillRect(13,20,3,4),this.characterSprites.enemy=l}createUISprites(){const t=document.createElement("canvas");t.width=200,t.height=20;const n=t.getContext("2d");n.fillStyle="#333333",n.fillRect(0,0,200,20),n.strokeStyle="#666666",n.lineWidth=2,n.strokeRect(0,0,200,20),this.uiSprites.healthBg=t}initializeLighting(){this.lightingSystem=[],this.lightingSystem.push({position:{x:0,y:0},radius:100,intensity:.8,color:"#ffffff"})}detectPerformance(){const t=navigator.userAgent.toLowerCase(),n=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(t),r=!window.requestAnimationFrame||!window.performance,a=document.createElement("canvas"),l=!!(a.getContext("webgl")||a.getContext("experimental-webgl"));this.isLowPerformanceDevice=n||r||!l,this.isLowPerformanceDevice&&(this.targetFps=30,this.frameInterval=1e3/this.targetFps,this.settings.lowGraphicsMode=!0,this.maxRenderSkip=3)}setupEventListeners(){window.addEventListener("keydown",t=>{this.keys[t.key.toLowerCase()]=!0,this.handleKeyPress(t.key.toLowerCase())}),window.addEventListener("keyup",t=>{this.keys[t.key.toLowerCase()]=!1}),window.addEventListener("keydown",t=>{["w","a","s","d","arrowup","arrowdown","arrowleft","arrowright"," ","f","i","e","c","q","m","escape"].includes(t.key.toLowerCase())&&t.preventDefault()}),document.addEventListener("visibilitychange",()=>{document.hidden?this.pauseGame():this.resumeGame()})}pauseGame(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null)}resumeGame(){this.animationId||(this.lastTime=performance.now(),this.gameLoop(this.lastTime))}handleKeyPress(t){if(this.gameState.gameMode==="exploration")switch(t){case"i":this.gameState.gameMode="inventory",this.notifyStateChange();break;case"e":this.gameState.gameMode="equipment",this.notifyStateChange();break;case"c":this.gameState.gameMode="character",this.notifyStateChange();break;case"q":this.gameState.gameMode="quests",this.notifyStateChange();break;case"m":this.gameState.gameMode="map",this.notifyStateChange();break;case"escape":this.gameState.currentMap.isInterior&&this.gameState.previousMap&&this.exitBuilding();break;case"f1":this.gameState.devMode=this.gameState.devMode||{enabled:!1,selectedTool:"quest",questEditor:{id:"",title:"",description:"",objectives:[],rewards:[],requiredLevel:1},npcEditor:{id:"",name:"",type:"neutral",position:{x:400,y:400},dialogue:[],inventory:[],faction:"neutral",isHostile:!1},itemEditor:{id:"",name:"",type:"material",rarity:"common",description:"",stats:{},value:10,stackable:!1}},this.gameState.devMode.enabled=!this.gameState.devMode.enabled,this.notifyStateChange();break;case" ":case"f":this.handleInteraction();break}}handleInteraction(){var d;const t=this.gameState.player.position,n=64,r=Math.floor(t.x/32),a=Math.floor(t.y/32);for(let m=-1;m<=1;m++)for(let y=-1;y<=1;y++){const u=a+m,h=r+y,x=(d=this.gameState.currentMap.tiles[u])==null?void 0:d[h];if(x!=null&&x.isEnterable&&x.buildingId){this.enterBuilding(x.buildingId);return}}const s=Fp(t,n);if(s){this.enterBuilding(s.id);return}const l=this.gameState.currentMap.npcs.find(m=>Math.sqrt(Math.pow(m.position.x-t.x,2)+Math.pow(m.position.y-t.y,2))<=n);if(l){this.startDialogue(l);return}const c=this.gameState.currentMap.enemies.find(m=>Math.sqrt(Math.pow(m.position.x-t.x,2)+Math.pow(m.position.y-t.y,2))<=n);if(c){this.startCombat([c]);return}const o=this.gameState.currentMap.lootables.find((m,y)=>m.looted?!1:Math.sqrt(Math.pow(m.position.x-t.x,2)+Math.pow(m.position.y-t.y,2))<=n?(m.looted=!0,!0):!1);if(o&&this.lootableCallback){this.lootableCallback(o),setTimeout(()=>{const m=this.gameState.currentMap.lootables.findIndex(y=>y.id===o.id);m>=0&&(this.gameState.currentMap.lootables.splice(m,1),this.notifyStateChange())},100);return}}startDialogue(t){if(t.dialogue.length>0){const n=t.dialogue[0];this.gameState.dialogue={npcId:t.id,currentNode:n.id,history:[`${t.name}: ${n.text}`],choices:n.choices},this.gameState.gameMode="dialogue",this.notifyStateChange()}}startCombat(t){const n=[this.gameState.player,...t],r=[...n].sort((a,s)=>{const l="stats"in a?a.stats.agility:5;return("stats"in s?s.stats.agility:5)-l});this.gameState.combat={participants:n,turnOrder:r,currentTurn:0,round:1,selectedTargets:[],animations:[],battleground:this.gameState.currentMap.tiles,weather:this.gameState.weather,timeOfDay:"day",isPlayerTurn:r[0]===this.gameState.player,combatLog:["Combat begins!"]},this.gameState.gameMode="combat",this.notifyStateChange()}performAttack(t,n){var y,u,h,x;if(!this.gameState.combat)return;let r=10;"damage"in t?r=t.damage:"stats"in t&&t.stats.strength&&(r=Math.floor(t.stats.strength*1.5));let a=r;"equipment"in t&&((u=(y=t.equipment.weapon)==null?void 0:y.stats)!=null&&u.damage)&&(a+=t.equipment.weapon.stats.damage);const s="defense"in n?n.defense:0,l="equipment"in n&&((x=(h=n.equipment.armor)==null?void 0:h.stats)!=null&&x.defense)?n.equipment.armor.stats.defense:0,c=s+l,o=Math.max(1,a-c);n.health=Math.max(0,n.health-o),"class"in t?this.gameState.statistics.damageDealt+=o:"class"in n&&(this.gameState.statistics.damageTaken+=o);const d="name"in t?t.name:"Enemy",m="name"in n?n.name:"Enemy";if(this.gameState.combat.combatLog.push(`${d} attacks ${m} for ${o} damage!`),n.health<=0){this.gameState.combat.combatLog.push(`${m} is defeated!`);const v=this.gameState.combat.participants.indexOf(n);if(v>-1&&(this.gameState.combat.participants.splice(v,1),this.gameState.combat.turnOrder=this.gameState.combat.turnOrder.filter(N=>N!==n),this.gameState.combat.currentTurn>=this.gameState.combat.turnOrder.length&&(this.gameState.combat.currentTurn=0)),"class"in t&&"damage"in n){const N=Math.floor(n.level*10);this.gameState.player.experience+=N,this.gameState.combat.combatLog.push(`${d} gains ${N} experience!`),this.gameState.player.experience>=this.gameState.player.experienceToNext&&this.levelUpPlayer()}}}performSkill(t,n,r){if(this.gameState.combat){if(r.damage){const a=Math.max(1,r.damage);n.health=Math.max(0,n.health-a),"class"in t?this.gameState.statistics.damageDealt+=a:"class"in n&&(this.gameState.statistics.damageTaken+=a);const s="name"in t?t.name:"Enemy",l="name"in n?n.name:"Enemy";this.gameState.combat.combatLog.push(`${s} uses ${r.name} on ${l} for ${a} damage!`)}if(r.healing){const a=r.healing;n.health=Math.min(n.maxHealth,n.health+a),"class"in t&&(this.gameState.statistics.healingDone+=a);const s="name"in t?t.name:"Enemy",l="name"in n?n.name:"Enemy";this.gameState.combat.combatLog.push(`${s} heals ${l} for ${a} health!`)}r.statusEffects&&r.statusEffects.forEach(a=>{n.statusEffects||(n.statusEffects=[]),n.statusEffects.push({...a,remainingTurns:a.duration}),"name"in t&&t.name;const s="name"in n?n.name:"Enemy";this.gameState.combat.combatLog.push(`${s} is affected by ${a.name}!`)})}}levelUpPlayer(){this.gameState.player.level++,this.gameState.player.experience=0,this.gameState.player.experienceToNext=this.gameState.player.level*100,this.gameState.player.maxHealth+=10,this.gameState.player.health=this.gameState.player.maxHealth,this.gameState.player.maxEnergy+=5,this.gameState.player.energy=this.gameState.player.maxEnergy,this.gameState.player.stats.strength+=2,this.gameState.player.stats.agility+=1,this.gameState.player.stats.intelligence+=1,this.gameState.player.stats.endurance+=2,this.gameState.combat&&this.gameState.combat.combatLog.push(`${this.gameState.player.name} reached level ${this.gameState.player.level}!`)}updatePlayerMovement(t){if(this.gameState.gameMode!=="exploration"||this.isTransitioning)return;this.transitionCooldown>0&&(this.transitionCooldown-=t);const r=(this.isLowPerformanceDevice?96:128)*(t/1e3);let a=this.gameState.player.position.x,s=this.gameState.player.position.y,l=!1,c=this.gameState.player.direction,o=0,d=0;if((this.keys.w||this.keys.arrowup)&&(d=-1),(this.keys.s||this.keys.arrowdown)&&(d=1),(this.keys.a||this.keys.arrowleft)&&(o=-1),(this.keys.d||this.keys.arrowright)&&(o=1),o!==0&&d!==0&&(o*=.707,d*=.707),(o!==0||d!==0)&&(a+=o*r,s+=d*r,l=!0,o>0?c="right":o<0?c="left":d>0?c="down":d<0&&(c="up"),this.gameState.player.direction=c),l){const m=this.gameState.currentMap.width*32,y=this.gameState.currentMap.height*32;if((a<16||a>=m-16||s<16||s>=y-16)&&this.transitionCooldown<=0){let v=null;if(a<16?v="west":a>=m-16?v="east":s<16?v="north":s>=y-16&&(v="south"),!this.isAtEdge||this.edgeDirection!==v)this.isAtEdge=!0,this.edgeDirection=v,this.edgeTimer=0;else if(this.edgeTimer+=t,this.edgeTimer>=2e3){this.handleMapTransition(a,s,m,y);return}}else this.isAtEdge=!1,this.edgeDirection=null,this.edgeTimer=0;const h=Math.floor(a/32),x=Math.floor(s/32);this.isValidPosition(h,x)&&(this.gameState.player.position.x=a,this.gameState.player.position.y=s,this.gameState.player.isMoving=!0,this.lightingSystem[0].position={x:a,y:s},(Math.abs(a-this.lastPlayerPosition.x)>8||Math.abs(s-this.lastPlayerPosition.y)>8)&&(this.updateCamera(),this.updateVisibility(),this.lastPlayerPosition={x:a,y:s},this.cacheInvalidated=!0),this.gameState.statistics.distanceTraveled+=r)}else this.gameState.player.isMoving=!1}handleMapTransition(t,n,r,a){if(this.isTransitioning||this.transitionCooldown>0)return;this.isAtEdge=!1,this.edgeDirection=null,this.edgeTimer=0,this.isTransitioning=!0,this.transitionCooldown=1e3;let s=null;if(t<16?s="west":t>=r-16?s="east":n<16?s="north":n>=a-16&&(s="south"),!s){this.isTransitioning=!1;return}const l=this.gameState.currentMap.connections.find(u=>u.direction===s);if(!l){this.isTransitioning=!1;return}let c=this.loadedMaps[l.targetMapId];if(!c){const u=Zd[l.targetMapId];if(u)c=u(),this.loadedMaps[l.targetMapId]=c;else{this.isTransitioning=!1;return}}let o;const d=64;switch(s){case"north":o={x:Math.max(d,Math.min(l.toPosition.x,(c.width-2)*32)),y:(c.height-3)*32};break;case"south":o={x:Math.max(d,Math.min(l.toPosition.x,(c.width-2)*32)),y:d};break;case"east":o={x:d,y:Math.max(d,Math.min(l.toPosition.y,(c.height-2)*32))};break;case"west":o={x:(c.width-3)*32,y:Math.max(d,Math.min(l.toPosition.y,(c.height-2)*32))};break;default:this.isTransitioning=!1;return}this.gameState.currentMap=c,this.gameState.player.position={...o};const m=Math.floor(this.gameState.player.position.x/32),y=Math.floor(this.gameState.player.position.y/32);if(!this.isValidPosition(m,y)){let u=!1;for(let h=1;h<=10&&!u;h++)for(let x=-h;x<=h&&!u;x++)for(let v=-h;v<=h&&!u;v++)if(Math.abs(v)===h||Math.abs(x)===h){const N=m+v,g=y+x;this.isValidPosition(N,g)&&(this.gameState.player.position.x=N*32+16,this.gameState.player.position.y=g*32+16,u=!0)}}this.visibleTileCache={},this.lastCameraPosition={x:-1,y:-1},this.updateCamera(),this.updateVisibility(),this.notifyStateChange(),setTimeout(()=>{this.isTransitioning=!1},500)}isValidPosition(t,n){return t<0||n<0||n>=this.gameState.currentMap.tiles.length||t>=this.gameState.currentMap.tiles[0].length?!1:this.gameState.currentMap.tiles[n][t].walkable}updateCamera(){var d;const t=this.canvas.width/2,n=this.canvas.height/2,r=this.gameState.player.position.x-t,a=this.gameState.player.position.y-n,s=this.gameState.currentMap.tiles.length,l=((d=this.gameState.currentMap.tiles[0])==null?void 0:d.length)||0,c=l*32,o=s*32;this.gameState.camera.x=Math.max(0,Math.min(r,c-this.canvas.width)),this.gameState.camera.y=Math.max(0,Math.min(a,o-this.canvas.height)),(Math.abs(this.gameState.camera.x-this.lastCameraPosition.x)>32||Math.abs(this.gameState.camera.y-this.lastCameraPosition.y)>32)&&(this.renderBounds.startX=Math.max(0,Math.floor(this.gameState.camera.x/32)-1),this.renderBounds.startY=Math.max(0,Math.floor(this.gameState.camera.y/32)-1),this.renderBounds.endX=Math.min(this.renderBounds.startX+Math.ceil(this.canvas.width/32)+3,l),this.renderBounds.endY=Math.min(this.renderBounds.startY+Math.ceil(this.canvas.height/32)+3,s),this.lastCameraPosition={...this.gameState.camera},this.cacheInvalidated=!0)}updateVisibility(){var y;const t=Math.floor(this.gameState.player.position.x/32),n=Math.floor(this.gameState.player.position.y/32),r=this.isLowPerformanceDevice?6:10,a=this.gameState.currentMap.tiles.length,s=((y=this.gameState.currentMap.tiles[0])==null?void 0:y.length)||0;(!this.gameState.visibilityMap||this.gameState.visibilityMap.length!==a)&&(this.gameState.visibilityMap=Array(a).fill(null).map(()=>Array(s).fill(!1)));const l={startX:Math.max(0,t-r-2),startY:Math.max(0,n-r-2),endX:Math.min(s,t+r+3),endY:Math.min(a,n+r+3)};for(let u=l.startY;u<l.endY;u++)for(let h=l.startX;h<l.endX;h++)u>=0&&u<a&&h>=0&&h<s&&(this.gameState.currentMap.tiles[u][h].visible=!1);const c=Math.max(0,n-r),o=Math.min(a,n+r+1),d=Math.max(0,t-r),m=Math.min(s,t+r+1);for(let u=c;u<o;u++)for(let h=d;h<m;h++)u>=0&&u<a&&h>=0&&h<s&&Math.sqrt(Math.pow(h-t,2)+Math.pow(u-n,2))<=r&&(this.gameState.currentMap.tiles[u][h].visible=!0,this.gameState.currentMap.tiles[u][h].discovered=!0,this.gameState.visibilityMap[u][h]=!0)}gameLoop(t){const n=t-this.lastTime;n>=this.frameInterval&&(this.lastTime=t-n%this.frameInterval,this.updatePlayerMovement(n),this.updateGameTime(n),this.updateParticles(n),this.renderSkipCounter>=this.maxRenderSkip||t-this.lastRenderTime>=this.frameInterval*2?(this.render(),this.lastRenderTime=t,this.renderSkipCounter=0):this.renderSkipCounter++),this.animationId=requestAnimationFrame(r=>this.gameLoop(r))}updateGameTime(t){this.gameState.gameTime+=t/1e3,this.gameState.statistics.playtime+=t/1e3;const n=24*60;this.gameState.dayNightCycle=this.gameState.gameTime%n/n}updateParticles(t){this.particleSystem=this.particleSystem.filter(n=>(n.life-=t/1e3,n.position.x+=n.velocity.x*t/1e3,n.position.y+=n.velocity.y*t/1e3,n.velocity.y+=50*t/1e3,n.life>0))}render(){const t=this.ctx.createLinearGradient(0,0,0,this.canvas.height);if(this.gameState.currentMap.isInterior)t.addColorStop(0,"#2a2a2a"),t.addColorStop(1,"#1a1a1a");else{const n=this.gameState.dayNightCycle;n<.25||n>.75?(t.addColorStop(0,"#0a0a2a"),t.addColorStop(1,"#000015")):n<.5?(t.addColorStop(0,"#87CEEB"),t.addColorStop(1,"#98D8E8")):(t.addColorStop(0,"#FF6B35"),t.addColorStop(1,"#F7931E"))}this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.renderTiles(),this.renderLootables(),this.renderNPCs(),this.renderEnemies(),this.renderPlayer(),this.renderParticles(),this.renderLighting(),this.renderUI(),this.isAtEdge&&this.edgeTimer>0&&this.renderEdgeTimer()}renderEdgeTimer(){const t=this.edgeTimer/2e3,n=300,r=30,a=(this.canvas.width-n)/2,s=50;this.ctx.fillStyle="rgba(0, 0, 0, 0.8)",this.ctx.fillRect(a-20,s-20,n+40,r+60),this.ctx.fillStyle="#333333",this.ctx.fillRect(a,s,n,r);const l=this.ctx.createLinearGradient(a,s,a+n,s);l.addColorStop(0,"#ffaa00"),l.addColorStop(1,"#ff6600"),this.ctx.fillStyle=l,this.ctx.fillRect(a,s,n*t,r),this.ctx.strokeStyle="#ffffff",this.ctx.lineWidth=2,this.ctx.strokeRect(a,s,n,r),this.ctx.fillStyle="#ffffff",this.ctx.font="bold 16px Arial",this.ctx.textAlign="center",this.ctx.fillText(`Transitioning to ${this.edgeDirection}... ${Math.ceil((2e3-this.edgeTimer)/1e3)}s`,this.canvas.width/2,s+r+35)}renderTiles(){var o;const t=this.gameState.currentMap.tiles.length,n=((o=this.gameState.currentMap.tiles[0])==null?void 0:o.length)||0,r=this.gameState.currentMap.isInterior,a=Math.max(0,Math.min(this.renderBounds.startY,t-1)),s=Math.min(this.renderBounds.endY,t),l=Math.max(0,Math.min(this.renderBounds.startX,n-1)),c=Math.min(this.renderBounds.endX,n);for(let d=a;d<s;d++)for(let m=l;m<c;m++){if(!this.gameState.currentMap.tiles[d]||!this.gameState.currentMap.tiles[d][m])continue;const y=this.gameState.currentMap.tiles[d][m];if(!r&&!y.discovered)continue;const u=m*32-this.gameState.camera.x,h=d*32-this.gameState.camera.y;if(!(u<-32||u>this.canvas.width||h<-32||h>this.canvas.height)){if(y.type!=="building"){const x=this.tileSprites[y.type];x?this.ctx.drawImage(x,u,h):(this.ctx.fillStyle=this.getTileColor(y.type),this.ctx.fillRect(u,h,32,32))}else this.renderBuilding(y,u,h);!r&&!y.visible&&(this.ctx.fillStyle="rgba(0, 0, 0, 0.6)",this.ctx.fillRect(u,h,32,32)),!r&&y.isEnterable&&y.visible&&(this.ctx.fillStyle="rgba(255, 255, 0, 0.8)",this.ctx.fillRect(u+8,h+8,16,16),this.ctx.fillStyle="#000000",this.ctx.font="bold 14px Arial",this.ctx.textAlign="center",this.ctx.fillText("E",u+16,h+20))}}}renderBuilding(t,n,r){this.ctx.fillStyle=this.getBuildingColor(t.buildingType||"default"),this.ctx.fillRect(n,r,32,32),this.settings.lowGraphicsMode||(this.ctx.save(),this.ctx.globalAlpha=.3,this.ctx.fillStyle="#000000",this.ctx.fillRect(n+2,r+2,30,30),this.ctx.globalAlpha=1,this.ctx.fillStyle=this.getBuildingColor(t.buildingType||"default"),this.ctx.fillRect(n,r,32,32),this.ctx.fillStyle="rgba(255, 255, 255, 0.2)",this.ctx.fillRect(n,r,32,4),this.ctx.fillRect(n,r,4,32),t.buildingType!=="ruins"&&(this.ctx.fillStyle="#ffeb3b",this.ctx.fillRect(n+8,r+8,4,4),this.ctx.fillRect(n+20,r+8,4,4),this.ctx.fillRect(n+8,r+20,4,4),this.ctx.fillRect(n+20,r+20,4,4)),t.isEntrance&&(this.ctx.fillStyle="#4CAF50",this.ctx.fillRect(n+14,r+28,4,4)),this.ctx.restore())}getBuildingColor(t){switch(t){case"settlement":return"#8D6E63";case"trader_post":return"#4CAF50";case"clinic":return"#F44336";case"workshop":return"#607D8B";case"tavern":return"#9C27B0";case"security":return"#2196F3";case"vault":return"#00BCD4";case"luxury_tower":return"#FF9800";case"ruins":return"#424242";default:return"#795548"}}renderEnhancedTile(t,n,r){let a=this.getTileColor(t.type);this.gameState.currentMap.isInterior?(t.visible=!0,t.discovered=!0):!t.visible&&t.discovered&&(a=this.darkenColor(a,.5)),!this.settings.lowGraphicsMode&&!this.gameState.currentMap.isInterior?this.renderTileTexture(t.type,n,r,a):(this.ctx.fillStyle=a,this.ctx.fillRect(n,r,32,32),this.gameState.currentMap.isInterior&&this.renderInteriorTile(t,n,r)),t.visible&&!this.settings.lowGraphicsMode&&!this.gameState.currentMap.isInterior&&this.renderTileDetails(t,n,r)}renderInteriorTile(t,n,r){const a=this.ctx;if(t.type==="stone"){a.fillStyle="#8D6E63",a.fillRect(n,r,32,32),a.strokeStyle="#795548",a.lineWidth=.5;for(let s=0;s<4;s++)a.beginPath(),a.moveTo(n,r+s*8),a.lineTo(n+32,r+s*8),a.stroke()}(t.type==="building"||t.type==="furniture")&&(a.fillStyle="#5D4037",a.fillRect(n,r,32,32),a.fillStyle="#4E342E",a.fillRect(n+2,r+2,28,28),a.fillStyle="#3E2723",a.fillRect(n+28,r,4,32),a.fillRect(n,r+28,32,4)),(t.isEntrance||t.isExit)&&(a.fillStyle="#FFD54F",a.fillRect(n+8,r+8,16,16),a.strokeStyle="#FF9800",a.lineWidth=2,a.strokeRect(n+6,r+6,20,20))}renderTileTexture(t,n,r,a){switch(this.ctx.fillStyle=a,this.ctx.fillRect(n,r,32,32),t){case"grass":this.ctx.fillStyle="rgba(0, 100, 0, 0.3)";for(let s=0;s<5;s++){const l=n+Math.random()*32,c=r+Math.random()*32;this.ctx.fillRect(l,c,1,3)}break;case"stone":this.ctx.fillStyle="rgba(0, 0, 0, 0.2)",this.ctx.fillRect(n+4,r+4,24,24),this.ctx.fillStyle="rgba(255, 255, 255, 0.1)",this.ctx.fillRect(n,r,32,2);break;case"water":this.ctx.strokeStyle="rgba(255, 255, 255, 0.3)",this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.arc(n+16,r+16,8,0,Math.PI*2),this.ctx.stroke();break}}renderTileDetails(t,n,r){switch(t.type){case"grass":Math.random()<.1&&(this.ctx.fillStyle="#FF69B4",this.ctx.fillRect(n+Math.random()*28+2,r+Math.random()*28+2,2,2));break;case"dirt":Math.random()<.15&&(this.ctx.fillStyle="#8B4513",this.ctx.fillRect(n+Math.random()*30+1,r+Math.random()*30+1,2,2));break}}getTileColor(t){switch(t){case"grass":return"#4CAF50";case"dirt":return"#A1887F";case"stone":return"#9E9E9E";case"water":return"#2196F3";case"lava":return"#FF5722";case"ice":return"#E3F2FD";case"sand":return"#FFEB3B";case"ruins":return"#616161";case"building":return"#6D4C41";default:return"#9E9E9E"}}renderPlayer(){const t=this.gameState.player.position.x-this.gameState.camera.x,n=this.gameState.player.position.y-this.gameState.camera.y,r=this.characterSprites.player;switch(r?this.ctx.drawImage(r,t-12,n-12):(this.ctx.fillStyle="#4a90e2",this.ctx.fillRect(t-12,n-12,24,24)),this.ctx.fillStyle="#ffffff",this.ctx.beginPath(),this.gameState.player.direction){case"up":this.ctx.moveTo(t,n-15),this.ctx.lineTo(t-4,n-8),this.ctx.lineTo(t+4,n-8);break;case"down":this.ctx.moveTo(t,n+15),this.ctx.lineTo(t-4,n+8),this.ctx.lineTo(t+4,n+8);break;case"left":this.ctx.moveTo(t-15,n),this.ctx.lineTo(t-8,n-4),this.ctx.lineTo(t-8,n+4);break;case"right":this.ctx.moveTo(t+15,n),this.ctx.lineTo(t+8,n-4),this.ctx.lineTo(t+8,n+4);break}this.ctx.closePath(),this.ctx.fill(),this.ctx.fillStyle="#ffffff",this.ctx.font="bold 12px Arial",this.ctx.textAlign="center",this.ctx.strokeStyle="#000000",this.ctx.lineWidth=3,this.ctx.strokeText(this.gameState.player.name,t,n-25),this.ctx.fillText(this.gameState.player.name,t,n-25)}renderNPCs(){this.gameState.currentMap.npcs.forEach(t=>{var c,o;const n=t.position.x-this.gameState.camera.x,r=t.position.y-this.gameState.camera.y;if(n<-32||n>this.canvas.width+32||r<-32||r>this.canvas.height+32)return;const a=Math.floor(t.position.x/32),s=Math.floor(t.position.y/32);if(!this.gameState.currentMap.isInterior&&!((o=(c=this.gameState.currentMap.tiles[s])==null?void 0:c[a])!=null&&o.discovered))return;const l=this.characterSprites.npc;l?this.ctx.drawImage(l,n-12,r-12):(this.ctx.fillStyle=t.isHostile?"#ff4444":"#44ff44",this.ctx.fillRect(n-10,r-10,20,20)),this.ctx.fillStyle="#ffffff",this.ctx.font="10px Arial",this.ctx.textAlign="center",this.ctx.strokeStyle="#000000",this.ctx.lineWidth=2,this.ctx.strokeText(t.name,n,r-20),this.ctx.fillText(t.name,n,r-20)})}renderEnemies(){this.gameState.currentMap.enemies.forEach(t=>{var o,d;const n=t.position.x-this.gameState.camera.x,r=t.position.y-this.gameState.camera.y;if(n<-32||n>this.canvas.width+32||r<-32||r>this.canvas.height+32)return;const a=Math.floor(t.position.x/32),s=Math.floor(t.position.y/32);if(!this.gameState.currentMap.isInterior&&!((d=(o=this.gameState.currentMap.tiles[s])==null?void 0:o[a])!=null&&d.discovered))return;const l=this.characterSprites.enemy;l?this.ctx.drawImage(l,n-12,r-12):(this.ctx.fillStyle="#ff0000",this.ctx.fillRect(n-10,r-10,20,20));const c=t.health/t.maxHealth;this.ctx.fillStyle="#333333",this.ctx.fillRect(n-15,r-25,30,4),this.ctx.fillStyle=c>.5?"#00ff00":c>.25?"#ffff00":"#ff0000",this.ctx.fillRect(n-15,r-25,30*c,4),this.ctx.fillStyle="#ffffff",this.ctx.font="10px Arial",this.ctx.textAlign="center",this.ctx.strokeStyle="#000000",this.ctx.lineWidth=2,this.ctx.strokeText(t.name,n,r+25),this.ctx.fillText(t.name,n,r+25)})}renderLootables(){this.gameState.currentMap.lootables.forEach(t=>{var o,d;if(t.looted)return;const n=t.position.x-this.gameState.camera.x,r=t.position.y-this.gameState.camera.y;if(n<-32||n>this.canvas.width+32||r<-32||r>this.canvas.height+32)return;const a=Math.floor(t.position.x/32),s=Math.floor(t.position.y/32);if(!this.gameState.currentMap.isInterior&&!((d=(o=this.gameState.currentMap.tiles[s])==null?void 0:o[a])!=null&&d.discovered))return;const l=Date.now()/1e3,c=Math.sin(l*3)*2;this.ctx.fillStyle="#ffaa00",this.ctx.fillRect(n-8,r-8+c,16,16),this.ctx.fillStyle="#ffffff",this.ctx.font="bold 12px Arial",this.ctx.textAlign="center",this.ctx.fillText("?",n,r+4+c),this.ctx.shadowColor="#ffaa00",this.ctx.shadowBlur=10,this.ctx.strokeStyle="#ffaa00",this.ctx.lineWidth=2,this.ctx.strokeRect(n-8,r-8+c,16,16),this.ctx.shadowBlur=0})}renderParticles(){this.particleSystem.forEach(t=>{const n=t.position.x-this.gameState.camera.x,r=t.position.y-this.gameState.camera.y;this.ctx.globalAlpha=t.life/t.maxLife,this.ctx.fillStyle=t.color,this.ctx.fillRect(n,r,t.size,t.size),this.ctx.globalAlpha=1})}renderLighting(){this.gameState.currentMap.isInterior&&(this.ctx.globalCompositeOperation="multiply",this.ctx.fillStyle="rgba(100, 100, 150, 0.3)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.lightingSystem.forEach(t=>{const n=t.position.x-this.gameState.camera.x,r=t.position.y-this.gameState.camera.y,a=this.ctx.createRadialGradient(n,r,0,n,r,t.radius);a.addColorStop(0,`rgba(255, 255, 255, ${t.intensity})`),a.addColorStop(1,"rgba(255, 255, 255, 0)"),this.ctx.fillStyle=a,this.ctx.fillRect(n-t.radius,r-t.radius,t.radius*2,t.radius*2)}),this.ctx.globalCompositeOperation="source-over")}renderUI(){this.renderStatusBar(20,20,250,25,this.gameState.player.health/this.gameState.player.maxHealth,"#ff0000","#660000",`Health: ${this.gameState.player.health}/${this.gameState.player.maxHealth}`),this.renderStatusBar(20,55,250,25,this.gameState.player.energy/this.gameState.player.maxEnergy,"#0088ff","#004488",`Energy: ${Math.floor(this.gameState.player.energy)}/${this.gameState.player.maxEnergy}`),this.renderStatusBar(20,20+35*2,250,25,this.gameState.player.experience/this.gameState.player.experienceToNext,"#ffaa00","#cc8800",`Level ${this.gameState.player.level} - XP: ${this.gameState.player.experience}/${this.gameState.player.experienceToNext}`),this.ctx.fillStyle="rgba(0, 0, 0, 0.7)",this.ctx.fillRect(20,this.canvas.height-80,300,60),this.ctx.fillStyle="#ffffff",this.ctx.font="bold 14px Arial",this.ctx.textAlign="left",this.ctx.fillText(`Location: ${this.gameState.currentMap.name}`,30,this.canvas.height-55);const a=this.gameState.dayNightCycle<.25||this.gameState.dayNightCycle>.75?"Night":this.gameState.dayNightCycle<.5?"Day":"Evening";this.ctx.fillText(`Time: ${a}`,30,this.canvas.height-35),this.ctx.fillText(`Weather: ${this.gameState.weather}`,30,this.canvas.height-15),this.gameState.currentMap.isInterior&&this.gameState.previousMap&&(this.ctx.fillStyle="rgba(255, 255, 0, 0.9)",this.ctx.font="bold 16px Arial",this.ctx.textAlign="center",this.ctx.fillText("Press ESC to exit building",this.canvas.width/2,50)),this.renderMiniMap()}renderStatusBar(t,n,r,a,s,l,c,o){this.ctx.fillStyle="rgba(0, 0, 0, 0.7)",this.ctx.fillRect(t-5,n-5,r+10,a+10),this.ctx.fillStyle=c,this.ctx.fillRect(t,n,r,a);const d=this.ctx.createLinearGradient(t,n,t+r,n);d.addColorStop(0,l),d.addColorStop(1,this.lightenColor(l,.3)),this.ctx.fillStyle=d,this.ctx.fillRect(t,n,r*Math.max(0,s),a),this.ctx.strokeStyle="#ffffff",this.ctx.lineWidth=2,this.ctx.strokeRect(t,n,r,a),this.ctx.fillStyle="#ffffff",this.ctx.font="bold 12px Arial",this.ctx.textAlign="center",this.ctx.strokeStyle="#000000",this.ctx.lineWidth=3,this.ctx.strokeText(o,t+r/2,n+a/2+4),this.ctx.fillText(o,t+r/2,n+a/2+4)}lightenColor(t,n){const r=t.replace("#",""),a=Math.min(255,Math.floor(parseInt(r.substr(0,2),16)*n)),s=Math.min(255,Math.floor(parseInt(r.substr(2,2),16)*n)),l=Math.min(255,Math.floor(parseInt(r.substr(4,2),16)*n));return`rgb(${a}, ${s}, ${l})`}renderMiniMap(){const n=this.canvas.width-150-20,r=20;this.ctx.fillStyle="rgba(0, 0, 0, 0.8)",this.ctx.fillRect(n-5,r-5,160,160),this.ctx.fillStyle="#000000",this.ctx.fillRect(n,r,150,150),this.ctx.strokeStyle="#ffffff",this.ctx.lineWidth=2,this.ctx.strokeRect(n,r,150,150);const a=150/this.gameState.currentMap.width,s=150/this.gameState.currentMap.height,l=Math.max(1,Math.floor(this.gameState.currentMap.width/50));for(let d=0;d<this.gameState.currentMap.height;d+=l)for(let m=0;m<this.gameState.currentMap.width;m+=l){if(!this.gameState.currentMap.tiles[d]||!this.gameState.currentMap.tiles[d][m])continue;const y=this.gameState.currentMap.tiles[d][m];if(!y.discovered)continue;const u=n+m*a,h=r+d*s;let x=this.getTileColor(y.type);!y.visible&&!this.gameState.currentMap.isInterior&&(x=this.darkenColor(x,.5)),this.ctx.fillStyle=x,this.ctx.fillRect(u,h,Math.max(1,a*l),Math.max(1,s*l))}const c=n+this.gameState.player.position.x/32*a,o=r+this.gameState.player.position.y/32*s;this.ctx.fillStyle="#ff0000",this.ctx.fillRect(c-2,o-2,4,4),this.gameState.currentMap.npcs.forEach(d=>{const m=n+d.position.x/32*a,y=r+d.position.y/32*s;this.ctx.fillStyle=d.isHostile?"#ff4444":"#44ff44",this.ctx.fillRect(m-1,y-1,2,2)})}darkenColor(t,n){const r=t.replace("#",""),a=Math.floor(parseInt(r.substr(0,2),16)*n),s=Math.floor(parseInt(r.substr(2,2),16)*n),l=Math.floor(parseInt(r.substr(4,2),16)*n);return`rgb(${a}, ${s}, ${l})`}enterBuilding(t){var s;const n=Op(t);if(!n)return;this.gameState.previousMap={map:this.gameState.currentMap,position:{...this.gameState.player.position}},this.gameState.currentMap=n.interiorMap,this.gameState.player.position={...n.exitPosition},this.visibleTileCache={},this.lastCameraPosition={x:-1,y:-1};const r=this.gameState.currentMap.tiles.length,a=((s=this.gameState.currentMap.tiles[0])==null?void 0:s.length)||0;this.gameState.visibilityMap=Array(r).fill(null).map(()=>Array(a).fill(!1));for(let l=0;l<r;l++)for(let c=0;c<a;c++)this.gameState.currentMap.tiles[l]&&this.gameState.currentMap.tiles[l][c]&&(this.gameState.currentMap.tiles[l][c].discovered=!0,this.gameState.currentMap.tiles[l][c].visible=!0,this.gameState.visibilityMap[l][c]=!0);this.updateCamera(),this.updateVisibility(),this.cacheInvalidated=!0,this.notifyStateChange()}exitBuilding(){this.gameState.previousMap&&(this.gameState.currentMap=this.gameState.previousMap.map,this.gameState.player.position={...this.gameState.previousMap.position},this.gameState.previousMap=void 0,this.visibleTileCache={},this.lastCameraPosition={x:-1,y:-1},this.cacheInvalidated=!0,this.updateCamera(),this.updateVisibility(),this.notifyStateChange())}setStateChangeCallback(t){this.stateChangeCallback=t}setLootableCallback(t){this.lootableCallback=t}notifyStateChange(){this.stateChangeCallback&&this.stateChangeCallback({...this.gameState})}setGameState(t){this.gameState={...t}}getGameState(){return{...this.gameState}}handleCombatAction(t,n){console.log("Combat action:",t,n)}destroy(){this.animationId&&cancelAnimationFrame(this.animationId)}}const Bp=({gameState:e,settings:t,onGameStateChange:n})=>{const r=C.useRef(null),a=C.useRef(null),{playMusic:s}=Ar();return C.useEffect(()=>{if(r.current&&!a.current){a.current=new Hp(r.current,e,t),a.current.setStateChangeCallback(n),a.current.setLootableCallback(c=>{const o=new CustomEvent("openLootable",{detail:c});window.dispatchEvent(o)});const l=setInterval(()=>{if(a.current){const c=a.current.getGameState();n(c)}},50);return()=>{clearInterval(l)}}},[n]),C.useEffect(()=>{e&&e.gameMode==="exploration"&&s("exploration",.4,!0)},[e==null?void 0:e.gameMode,s]),C.useEffect(()=>{if(a.current){const l=a.current.getGameState();(e.currentMap.id!==l.currentMap.id||e.gameMode!==l.gameMode||e.player.position.x!==l.player.position.x||e.player.position.y!==l.player.position.y)&&a.current.setGameState(e)}},[e.currentMap.id,e.gameMode,e.player.position.x,e.player.position.y]),C.useEffect(()=>{a.current&&(window.gameEngine=a.current)},[]),i.jsx("div",{className:"flex justify-center items-center min-h-screen bg-black",children:i.jsx("canvas",{ref:r,className:"border-2 border-gray-600 rounded-lg shadow-2xl",style:{imageRendering:"pixelated"}})})},Wp=({player:e,gold:t,gameTime:n,dayNightCycle:r,weather:a,onOpenInventory:s,onOpenEquipment:l,onOpenCharacter:c,onOpenQuests:o,onOpenMap:d,onSave:m,onMenu:y})=>i.jsx(i.Fragment,{children:i.jsxs("div",{className:"fixed top-20 right-4 z-40 space-y-2 pointer-events-none",children:[i.jsx("button",{onClick:s,className:"w-12 h-12 bg-black/60 backdrop-blur-sm hover:bg-black/80 text-white rounded-lg border border-gray-600 transition-all flex items-center justify-center group shadow hover:shadow-lg pointer-events-auto",title:"Inventory (I)",children:i.jsx($e,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),i.jsx("button",{onClick:l,className:"w-12 h-12 bg-black/60 backdrop-blur-sm hover:bg-black/80 text-white rounded-lg border border-gray-600 transition-all flex items-center justify-center group shadow hover:shadow-lg pointer-events-auto",title:"Equipment (E)",children:i.jsx(An,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),i.jsx("button",{onClick:c,className:"w-12 h-12 bg-black/60 backdrop-blur-sm hover:bg-black/80 text-white rounded-lg border border-gray-600 transition-all flex items-center justify-center group shadow hover:shadow-lg pointer-events-auto",title:"Character (C)",children:i.jsx(Ot,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),i.jsx("button",{onClick:o,className:"w-12 h-12 bg-black/60 backdrop-blur-sm hover:bg-black/80 text-white rounded-lg border border-gray-600 transition-all flex items-center justify-center group shadow hover:shadow-lg pointer-events-auto",title:"Quests (Q)",children:i.jsx("div",{className:"w-5 h-5 bg-yellow-500 rounded group-hover:scale-110 transition-transform"})}),i.jsx("button",{onClick:d,className:"w-12 h-12 bg-black/60 backdrop-blur-sm hover:bg-black/80 text-white rounded-lg border border-gray-600 transition-all flex items-center justify-center group shadow hover:shadow-lg pointer-events-auto",title:"Map (M)",children:i.jsx(tu,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),i.jsx("div",{className:"h-2"}),i.jsx("button",{onClick:m,className:"w-12 h-12 bg-green-600/60 backdrop-blur-sm hover:bg-green-600/80 text-white rounded-lg border border-green-500 transition-all flex items-center justify-center group shadow hover:shadow-lg pointer-events-auto",title:"Quick Save",children:i.jsx(bl,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),i.jsx("button",{onClick:y,className:"w-12 h-12 bg-red-600/60 backdrop-blur-sm hover:bg-red-600/80 text-white rounded-lg border border-red-500 transition-all flex items-center justify-center group shadow hover:shadow-lg pointer-events-auto",title:"Main Menu",children:i.jsx($i,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]})}),Vp=({combatState:e,onAction:t,onEndCombat:n})=>{const[r,a]=C.useState(null),[s,l]=C.useState(null),[c,o]=C.useState("idle"),{playMusic:d,playSfx:m}=Ar(),[y,u]=C.useState(""),[h,x]=C.useState({amount:0,type:"damage",show:!1,target:"enemy"});e.turnOrder[e.currentTurn];const v=e.isPlayerTurn,N=e.participants.find(b=>"class"in b),g=e.participants.find(b=>!("class"in b));C.useEffect(()=>{const b=M=>{["w","a","s","d","arrowup","arrowdown","arrowleft","arrowright"].includes(M.key.toLowerCase())&&(M.preventDefault(),M.stopPropagation()),M.key==="Escape"&&n()};return document.addEventListener("keydown",b,!0),()=>document.removeEventListener("keydown",b,!0)},[n]),C.useEffect(()=>{d("combat",.5,!0)},[d]),C.useEffect(()=>{if(e.combatLog.length>0){const b=e.combatLog[e.combatLog.length-1];if(u(b),b.includes("damage")){const M=b.match(/(\d+) damage/);if(M){const D=b.includes(N.name)&&!b.startsWith(N.name);x({amount:parseInt(M[1]),type:"damage",show:!0,target:D?"player":"enemy"}),setTimeout(()=>x(q=>({...q,show:!1})),1500)}m("/assets/audio/hit.mp3",.4)}}},[e.combatLog]);const p=()=>{o("attacking"),t("basic_attack",1),m("/assets/audio/attack.mp3",.4),setTimeout(()=>o("idle"),1e3),a(null)},f=b=>{l(b),o("attacking"),m("/assets/audio/skill.mp3",.4),t(b.id,1),setTimeout(()=>o("idle"),1e3),a(null),l(null)},k=()=>{n()},j=(b,M)=>Math.max(0,b/M*100),E=b=>b>60?"from-green-500 to-green-400":b>30?"from-yellow-500 to-yellow-400":"from-red-500 to-red-400";return i.jsxs("div",{className:"fixed inset-0 bg-gradient-to-b from-blue-900 via-purple-900 to-indigo-900 flex flex-col",children:[i.jsxs("div",{className:"absolute inset-0 opacity-20",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-400/20 via-transparent to-blue-600/20"}),[...Array(20)].map((b,M)=>i.jsx("div",{className:"absolute w-2 h-2 bg-white rounded-full opacity-30 animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${2+Math.random()*3}s`}},M))]}),i.jsx("div",{className:"flex-1 flex items-center justify-center relative",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:g.name}),i.jsxs("div",{className:"bg-black/50 backdrop-blur-sm rounded-lg p-3 border border-gray-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(an,{className:"w-4 h-4 text-red-400"}),i.jsx("div",{className:"w-48 h-3 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full bg-gradient-to-r ${E(j(g.health,g.maxHealth))} transition-all duration-500 shadow`,style:{width:`${j(g.health,g.maxHealth)}%`}})}),i.jsxs("span",{className:"text-white text-sm",children:[g.health,"/",g.maxHealth]})]}),i.jsxs("div",{className:"text-gray-300 text-sm",children:["Level ",g.level]})]})]}),i.jsx("div",{className:`relative transition-all duration-300 ${c==="hurt"?"animate-bounce":""}`,children:i.jsxs("div",{className:"w-32 h-32 mx-auto mb-4 relative",children:[i.jsx("div",{className:`w-full h-full rounded-lg border-4 transition-all duration-300 ${g.type==="robot"?"bg-gradient-to-br from-gray-400 to-gray-600 border-gray-500":g.type==="mutant"?"bg-gradient-to-br from-green-400 to-green-600 border-green-500":g.type==="beast"?"bg-gradient-to-br from-yellow-600 to-orange-600 border-orange-500":"bg-gradient-to-br from-red-400 to-red-600 border-red-500"}`,children:i.jsx("div",{className:"w-full h-full flex items-center justify-center text-white font-bold text-2xl",children:g.type==="robot"?"🤖":g.type==="mutant"?"👹":g.type==="beast"?"🐺":"💀"})}),h.show&&h.target==="enemy"&&i.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 animate-bounce",children:i.jsxs("span",{className:`text-2xl font-bold ${h.type==="damage"?"text-red-400":"text-green-400"}`,children:[h.type==="damage"?"-":"+",h.amount]})})]})})]})}),i.jsx("div",{className:"h-20 flex items-center justify-center",children:i.jsx("div",{className:"bg-black/70 backdrop-blur-sm rounded-lg p-4 border border-gray-600 max-w-2xl mx-4",children:i.jsx("p",{className:"text-white text-center text-lg",children:y||"What will you do?"})})}),i.jsx("div",{className:"flex-1 flex items-center justify-center relative",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:`relative transition-all duration-300 ${c==="attacking"?"scale-110":""}`,children:i.jsx("div",{className:"w-32 h-32 mx-auto mb-4 relative",children:i.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg border-4 border-blue-500",children:[i.jsx("div",{className:"w-full h-full flex items-center justify-center text-white font-bold text-2xl",children:N.class==="warrior"?"⚔️":N.class==="ranger"?"🏹":N.class==="medic"?"🏥":"🔧"}),h.show&&h.target==="player"&&i.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 animate-bounce",children:i.jsxs("span",{className:`text-2xl font-bold ${h.type==="damage"?"text-red-400":"text-green-400"}`,children:[h.type==="damage"?"-":"+",h.amount]})})]})})}),i.jsxs("div",{className:"mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:N.name}),i.jsxs("div",{className:"bg-black/50 backdrop-blur-sm rounded-lg p-3 border border-gray-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(an,{className:"w-4 h-4 text-red-400"}),i.jsx("div",{className:"w-48 h-3 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full bg-gradient-to-r ${E(j(N.health,N.maxHealth))} transition-all duration-500 shadow`,style:{width:`${j(N.health,N.maxHealth)}%`}})}),i.jsxs("span",{className:"text-white text-sm",children:[N.health,"/",N.maxHealth]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Fi,{className:"w-4 h-4 text-blue-400"}),i.jsx("div",{className:"w-48 h-3 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-400 transition-all duration-500 shadow",style:{width:`${j(N.energy,N.maxEnergy)}%`}})}),i.jsxs("span",{className:"text-white text-sm",children:[Math.floor(N.energy),"/",N.maxEnergy]})]})]})]})]})}),v&&i.jsx("div",{className:"h-40 bg-black/80 backdrop-blur-sm border-t border-gray-600",children:r?r==="attack"?i.jsxs("div",{className:"p-6 h-full flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-white text-xl font-bold",children:"Choose Attack"}),i.jsx("button",{onClick:()=>a(null),className:"text-gray-400 hover:text-white",children:i.jsx(kn,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx("button",{onClick:p,className:"bg-red-600/80 hover:bg-red-600 text-white rounded-lg border border-red-500 transition-all px-8 py-4 text-lg font-bold",children:"Basic Attack"})})]}):r==="skills"?i.jsxs("div",{className:"p-6 h-full flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-white text-xl font-bold",children:"Choose Skill"}),i.jsx("button",{onClick:()=>a(null),className:"text-gray-400 hover:text-white",children:i.jsx(kn,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"flex-1 grid grid-cols-2 gap-2",children:N.skills.map(b=>i.jsxs("button",{onClick:()=>f(b),disabled:N.energy<b.energyCost||b.currentCooldown>0,className:`p-2 rounded border transition-all text-sm ${N.energy>=b.energyCost&&b.currentCooldown<=0?"bg-purple-600/80 hover:bg-purple-600 text-white border-purple-500":"bg-gray-600/50 text-gray-400 border-gray-600 cursor-not-allowed"}`,children:[i.jsx("div",{className:"font-bold",children:b.name}),i.jsxs("div",{className:"text-xs",children:["Energy: ",b.energyCost]})]},b.id))})]}):r==="run"?i.jsxs("div",{className:"p-6 h-full flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-white text-xl font-bold",children:"Flee from Battle?"}),i.jsx("button",{onClick:()=>a(null),className:"text-gray-400 hover:text-white",children:i.jsx(kn,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"flex-1 flex items-center justify-center gap-4",children:[i.jsx("button",{onClick:k,className:"bg-red-600/80 hover:bg-red-600 text-white rounded-lg border border-red-500 transition-all px-8 py-4 text-lg font-bold",children:"Yes, Flee"}),i.jsx("button",{onClick:()=>a(null),className:"bg-gray-600/80 hover:bg-gray-600 text-white rounded-lg border border-gray-500 transition-all px-8 py-4 text-lg font-bold",children:"No, Stay"})]})]}):i.jsxs("div",{className:"p-6 h-full flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-white text-xl font-bold",children:"Items"}),i.jsx("button",{onClick:()=>a(null),className:"text-gray-400 hover:text-white",children:i.jsx(kn,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx("p",{className:"text-gray-400",children:"No usable items"})})]}):i.jsxs("div",{className:"grid grid-cols-2 gap-4 p-6 h-full",children:[i.jsxs("button",{onClick:()=>a("attack"),className:"bg-red-600/80 hover:bg-red-600 text-white rounded-lg border border-red-500 transition-all flex items-center justify-center gap-2 text-lg font-bold",children:[i.jsx(Ot,{className:"w-6 h-6"}),"ATTACK"]}),i.jsxs("button",{onClick:()=>a("skills"),className:"bg-purple-600/80 hover:bg-purple-600 text-white rounded-lg border border-purple-500 transition-all flex items-center justify-center gap-2 text-lg font-bold",children:[i.jsx(Fi,{className:"w-6 h-6"}),"SKILLS"]}),i.jsxs("button",{onClick:()=>a("items"),className:"bg-green-600/80 hover:bg-green-600 text-white rounded-lg border border-green-500 transition-all flex items-center justify-center gap-2 text-lg font-bold",children:[i.jsx(An,{className:"w-6 h-6"}),"ITEMS"]}),i.jsxs("button",{onClick:()=>a("run"),className:"bg-gray-600/80 hover:bg-gray-600 text-white rounded-lg border border-gray-500 transition-all flex items-center justify-center gap-2 text-lg font-bold",children:[i.jsx(nu,{className:"w-6 h-6"}),"RUN"]})]})}),!v&&i.jsx("div",{className:"h-40 bg-black/80 backdrop-blur-sm border-t border-gray-600 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-white text-xl font-bold mb-2",children:[g.name," is thinking..."]}),i.jsx("div",{className:"flex justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-400"})})]})})]})},Qp=({inventory:e,party:t,onUseItem:n,onEquipItem:r,onClose:a})=>{C.useEffect(()=>{const v=N=>{N.key==="Escape"||N.key.toLowerCase()==="i"?a():N.stopPropagation()};return document.addEventListener("keydown",v,!0),()=>document.removeEventListener("keydown",v,!0)},[a]);const[s,l]=C.useState("all"),[c,o]=C.useState(""),[d,m]=C.useState(null),y=v=>{switch(v){case"weapon":return i.jsx(Ot,{className:"w-5 h-5"});case"armor":return i.jsx(An,{className:"w-5 h-5"});case"consumable":return i.jsx(an,{className:"w-5 h-5"});case"material":return i.jsx(_s,{className:"w-5 h-5"});default:return i.jsx($e,{className:"w-5 h-5"})}},u=v=>{switch(v){case"common":return"border-gray-400 bg-gray-800";case"uncommon":return"border-green-400 bg-green-900";case"rare":return"border-blue-400 bg-blue-900";case"epic":return"border-purple-400 bg-purple-900";case"legendary":return"border-yellow-400 bg-yellow-900";default:return"border-gray-400 bg-gray-800"}},h=e.filter(v=>{const N=s==="all"||v.type===s,g=v.name.toLowerCase().includes(c.toLowerCase())||v.description.toLowerCase().includes(c.toLowerCase());return N&&g}),x=[{id:"all",name:"All",icon:i.jsx($e,{className:"w-4 h-4"})},{id:"weapon",name:"Weapons",icon:i.jsx(Ot,{className:"w-4 h-4"})},{id:"armor",name:"Armor",icon:i.jsx(An,{className:"w-4 h-4"})},{id:"consumable",name:"Consumables",icon:i.jsx(an,{className:"w-4 h-4"})},{id:"material",name:"Materials",icon:i.jsx(_s,{className:"w-4 h-4"})}];return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-3xl font-bold text-green-400",children:"Inventory"}),i.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(we,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 h-full",children:[i.jsxs("div",{className:"lg:col-span-1",children:[i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"relative",children:[i.jsx(Sp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Search items...",value:c,onChange:v=>o(v.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-400 focus:border-green-400 focus:outline-none"})]})}),i.jsx("div",{className:"space-y-2",children:x.map(v=>i.jsxs("button",{onClick:()=>l(v.id),className:`
                    w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all
                    ${s===v.id?"bg-green-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}
                  `,children:[v.icon,i.jsx("span",{children:v.name}),i.jsx("span",{className:"ml-auto text-sm",children:v.id==="all"?e.length:e.filter(N=>N.type===v.id).length})]},v.id))})]}),i.jsx("div",{className:"lg:col-span-2",children:i.jsx("div",{className:"grid grid-cols-4 gap-3 max-h-96 overflow-y-auto",children:h.map((v,N)=>i.jsx("div",{onClick:()=>m(v),className:`
                    relative p-3 rounded-lg border-2 cursor-pointer transition-all hover:scale-105
                    ${u(v.rarity)}
                    ${(d==null?void 0:d.id)===v.id?"ring-2 ring-green-400":""}
                  `,children:i.jsxs("div",{className:"flex flex-col items-center",children:[y(v.type),i.jsx("span",{className:"text-xs text-center mt-1 font-medium",children:v.name}),v.quantity&&v.quantity>1&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-blue-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:v.quantity})]})},`${v.id}-${N}`))})}),i.jsx("div",{className:"lg:col-span-1",children:d?i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[y(d.type),i.jsx("h3",{className:"font-bold text-yellow-400",children:d.name})]}),i.jsx("div",{className:"mb-3",children:i.jsx("span",{className:`
                    px-2 py-1 rounded text-xs font-bold
                    ${d.rarity==="common"?"bg-gray-600":d.rarity==="uncommon"?"bg-green-600":d.rarity==="rare"?"bg-blue-600":d.rarity==="epic"?"bg-purple-600":"bg-yellow-600"}
                  `,children:d.rarity.toUpperCase()})}),i.jsx("p",{className:"text-sm text-gray-300 mb-4",children:d.description}),d.stats&&i.jsxs("div",{className:"mb-4",children:[i.jsx("h4",{className:"font-semibold mb-2",children:"Stats:"}),i.jsxs("div",{className:"text-xs space-y-1",children:[d.stats.damage&&i.jsxs("div",{className:"text-red-400",children:["Damage: +",d.stats.damage]}),d.stats.defense&&i.jsxs("div",{className:"text-blue-400",children:["Defense: +",d.stats.defense]}),d.stats.strength&&i.jsxs("div",{className:"text-orange-400",children:["Strength: +",d.stats.strength]}),d.stats.agility&&i.jsxs("div",{className:"text-green-400",children:["Agility: +",d.stats.agility]}),d.stats.intelligence&&i.jsxs("div",{className:"text-purple-400",children:["Intelligence: +",d.stats.intelligence]}),d.stats.endurance&&i.jsxs("div",{className:"text-yellow-400",children:["Endurance: +",d.stats.endurance]})]})]}),i.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["Value: ",d.value," caps"]}),i.jsxs("div",{className:"space-y-2",children:[d.type==="consumable"&&i.jsx("button",{onClick:()=>n(d),className:"w-full bg-green-600 hover:bg-green-700 px-3 py-2 rounded text-sm font-bold",children:"Use Item"}),(d.type==="weapon"||d.type==="armor")&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Equip to:"}),t.map(v=>i.jsx("button",{onClick:()=>r(d,v.id),className:"w-full bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-xs mb-1",children:v.name},v.id))]})]})]}):i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 text-center text-gray-400",children:[i.jsx($e,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"Select an item to view details"})]})})]})]})})},Up=({party:e,inventory:t,onEquipItem:n,onUnequipItem:r,onClose:a})=>{C.useEffect(()=>{const h=x=>{x.key==="Escape"||x.key.toLowerCase()==="e"?a():x.stopPropagation()};return document.addEventListener("keydown",h,!0),()=>document.removeEventListener("keydown",h,!0)},[a]);const[s,l]=C.useState(e[0]);Iu.useEffect(()=>{const h=e.find(x=>x.id===(s==null?void 0:s.id));h&&l(h)},[e,s==null?void 0:s.id]);const c=h=>{switch(h){case"weapon":return i.jsx(Ot,{className:"w-6 h-6"});case"armor":return i.jsx(An,{className:"w-6 h-6"});case"helmet":return i.jsx(pp,{className:"w-6 h-6"});case"boots":return i.jsx(wp,{className:"w-6 h-6"});case"accessory":return i.jsx(ot,{className:"w-6 h-6"});default:return null}},o=()=>[{id:"weapon",name:"Weapon",item:s.equipment.weapon},{id:"armor",name:"Armor",item:s.equipment.armor},{id:"helmet",name:"Helmet",item:s.equipment.helmet},{id:"boots",name:"Boots",item:s.equipment.boots},{id:"accessory",name:"Accessory",item:s.equipment.accessory}],d=h=>t.filter(x=>x.type===h),m=h=>{const x={...h.stats},v={damage:0,defense:0,strength:0,agility:0,intelligence:0,endurance:0,luck:0};return Object.values(h.equipment).forEach(N=>{N!=null&&N.stats&&Object.entries(N.stats).forEach(([g,p])=>{g in v&&(v[g]+=p||0)})}),{baseStats:x,equipmentBonuses:v}},{baseStats:y,equipmentBonuses:u}=m(s);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-3xl font-bold text-blue-400",children:"Equipment"}),i.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(we,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"lg:col-span-1",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"Party Members"}),i.jsx("div",{className:"space-y-2",children:e.map(h=>i.jsxs("button",{onClick:()=>l(h),className:`
                    w-full p-3 rounded-lg text-left transition-all
                    ${s.id===h.id?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}
                  `,children:[i.jsx("div",{className:"font-bold",children:h.name}),i.jsxs("div",{className:"text-sm opacity-75",children:["Level ",h.level," ",h.class]})]},h.id))}),i.jsxs("div",{className:"mt-6 bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-bold mb-3",children:"Stats"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Strength:"}),i.jsxs("span",{children:[y.strength,u.strength>0&&i.jsxs("span",{className:"text-green-400",children:[" (+",u.strength,")"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Agility:"}),i.jsxs("span",{children:[y.agility,u.agility>0&&i.jsxs("span",{className:"text-green-400",children:[" (+",u.agility,")"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Intelligence:"}),i.jsxs("span",{children:[y.intelligence,u.intelligence>0&&i.jsxs("span",{className:"text-green-400",children:[" (+",u.intelligence,")"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Endurance:"}),i.jsxs("span",{children:[y.endurance,u.endurance>0&&i.jsxs("span",{className:"text-green-400",children:[" (+",u.endurance,")"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Luck:"}),i.jsxs("span",{children:[y.luck,u.luck>0&&i.jsxs("span",{className:"text-green-400",children:[" (+",u.luck,")"]})]})]}),i.jsx("hr",{className:"border-gray-600"}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Damage:"}),i.jsx("span",{className:"text-red-400",children:u.damage})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Defense:"}),i.jsx("span",{className:"text-blue-400",children:u.defense})]})]})]})]}),i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"Equipment Slots"}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:o().map(h=>i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c(h.id),i.jsx("span",{className:"font-bold",children:h.name})]}),h.item?i.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[i.jsx("div",{className:"font-bold text-yellow-400 mb-1",children:h.item.name}),i.jsx("div",{className:"text-xs text-gray-400 mb-2",children:h.item.description}),h.item.stats&&i.jsx("div",{className:"text-xs space-y-1 mb-3",children:Object.entries(h.item.stats).map(([x,v])=>i.jsxs("div",{className:"text-green-400",children:[x,": +",v]},x))}),i.jsx("button",{onClick:()=>r(s.id,h.id),className:"w-full bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-xs font-bold",children:"Unequip"})]}):i.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 text-center text-gray-500",children:[i.jsx("div",{className:"text-4xl mb-2",children:"+"}),i.jsx("div",{className:"text-xs",children:"Empty Slot"})]})]},h.id))})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"Available Equipment"}),i.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:["weapon","armor","helmet","boots","accessory"].map(h=>{const x=d(h);return x.length===0?null:i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold mb-2 capitalize flex items-center gap-2",children:[c(h),h,"s"]}),i.jsx("div",{className:"space-y-2",children:x.map((v,N)=>i.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[i.jsx("div",{className:"font-bold text-yellow-400 text-sm mb-1",children:v.name}),i.jsx("div",{className:"text-xs text-gray-400 mb-2",children:v.description}),v.stats&&i.jsx("div",{className:"text-xs space-y-1 mb-3",children:Object.entries(v.stats).map(([g,p])=>i.jsxs("div",{className:"text-green-400",children:[g,": +",p]},g))}),i.jsx("button",{onClick:()=>n(s.id,v,h),className:"w-full bg-green-600 hover:bg-green-700 px-3 py-1 rounded text-xs font-bold transition-colors",children:"Equip"})]},`${v.id}-${N}`))})]},h)})})]})]})]})})},Do=({dialogue:e,npcs:t,onChoice:n,onOpenTrading:r,onClose:a})=>{C.useEffect(()=>{const c=o=>{o.key==="Escape"?a():o.stopPropagation()};return document.addEventListener("keydown",c,!0),()=>document.removeEventListener("keydown",c,!0)},[a]);const s=t.find(c=>c.id===e.npcId),l=s==null?void 0:s.dialogue.find(c=>c.id===e.currentNode);return!s||!l?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:i.jsx("div",{className:"bg-gray-900 rounded-lg p-6 max-w-2xl w-full mx-4",children:i.jsxs("div",{className:"text-center text-white",children:[i.jsx("p",{children:"Dialogue error - NPC not found"}),i.jsx("button",{onClick:a,className:"mt-4 bg-red-600 hover:bg-red-700 px-4 py-2 rounded",children:"Close"})]})})}):i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 max-w-4xl w-full mx-4 border-2 border-yellow-600",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(kp,{className:"w-8 h-8 text-yellow-400"}),i.jsx("h2",{className:"text-2xl font-bold text-yellow-400",children:s.name})]}),i.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(we,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"flex gap-6 mb-6",children:[i.jsx("div",{className:"w-24 h-24 bg-gray-700 rounded-lg flex items-center justify-center",children:i.jsx("div",{className:"w-16 h-16 bg-green-600 rounded-full"})}),i.jsx("div",{className:"flex-1",children:i.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:i.jsx("p",{className:"text-white text-lg leading-relaxed",children:l.text})})})]}),l.choices.length>0?i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-3",children:"Choose your response:"}),l.choices.map((c,o)=>i.jsxs("button",{onClick:()=>{c.action==="open_trade"?r(s):n(c.id)},className:"w-full text-left bg-gray-800 hover:bg-gray-700 border border-gray-600 hover:border-yellow-400 rounded-lg p-4 transition-all",children:[i.jsxs("span",{className:"text-yellow-400 font-bold mr-2",children:[o+1,"."]}),i.jsx("span",{className:"text-white",children:c.text})]},c.id))]}):i.jsx("div",{className:"text-center",children:i.jsx("button",{onClick:a,className:"bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-3 px-6 rounded-lg",children:"End Conversation"})}),e.history.length>0&&i.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-700",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-400 mb-2",children:"Conversation History:"}),i.jsx("div",{className:"max-h-32 overflow-y-auto",children:e.history.map((c,o)=>i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:c},o))})]})]})})},Gp=({npc:e,playerInventory:t,playerGold:n,onBuyItem:r,onSellItem:a,onClose:s})=>{C.useEffect(()=>{const N=g=>{g.key==="Escape"?s():g.stopPropagation()};return document.addEventListener("keydown",N,!0),()=>document.removeEventListener("keydown",N,!0)},[s]);const[l,c]=C.useState("buy"),[o,d]=C.useState(null),[m,y]=C.useState(1),u=N=>{switch(N){case"weapon":return"⚔️";case"armor":return"🛡️";case"consumable":return"💊";case"material":return"🔧";default:return"📦"}},h=N=>{switch(N){case"common":return"border-gray-400";case"uncommon":return"border-green-400";case"rare":return"border-blue-400";case"epic":return"border-purple-400";case"legendary":return"border-yellow-400";default:return"border-gray-400"}},x=N=>n>=N.value*m,v=t.filter(N=>N.value>0);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(_p,{className:"w-8 h-8 text-yellow-400"}),i.jsxs("h2",{className:"text-3xl font-bold text-yellow-400",children:["Trading with ",e.name]})]}),i.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(we,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(zo,{className:"w-6 h-6 text-yellow-400"}),i.jsx("span",{className:"text-xl font-bold text-white",children:"Your Gold: "}),i.jsx("span",{className:"text-xl font-bold text-yellow-400",children:n})]})}),i.jsxs("div",{className:"flex mb-6",children:[i.jsxs("button",{onClick:()=>c("buy"),className:`flex-1 py-3 px-6 font-bold transition-all ${l==="buy"?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[i.jsx($e,{className:"w-5 h-5 inline mr-2"}),"Buy from ",e.name]}),i.jsxs("button",{onClick:()=>c("sell"),className:`flex-1 py-3 px-6 font-bold transition-all ${l==="sell"?"bg-red-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[i.jsx(zo,{className:"w-5 h-5 inline mr-2"}),"Sell to ",e.name]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 max-h-96 overflow-y-auto",children:[i.jsx("h3",{className:"text-lg font-bold mb-4 text-white",children:l==="buy"?`${e.name}'s Inventory`:"Your Inventory"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:(l==="buy"?e.inventory||[]:v).map((N,g)=>i.jsx("div",{onClick:()=>d(N),className:`
                      bg-gray-700 rounded-lg p-3 cursor-pointer transition-all border-2
                      ${(o==null?void 0:o.id)===N.id?"border-yellow-400":h(N.rarity)}
                      hover:bg-gray-600
                    `,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl mb-2",children:u(N.type)}),i.jsx("div",{className:"font-bold text-white text-sm",children:N.name}),i.jsx("div",{className:"text-yellow-400 font-bold",children:l==="buy"?`${N.value}g`:`${Math.floor(N.value*.6)}g`}),N.quantity&&N.quantity>1&&i.jsxs("div",{className:"text-xs text-gray-400",children:["Qty: ",N.quantity]})]})},`${N.id}-${g}`))}),l==="buy"&&(!e.inventory||e.inventory.length===0)&&i.jsxs("div",{className:"text-center text-gray-500 py-8",children:[i.jsx($e,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),i.jsxs("p",{children:[e.name," has nothing to sell"]})]}),l==="sell"&&v.length===0&&i.jsxs("div",{className:"text-center text-gray-500 py-8",children:[i.jsx($e,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"You have nothing to sell"})]})]})}),i.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:o?i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold mb-4 text-yellow-400",children:o.name}),i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-2xl mb-2",children:u(o.type)}),i.jsx("div",{className:`inline-block px-2 py-1 rounded text-xs font-bold mb-2 ${o.rarity==="common"?"bg-gray-600":o.rarity==="uncommon"?"bg-green-600":o.rarity==="rare"?"bg-blue-600":o.rarity==="epic"?"bg-purple-600":"bg-yellow-600"}`,children:o.rarity.toUpperCase()}),i.jsx("p",{className:"text-sm text-gray-300 mb-4",children:o.description})]}),o.stats&&i.jsxs("div",{className:"mb-4",children:[i.jsx("h4",{className:"font-semibold mb-2 text-white",children:"Stats:"}),i.jsx("div",{className:"text-xs space-y-1",children:Object.entries(o.stats).map(([N,g])=>i.jsxs("div",{className:"text-green-400",children:[N,": +",g]},N))})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"text-lg font-bold text-white mb-2",children:["Price: ",i.jsxs("span",{className:"text-yellow-400",children:[l==="buy"?o.value:Math.floor(o.value*.6),"g"]})]}),o.stackable&&i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Quantity:"}),i.jsx("input",{type:"number",min:"1",max:l==="buy"?99:o.quantity||1,value:m,onChange:N=>y(Math.max(1,parseInt(N.target.value)||1)),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"})]}),i.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["Total: ",(l==="buy"?o.value:Math.floor(o.value*.6))*m,"g"]})]}),i.jsxs("button",{onClick:()=>{l==="buy"?r(o,m):a(o,m),d(null),y(1)},disabled:l==="buy"&&!x(o),className:`
                    w-full py-3 px-4 rounded-lg font-bold transition-all flex items-center justify-center gap-2
                    ${l==="buy"?x(o)?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"}
                  `,children:[i.jsx(up,{className:"w-5 h-5"}),l==="buy"?"Buy Item":"Sell Item"]}),l==="buy"&&!x(o)&&i.jsx("p",{className:"text-red-400 text-sm mt-2 text-center",children:"Not enough gold!"})]}):i.jsxs("div",{className:"text-center text-gray-500 py-8",children:[i.jsx($e,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),i.jsxs("p",{children:["Select an item to ",l]})]})})]})]})})},Yp=({quests:e,completedQuests:t,onClose:n})=>{C.useEffect(()=>{const o=d=>{d.key==="Escape"||d.key.toLowerCase()==="q"?n():d.stopPropagation()};return document.addEventListener("keydown",o,!0),()=>document.removeEventListener("keydown",o,!0)},[n]);const r=e.filter(o=>o.status==="active"),a=e.filter(o=>o.status==="available"),s=e.filter(o=>o.status==="completed"),l=o=>{switch(o){case"active":return i.jsx(Ns,{className:"w-5 h-5 text-yellow-400"});case"completed":return i.jsx(rr,{className:"w-5 h-5 text-green-400"});case"available":return i.jsx(ot,{className:"w-5 h-5 text-blue-400"});default:return i.jsx(Ss,{className:"w-5 h-5 text-gray-400"})}},c=o=>{const d=o.objectives.length,m=o.objectives.filter(y=>y.completed).length;return d>0?m/d*100:0};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-3xl font-bold text-yellow-400",children:"Quest Log"}),i.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(we,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 text-yellow-400 flex items-center gap-2",children:[i.jsx(Ns,{className:"w-6 h-6"}),"Active Quests (",r.length,")"]}),i.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[r.map(o=>i.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 border-l-4 border-yellow-400",children:[i.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[l(o.status),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-bold text-white",children:o.title}),i.jsx("p",{className:"text-sm text-gray-300 mt-1",children:o.description})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[i.jsx("span",{children:"Progress"}),i.jsxs("span",{children:[Math.round(c(o)),"%"]})]}),i.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2",children:i.jsx("div",{className:"bg-yellow-400 h-2 rounded-full transition-all duration-300",style:{width:`${c(o)}%`}})})]}),i.jsx("div",{className:"space-y-2",children:o.objectives.map(d=>i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${d.completed?"bg-green-600 border-green-600":"border-gray-400"}`,children:d.completed&&i.jsx(rr,{className:"w-3 h-3 text-white"})}),i.jsx("span",{className:d.completed?"text-green-400 line-through":"text-gray-300",children:d.description}),i.jsxs("span",{className:"text-gray-500 ml-auto",children:[d.current,"/",d.required]})]},d.id))}),i.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600",children:[i.jsx("h5",{className:"text-xs font-semibold text-gray-400 mb-1",children:"Rewards:"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:o.rewards.map((d,m)=>{var y;return i.jsxs("span",{className:"text-xs bg-gray-600 px-2 py-1 rounded",children:[d.type==="experience"&&`${d.value} XP`,d.type==="gold"&&`${d.value} Gold`,d.type==="item"&&((y=d.item)==null?void 0:y.name)]},m)})})]})]},o.id)),r.length===0&&i.jsxs("div",{className:"text-center text-gray-500 py-8",children:[i.jsx(Ss,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"No active quests"})]})]})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 text-blue-400 flex items-center gap-2",children:[i.jsx(ot,{className:"w-6 h-6"}),"Available Quests (",a.length,")"]}),i.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[a.map(o=>i.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 border-l-4 border-blue-400",children:[i.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[l(o.status),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-bold text-white",children:o.title}),i.jsx("p",{className:"text-sm text-gray-300 mt-1",children:o.description}),i.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Required Level: ",o.requiredLevel]})]})]}),i.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600",children:[i.jsx("h5",{className:"text-xs font-semibold text-gray-400 mb-1",children:"Rewards:"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:o.rewards.map((d,m)=>{var y;return i.jsxs("span",{className:"text-xs bg-gray-600 px-2 py-1 rounded",children:[d.type==="experience"&&`${d.value} XP`,d.type==="gold"&&`${d.value} Gold`,d.type==="item"&&((y=d.item)==null?void 0:y.name)]},m)})})]})]},o.id)),a.length===0&&i.jsxs("div",{className:"text-center text-gray-500 py-8",children:[i.jsx(ot,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"No available quests"})]})]})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 text-green-400 flex items-center gap-2",children:[i.jsx(rr,{className:"w-6 h-6"}),"Completed Quests (",s.length,")"]}),i.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[s.map(o=>i.jsx("div",{className:"bg-gray-700 rounded-lg p-4 border-l-4 border-green-400 opacity-75",children:i.jsxs("div",{className:"flex items-start gap-3",children:[l(o.status),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-bold text-white",children:o.title}),i.jsx("p",{className:"text-sm text-gray-300 mt-1",children:o.description})]})]})},o.id)),s.length===0&&i.jsxs("div",{className:"text-center text-gray-500 py-8",children:[i.jsx(rr,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"No completed quests yet"})]})]})]})]})]})})},Kp=({character:e,onClose:t})=>{C.useEffect(()=>{const s=l=>{l.key==="Escape"||l.key.toLowerCase()==="c"?t():l.stopPropagation()};return document.addEventListener("keydown",s,!0),()=>document.removeEventListener("keydown",s,!0)},[t]);const n=s=>{switch(s){case"strength":return i.jsx(Ot,{className:"w-5 h-5 text-red-400"});case"agility":return i.jsx(Mp,{className:"w-5 h-5 text-green-400"});case"intelligence":return i.jsx(ot,{className:"w-5 h-5 text-blue-400"});case"endurance":return i.jsx(An,{className:"w-5 h-5 text-yellow-400"});case"luck":return i.jsx(ot,{className:"w-5 h-5 text-purple-400"});default:return i.jsx(Oi,{className:"w-5 h-5 text-gray-400"})}},r=s=>{switch(s){case"warrior":return"A tough melee fighter with high health and strength";case"ranger":return"A skilled marksman with high agility and perception";case"medic":return"A healer with knowledge of medicine and technology";case"engineer":return"A tech specialist who can craft and repair equipment";default:return"A survivor in the wasteland"}},a=e.experience/e.experienceToNext*100;return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-3xl font-bold text-blue-400",children:"Character Sheet"}),i.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(we,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center",children:i.jsx(Oi,{className:"w-12 h-12 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-white",children:e.name}),i.jsx("p",{className:"text-blue-400 capitalize font-semibold",children:e.class}),i.jsx("p",{className:"text-gray-400 text-sm",children:r(e.class)})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("span",{className:"text-lg font-semibold text-white",children:["Level ",e.level]}),i.jsxs("span",{className:"text-sm text-gray-400",children:[e.experience," / ",e.experienceToNext," XP"]})]}),i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:i.jsx("div",{className:"bg-yellow-400 h-3 rounded-full transition-all duration-300",style:{width:`${a}%`}})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(an,{className:"w-5 h-5 text-red-400"}),i.jsx("span",{className:"font-semibold text-white",children:"Health"})]}),i.jsxs("div",{className:"text-2xl font-bold text-red-400",children:[e.health," / ",e.maxHealth]}),i.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2 mt-2",children:i.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:`${e.health/e.maxHealth*100}%`}})})]}),i.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Fi,{className:"w-5 h-5 text-blue-400"}),i.jsx("span",{className:"font-semibold text-white",children:"Energy"})]}),i.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[Math.floor(e.energy)," / ",e.maxEnergy]}),i.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2 mt-2",children:i.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${e.energy/e.maxEnergy*100}%`}})})]})]}),e.statusEffects.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h4",{className:"font-semibold text-white mb-3",children:"Status Effects"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:e.statusEffects.map((s,l)=>i.jsxs("span",{className:"bg-purple-600 text-white px-3 py-1 rounded-full text-sm",children:[s.type," (",s.duration,"s)"]},l))})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[i.jsx("h4",{className:"text-xl font-bold text-white mb-4",children:"Attributes"}),i.jsx("div",{className:"grid grid-cols-1 gap-3",children:Object.entries(e.stats).map(([s,l])=>i.jsxs("div",{className:"flex items-center justify-between bg-gray-700 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[n(s),i.jsx("span",{className:"font-semibold text-white capitalize",children:s})]}),i.jsx("span",{className:"text-2xl font-bold text-yellow-400",children:l})]},s))})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[i.jsx("h4",{className:"text-xl font-bold text-white mb-4",children:"Skills"}),i.jsx("div",{className:"space-y-3",children:e.skills.map(s=>i.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h5",{className:"font-bold text-yellow-400",children:s.name}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-sm text-blue-400",children:["Energy: ",s.energyCost]}),s.currentCooldown>0&&i.jsxs("div",{className:"text-sm text-red-400",children:["Cooldown: ",Math.ceil(s.currentCooldown),"s"]})]})]}),i.jsx("p",{className:"text-sm text-gray-300 mb-2",children:s.description}),i.jsxs("div",{className:"flex gap-4 text-xs text-gray-400",children:[s.damage&&i.jsxs("span",{children:["Damage: ",s.damage]}),s.healing&&i.jsxs("span",{children:["Healing: ",s.healing]}),i.jsxs("span",{children:["Range: ",s.range]}),i.jsxs("span",{children:["Cooldown: ",s.cooldown,"s"]})]})]},s.id))})]})]})]})]})})},Xp=({gameMap:e,playerPosition:t,visibilityMap:n,onClose:r})=>{C.useEffect(()=>{const o=d=>{d.key==="Escape"||d.key.toLowerCase()==="m"?r():d.stopPropagation()};return document.addEventListener("keydown",o,!0),()=>document.removeEventListener("keydown",o,!0)},[r]);const a=8,s=Math.floor(t.x/32),l=Math.floor(t.y/32),c=(o,d,m)=>{if(!d)return"#000000";let y="#333333";switch(o){case"grass":y="#4a7c59";break;case"dirt":y="#8b4513";break;case"stone":y="#696969";break;case"water":y="#4682b4";break;case"ruins":y="#2f2f2f";break;case"building":y="#654321";break;case"sand":y="#f4a460";break}return!m&&d?y+"80":y};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(jp,{className:"w-8 h-8 text-green-400"}),i.jsxs("h2",{className:"text-3xl font-bold text-green-400",children:[e.name," Map"]})]}),i.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(we,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"flex gap-6",children:[i.jsx("div",{className:"flex-1",children:i.jsx("div",{className:"bg-black rounded-lg p-4 overflow-auto max-h-[70vh]",children:i.jsxs("div",{className:"relative",style:{width:e.width*a,height:e.height*a},children:[e.tiles.map((o,d)=>o.map((m,y)=>i.jsx("div",{className:"absolute",style:{left:y*a,top:d*a,width:a,height:a,backgroundColor:c(m.type,m.discovered,n[d]&&n[d][y])}},`${y}-${d}`))),e.npcs.map(o=>{var u;const d=Math.floor(o.position.x/32),m=Math.floor(o.position.y/32),y=(u=e.tiles[m])==null?void 0:u[d];return y!=null&&y.discovered?i.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:d*a-1,top:m*a-1,backgroundColor:o.isHostile?"#ff4444":"#44ff44"},title:o.name},o.id):null}),i.jsx("div",{className:"absolute w-3 h-3 bg-red-500 rounded-full border border-white",style:{left:s*a-1.5,top:l*a-1.5}}),i.jsx("div",{className:"absolute border-2 border-yellow-400 rounded-full opacity-30",style:{left:(s-8)*a,top:(l-8)*a,width:16*a,height:16*a}})]})})}),i.jsxs("div",{className:"w-64 bg-gray-800 rounded-lg p-4",children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Map Legend"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full border border-white"}),i.jsx("span",{className:"text-white",children:"Your Position"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),i.jsx("span",{className:"text-white",children:"Friendly NPC"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-4 h-4 bg-red-400 rounded-full"}),i.jsx("span",{className:"text-white",children:"Hostile NPC"})]}),i.jsxs("div",{className:"border-t border-gray-600 pt-3 mt-3",children:[i.jsx("h4",{className:"font-semibold text-gray-300 mb-2",children:"Terrain"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-3 h-3",style:{backgroundColor:"#4a7c59"}}),i.jsx("span",{className:"text-gray-300",children:"Grass"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-3 h-3",style:{backgroundColor:"#8b4513"}}),i.jsx("span",{className:"text-gray-300",children:"Dirt"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-3 h-3",style:{backgroundColor:"#696969"}}),i.jsx("span",{className:"text-gray-300",children:"Stone"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-3 h-3",style:{backgroundColor:"#4682b4"}}),i.jsx("span",{className:"text-gray-300",children:"Water"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-3 h-3",style:{backgroundColor:"#2f2f2f"}}),i.jsx("span",{className:"text-gray-300",children:"Ruins"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-3 h-3 bg-black"}),i.jsx("span",{className:"text-gray-300",children:"Unexplored"})]})]})]}),i.jsxs("div",{className:"border-t border-gray-600 pt-3 mt-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[i.jsx(xp,{className:"w-4 h-4"}),i.jsx("span",{children:"Yellow circle shows vision range"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mt-1",children:[i.jsx(gp,{className:"w-4 h-4"}),i.jsx("span",{children:"Darker areas are discovered but not visible"})]})]})]})]})]})]})})},Jp=({character:e,onClose:t})=>{var c;C.useEffect(()=>{const o=d=>{d.key==="Escape"?t():d.stopPropagation()};return document.addEventListener("keydown",o,!0),()=>document.removeEventListener("keydown",o,!0)},[t]);const n=o=>o>=8?"text-green-400":o>=6?"text-yellow-400":o>=4?"text-orange-400":"text-red-400",r=()=>e.health/e.maxHealth*100,a=()=>e.energy/e.maxEnergy*100,s=()=>e.radiation/e.maxRadiation*100,l=()=>e.experience/e.experienceToNext*100;return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-3xl font-bold text-blue-400 flex items-center gap-2",children:[i.jsx(Oi,{className:"w-8 h-8"}),"Character Sheet"]}),i.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(we,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-yellow-400",children:"Character Info"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Name:"}),i.jsx("span",{className:"font-bold text-white",children:e.name})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Class:"}),i.jsx("span",{className:"font-bold text-blue-400 capitalize",children:e.class})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Level:"}),i.jsx("span",{className:"font-bold text-green-400",children:e.level})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Background:"}),i.jsx("span",{className:"font-bold text-purple-400 capitalize",children:(c=e.background)==null?void 0:c.replace("_"," ")})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Age:"}),i.jsx("span",{className:"font-bold text-gray-300",children:e.age})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Gender:"}),i.jsx("span",{className:"font-bold text-gray-300 capitalize",children:e.gender})]})]})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-yellow-400",children:"Vital Statistics"}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(an,{className:"w-4 h-4 text-red-400"}),"Health"]}),i.jsxs("span",{className:"font-bold",children:[e.health,"/",e.maxHealth]})]}),i.jsx("div",{className:"w-full bg-gray-600 rounded-full h-3",children:i.jsx("div",{className:"bg-red-500 h-3 rounded-full transition-all",style:{width:`${r()}%`}})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Fi,{className:"w-4 h-4 text-blue-400"}),"Energy"]}),i.jsxs("span",{className:"font-bold",children:[e.energy,"/",e.maxEnergy]})]}),i.jsx("div",{className:"w-full bg-gray-600 rounded-full h-3",children:i.jsx("div",{className:"bg-blue-500 h-3 rounded-full transition-all",style:{width:`${a()}%`}})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),"Radiation"]}),i.jsxs("span",{className:"font-bold",children:[e.radiation,"/",e.maxRadiation]})]}),i.jsx("div",{className:"w-full bg-gray-600 rounded-full h-3",children:i.jsx("div",{className:"bg-green-500 h-3 rounded-full transition-all",style:{width:`${s()}%`}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(ot,{className:"w-4 h-4 text-yellow-400"}),"Experience"]}),i.jsxs("span",{className:"font-bold",children:[e.experience,"/",e.experienceToNext]})]}),i.jsx("div",{className:"w-full bg-gray-600 rounded-full h-3",children:i.jsx("div",{className:"bg-yellow-500 h-3 rounded-full transition-all",style:{width:`${l()}%`}})})]})]}),e.biography&&i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-yellow-400",children:"Biography"}),i.jsx("p",{className:"text-gray-300 leading-relaxed",children:e.biography})]})]}),i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-yellow-400",children:"Primary Attributes"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(e.stats).map(([o,d])=>i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:`text-2xl font-bold ${n(d)}`,children:d}),i.jsx("div",{className:"text-sm text-gray-400 capitalize",children:o})]},o))})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-yellow-400",children:"Derived Statistics"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl font-bold text-orange-400",children:e.derivedStats.carryWeight}),i.jsx("div",{className:"text-sm text-gray-400",children:"Carry Weight"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl font-bold text-green-400",children:e.derivedStats.actionPoints}),i.jsx("div",{className:"text-sm text-gray-400",children:"Action Points"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-xl font-bold text-purple-400",children:[e.derivedStats.criticalChance,"%"]}),i.jsx("div",{className:"text-sm text-gray-400",children:"Critical Chance"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl font-bold text-blue-400",children:e.derivedStats.damageResistance}),i.jsx("div",{className:"text-sm text-gray-400",children:"Damage Resistance"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl font-bold text-green-400",children:e.derivedStats.radiationResistance}),i.jsx("div",{className:"text-sm text-gray-400",children:"Rad Resistance"})]})]})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 text-yellow-400 flex items-center gap-2",children:[i.jsx(Ot,{className:"w-5 h-5"}),"Skills & Abilities"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.skills.map(o=>i.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"font-bold text-blue-400",children:o.name}),i.jsxs("span",{className:"text-sm text-gray-400",children:["Energy: ",o.energyCost]})]}),i.jsx("p",{className:"text-sm text-gray-300 mb-2",children:o.description}),i.jsxs("div",{className:"flex justify-between text-xs",children:[o.damage&&i.jsxs("span",{className:"text-red-400",children:["Damage: ",o.damage]}),o.healing&&i.jsxs("span",{className:"text-green-400",children:["Healing: ",o.healing]}),i.jsxs("span",{className:"text-yellow-400",children:["Range: ",o.range]})]}),o.currentCooldown>0&&i.jsxs("div",{className:"mt-2",children:[i.jsxs("div",{className:"text-xs text-red-400",children:["Cooldown: ",o.currentCooldown.toFixed(1),"s"]}),i.jsx("div",{className:"w-full bg-gray-600 rounded-full h-1",children:i.jsx("div",{className:"bg-red-500 h-1 rounded-full",style:{width:`${o.currentCooldown/o.cooldown*100}%`}})})]})]},o.id))})]}),e.perks&&e.perks.length>0&&i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 text-yellow-400 flex items-center gap-2",children:[i.jsx(hp,{className:"w-5 h-5"}),"Perks"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.perks.map(o=>i.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[i.jsx("div",{className:"font-bold text-purple-400 mb-1",children:o.name}),i.jsx("p",{className:"text-sm text-gray-300",children:o.description})]},o.id))})]}),e.traits&&e.traits.length>0&&i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-yellow-400",children:"Traits"}),i.jsx("div",{className:"space-y-2",children:e.traits.map(o=>i.jsx("div",{className:"bg-gray-700 rounded-lg p-3",children:i.jsx("div",{className:"font-bold text-orange-400 capitalize",children:o.replace("_"," ")})},o))})]}),e.statusEffects.length>0&&i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-yellow-400",children:"Status Effects"}),i.jsx("div",{className:"space-y-2",children:e.statusEffects.map((o,d)=>i.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-bold text-purple-400 capitalize",children:o.type}),i.jsxs("span",{className:"text-sm text-gray-400 ml-2",children:["from ",o.source]})]}),i.jsxs("div",{className:"text-sm text-gray-400",children:[o.duration.toFixed(1),"s remaining"]})]},d))})]})]})]})]})})},Zp=({lootable:e,playerInventory:t,onTakeItem:n,onTakeAll:r,onClose:a})=>{C.useEffect(()=>{const u=h=>{h.key==="Escape"?a():h.stopPropagation()};return document.addEventListener("keydown",u,!0),()=>document.removeEventListener("keydown",u,!0)},[a]);const[s,l]=C.useState(new Set),c=u=>({weapon:"⚔️",armor:"🛡️",consumable:"💊",material:"🔧",quest:"📜"})[u]||"📦",o=u=>({common:"border-gray-400 bg-gray-800",uncommon:"border-green-400 bg-green-900",rare:"border-blue-400 bg-blue-900",epic:"border-purple-400 bg-purple-900",legendary:"border-yellow-400 bg-yellow-900"})[u]||"border-gray-400 bg-gray-800",d=u=>{const h=new Set(s);h.has(u)?h.delete(u):h.add(u),l(h)},m=()=>{e.items.forEach((u,h)=>{s.has(`${u.id}_${h}`)&&n(u,u.quantity)}),a()},y=()=>{switch(e.type){case"corpse":return"Search Corpse";case"container":return"Container Contents";case"cache":return"Hidden Cache";default:return"Loot"}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[80vh] overflow-hidden border-2 border-yellow-600",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-yellow-400 flex items-center gap-2",children:[i.jsx($e,{className:"w-6 h-6"}),y()]}),i.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(we,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold mb-4 text-white",children:"Available Items"}),i.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:e.items.length===0?i.jsxs("div",{className:"text-center text-gray-400 py-8",children:[i.jsx($e,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"This container is empty"})]}):e.items.map((u,h)=>{const x=`${u.id}_${h}`,v=s.has(x);return i.jsxs("div",{className:`
                        p-3 rounded-lg border-2 cursor-pointer transition-all
                        ${o(u.rarity)}
                        ${v?"ring-2 ring-yellow-400":""}
                        hover:scale-105
                      `,onClick:()=>d(x),children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:c(u.type)}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-yellow-400",children:u.name}),i.jsx("div",{className:"text-xs text-gray-400",children:u.description}),u.quantity&&u.quantity>1&&i.jsxs("div",{className:"text-sm text-blue-400",children:["Quantity: ",u.quantity]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-sm text-green-400",children:[u.value," caps"]}),i.jsx("div",{className:"text-xs text-gray-400 capitalize",children:u.rarity})]})]}),u.stats&&Object.keys(u.stats).length>0&&i.jsx("div",{className:"mt-2 text-xs",children:Object.entries(u.stats).map(([N,g])=>i.jsxs("span",{className:"text-green-400 mr-2",children:[N,": +",g]},N))})]},x)})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold mb-4 text-white",children:"Your Inventory"}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 max-h-96 overflow-y-auto",children:[i.jsxs("div",{className:"text-sm text-gray-400 mb-2",children:["Inventory: ",t.length,"/50 items"]}),i.jsxs("div",{className:"space-y-1",children:[t.slice(0,10).map((u,h)=>i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-300",children:u.name}),u.quantity&&u.quantity>1&&i.jsxs("span",{className:"text-blue-400",children:["x",u.quantity]})]},h)),t.length>10&&i.jsxs("div",{className:"text-xs text-gray-500",children:["...and ",t.length-10," more items"]})]})]})]})]}),i.jsxs("div",{className:"flex justify-between mt-6",children:[i.jsxs("button",{onClick:a,className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg flex items-center gap-2",children:[i.jsx(kn,{className:"w-4 h-4"}),"Leave"]}),i.jsxs("div",{className:"flex gap-3",children:[s.size>0&&i.jsxs("button",{onClick:m,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center gap-2",children:[i.jsx(eu,{className:"w-4 h-4"}),"Take Selected (",s.size,")"]}),e.items.length>0&&i.jsxs("button",{onClick:()=>{r(),a()},className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg flex items-center gap-2",children:[i.jsx($e,{className:"w-4 h-4"}),"Take All"]})]})]})]})})},ef=({quests:e,completedQuests:t,onClose:n,onTrackQuest:r})=>{C.useEffect(()=>{const u=h=>{h.key==="Escape"?n():h.stopPropagation()};return document.addEventListener("keydown",u,!0),()=>document.removeEventListener("keydown",u,!0)},[n]);const[a,s]=C.useState("active"),[l,c]=C.useState(null),o=e.filter(u=>u.status==="active"||u.status==="available"),d=e.filter(u=>u.status==="completed"),m=u=>{switch(u){case"active":return i.jsx(Ns,{className:"w-5 h-5 text-blue-400"});case"completed":return i.jsx(rr,{className:"w-5 h-5 text-green-400"});case"failed":return i.jsx(we,{className:"w-5 h-5 text-red-400"});case"available":return i.jsx(dp,{className:"w-5 h-5 text-yellow-400"});default:return i.jsx(ir,{className:"w-5 h-5 text-gray-400"})}},y=u=>{const h=u.objectives.filter(v=>v.completed).length,x=u.objectives.length;return{completed:h,total:x,percentage:h/x*100}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-3xl font-bold text-yellow-400 flex items-center gap-2",children:[i.jsx(ir,{className:"w-8 h-8"}),"Quest Log"]}),i.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(we,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"flex space-x-4 mb-6",children:[i.jsxs("button",{onClick:()=>s("active"),className:`
              px-6 py-3 rounded-lg font-bold transition-all
              ${a==="active"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}
            `,children:["Active Quests (",o.length,")"]}),i.jsxs("button",{onClick:()=>s("completed"),className:`
              px-6 py-3 rounded-lg font-bold transition-all
              ${a==="completed"?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}
            `,children:["Completed (",d.length,")"]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-[60vh]",children:[i.jsxs("div",{className:"overflow-y-auto",children:[i.jsx("h3",{className:"text-lg font-bold mb-4 text-white",children:a==="active"?"Active Quests":"Completed Quests"}),i.jsxs("div",{className:"space-y-3",children:[(a==="active"?o:d).map(u=>{const h=y(u),x=(l==null?void 0:l.id)===u.id;return i.jsxs("div",{className:`
                      p-4 rounded-lg border-2 cursor-pointer transition-all
                      ${x?"border-yellow-400 bg-yellow-900/20":"border-gray-600 bg-gray-800 hover:border-gray-500"}
                    `,onClick:()=>c(u),children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[m(u.status),i.jsx("h4",{className:"font-bold text-yellow-400",children:u.title})]}),i.jsxs("div",{className:"text-xs text-gray-400",children:["Level ",u.requiredLevel]})]}),i.jsx("p",{className:"text-gray-300 text-sm mb-3",children:u.description}),i.jsxs("div",{className:"mb-2",children:[i.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[i.jsx("span",{children:"Progress"}),i.jsxs("span",{children:[h.completed,"/",h.total]})]}),i.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all",style:{width:`${h.percentage}%`}})})]}),i.jsx("div",{className:"flex items-center gap-4 text-xs",children:u.rewards.map((v,N)=>{var g;return i.jsxs("span",{className:"text-green-400",children:[v.type==="experience"&&`${v.value} XP`,v.type==="gold"&&`${v.value} Caps`,v.type==="item"&&((g=v.item)==null?void 0:g.name)]},N)})})]},u.id)}),(a==="active"?o:d).length===0&&i.jsxs("div",{className:"text-center text-gray-400 py-8",children:[i.jsx(ir,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),i.jsx("p",{children:a==="active"?"No active quests. Explore the world to find new adventures!":"No completed quests yet."})]})]})]}),i.jsx("div",{className:"overflow-y-auto",children:l?i.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[m(l.status),i.jsx("h3",{className:"text-xl font-bold text-yellow-400",children:l.title})]}),i.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed",children:l.description}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:"Objectives:"}),i.jsx("div",{className:"space-y-3",children:l.objectives.map(u=>i.jsxs("div",{className:`
                          p-3 rounded-lg border-l-4
                          ${u.completed?"border-green-400 bg-green-900/20":"border-blue-400 bg-blue-900/20"}
                        `,children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsxs("span",{className:`font-medium ${u.completed?"text-green-400":"text-blue-400"}`,children:[u.completed?"✓":"○"," ",u.description]}),i.jsxs("span",{className:"text-sm text-gray-400",children:[u.current,"/",u.required]})]}),!u.completed&&i.jsx("div",{className:"w-full bg-gray-600 rounded-full h-1 mt-2",children:i.jsx("div",{className:"bg-blue-500 h-1 rounded-full",style:{width:`${u.current/u.required*100}%`}})})]},u.id))})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:"Rewards:"}),i.jsx("div",{className:"space-y-2",children:l.rewards.map((u,h)=>{var x;return i.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[i.jsx(ot,{className:"w-4 h-4"}),i.jsxs("span",{children:[u.type==="experience"&&`${u.value} Experience Points`,u.type==="gold"&&`${u.value} Bottle Caps`,u.type==="item"&&`${((x=u.item)==null?void 0:x.name)||"Unknown Item"}`]})]},h)})})]}),l.status==="active"&&r&&i.jsx("button",{onClick:()=>r(l.id),className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-bold",children:"Track Quest"})]}):i.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 text-center text-gray-400",children:[i.jsx(ir,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Select a quest to view details"})]})})]})]})})},tf=({devMode:e,onUpdateDevMode:t,onCreateQuest:n,onCreateNPC:r,onCreateItem:a})=>{const[s,l]=C.useState("quest");C.useEffect(()=>{const m=y=>{e.enabled&&y.key!=="F1"&&y.stopPropagation()};if(e.enabled)return document.addEventListener("keydown",m,!0),()=>document.removeEventListener("keydown",m,!0)},[e.enabled]);const c=()=>{const m={id:e.questEditor.id||`quest_${Date.now()}`,title:e.questEditor.title||"New Quest",description:e.questEditor.description||"Quest description",objectives:e.questEditor.objectives.length>0?e.questEditor.objectives:[{id:"objective_1",description:"Complete objective",type:"kill",target:"enemy",current:0,required:1,completed:!1}],rewards:e.questEditor.rewards.length>0?e.questEditor.rewards:[{type:"experience",value:100}],status:"available",requiredLevel:e.questEditor.requiredLevel||1};n(m),t({...e,questEditor:{id:"",title:"",description:"",objectives:[],rewards:[],requiredLevel:1}})},o=()=>{const m={id:e.npcEditor.id||`npc_${Date.now()}`,name:e.npcEditor.name||"New NPC",type:e.npcEditor.type||"neutral",position:e.npcEditor.position||{x:400,y:400},sprite:"npc_placeholder",dialogue:e.npcEditor.dialogue.length>0?e.npcEditor.dialogue:[{id:"greeting",text:"Hello, traveler!",choices:[{id:"goodbye",text:"Goodbye",nextNode:"goodbye"}]},{id:"goodbye",text:"Safe travels!",choices:[]}],inventory:e.npcEditor.inventory||[],faction:e.npcEditor.faction||"neutral",isHostile:e.npcEditor.isHostile||!1};r(m),t({...e,npcEditor:{id:"",name:"",type:"neutral",position:{x:400,y:400},dialogue:[],inventory:[],faction:"neutral",isHostile:!1}})},d=()=>{const m={id:e.itemEditor.id||`item_${Date.now()}`,name:e.itemEditor.name||"New Item",type:e.itemEditor.type||"material",rarity:e.itemEditor.rarity||"common",description:e.itemEditor.description||"Item description",stats:e.itemEditor.stats||{},value:e.itemEditor.value||10,sprite:"item_placeholder",stackable:e.itemEditor.stackable||!1};a(m),t({...e,itemEditor:{id:"",name:"",type:"material",rarity:"common",description:"",stats:{},value:10,stackable:!1}})};return e.enabled?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-3xl font-bold text-purple-400 flex items-center gap-2",children:[i.jsx($i,{className:"w-8 h-8"}),"Developer Mode"]}),i.jsx("button",{onClick:()=>t({...e,enabled:!1}),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg",children:"Close Dev Mode"})]}),i.jsx("div",{className:"flex space-x-4 mb-6",children:[{id:"quest",label:"Quests",icon:ir},{id:"npc",label:"NPCs",icon:Tp},{id:"item",label:"Items",icon:$e},{id:"terrain",label:"Terrain",icon:tu}].map(m=>i.jsxs("button",{onClick:()=>l(m.id),className:`
                flex items-center gap-2 px-4 py-2 rounded-lg transition-all
                ${s===m.id?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}
              `,children:[i.jsx(m.icon,{className:"w-4 h-4"}),m.label]},m.id))}),i.jsxs("div",{className:"overflow-y-auto max-h-[60vh]",children:[s==="quest"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-xl font-bold text-yellow-400",children:"Quest Editor"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Quest ID"}),i.jsx("input",{type:"text",value:e.questEditor.id,onChange:m=>t({...e,questEditor:{...e.questEditor,id:m.target.value}}),placeholder:"quest_id",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),i.jsx("input",{type:"text",value:e.questEditor.title,onChange:m=>t({...e,questEditor:{...e.questEditor,title:m.target.value}}),placeholder:"Quest Title",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),i.jsx("textarea",{value:e.questEditor.description,onChange:m=>t({...e,questEditor:{...e.questEditor,description:m.target.value}}),placeholder:"Quest description...",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white h-24"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Required Level"}),i.jsx("input",{type:"number",value:e.questEditor.requiredLevel,onChange:m=>t({...e,questEditor:{...e.questEditor,requiredLevel:parseInt(m.target.value)||1}}),min:"1",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),i.jsxs("button",{onClick:c,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg flex items-center gap-2",children:[i.jsx(Pa,{className:"w-4 h-4"}),"Create Quest"]})]}),s==="npc"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-xl font-bold text-yellow-400",children:"NPC Editor"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"NPC ID"}),i.jsx("input",{type:"text",value:e.npcEditor.id,onChange:m=>t({...e,npcEditor:{...e.npcEditor,id:m.target.value}}),placeholder:"npc_id",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name"}),i.jsx("input",{type:"text",value:e.npcEditor.name,onChange:m=>t({...e,npcEditor:{...e.npcEditor,name:m.target.value}}),placeholder:"NPC Name",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Type"}),i.jsxs("select",{value:e.npcEditor.type,onChange:m=>t({...e,npcEditor:{...e.npcEditor,type:m.target.value}}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[i.jsx("option",{value:"neutral",children:"Neutral"}),i.jsx("option",{value:"trader",children:"Trader"}),i.jsx("option",{value:"quest_giver",children:"Quest Giver"}),i.jsx("option",{value:"recruitable",children:"Recruitable"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Faction"}),i.jsx("input",{type:"text",value:e.npcEditor.faction,onChange:m=>t({...e,npcEditor:{...e.npcEditor,faction:m.target.value}}),placeholder:"Faction",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:e.npcEditor.isHostile,onChange:m=>t({...e,npcEditor:{...e.npcEditor,isHostile:m.target.checked}}),className:"rounded"}),i.jsx("span",{className:"text-gray-300",children:"Hostile"})]})}),i.jsxs("button",{onClick:o,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg flex items-center gap-2",children:[i.jsx(Pa,{className:"w-4 h-4"}),"Create NPC"]})]}),s==="item"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-xl font-bold text-yellow-400",children:"Item Editor"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Item ID"}),i.jsx("input",{type:"text",value:e.itemEditor.id,onChange:m=>t({...e,itemEditor:{...e.itemEditor,id:m.target.value}}),placeholder:"item_id",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name"}),i.jsx("input",{type:"text",value:e.itemEditor.name,onChange:m=>t({...e,itemEditor:{...e.itemEditor,name:m.target.value}}),placeholder:"Item Name",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Type"}),i.jsxs("select",{value:e.itemEditor.type,onChange:m=>t({...e,itemEditor:{...e.itemEditor,type:m.target.value}}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[i.jsx("option",{value:"weapon",children:"Weapon"}),i.jsx("option",{value:"armor",children:"Armor"}),i.jsx("option",{value:"helmet",children:"Helmet"}),i.jsx("option",{value:"boots",children:"Boots"}),i.jsx("option",{value:"accessory",children:"Accessory"}),i.jsx("option",{value:"consumable",children:"Consumable"}),i.jsx("option",{value:"material",children:"Material"}),i.jsx("option",{value:"quest",children:"Quest Item"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Rarity"}),i.jsxs("select",{value:e.itemEditor.rarity,onChange:m=>t({...e,itemEditor:{...e.itemEditor,rarity:m.target.value}}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[i.jsx("option",{value:"common",children:"Common"}),i.jsx("option",{value:"uncommon",children:"Uncommon"}),i.jsx("option",{value:"rare",children:"Rare"}),i.jsx("option",{value:"epic",children:"Epic"}),i.jsx("option",{value:"legendary",children:"Legendary"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Value"}),i.jsx("input",{type:"number",value:e.itemEditor.value,onChange:m=>t({...e,itemEditor:{...e.itemEditor,value:parseInt(m.target.value)||0}}),min:"0",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),i.jsx("textarea",{value:e.itemEditor.description,onChange:m=>t({...e,itemEditor:{...e.itemEditor,description:m.target.value}}),placeholder:"Item description...",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white h-24"})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:e.itemEditor.stackable,onChange:m=>t({...e,itemEditor:{...e.itemEditor,stackable:m.target.checked}}),className:"rounded"}),i.jsx("span",{className:"text-gray-300",children:"Stackable"})]})}),i.jsxs("button",{onClick:d,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg flex items-center gap-2",children:[i.jsx(Pa,{className:"w-4 h-4"}),"Create Item"]})]}),s==="terrain"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-xl font-bold text-yellow-400",children:"Terrain Editor"}),i.jsx("p",{className:"text-gray-400",children:"Terrain editing tools coming soon..."})]})]}),i.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-700",children:[i.jsx("h4",{className:"text-lg font-bold text-gray-300 mb-4",children:"Import/Export Tools"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[i.jsx(yp,{className:"w-4 h-4"}),"Export Data"]}),i.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[i.jsx(Pp,{className:"w-4 h-4"}),"Import Data"]}),i.jsxs("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[i.jsx(bl,{className:"w-4 h-4"}),"Save Template"]})]})]})]})}):i.jsx("div",{className:"fixed bottom-4 right-4",children:i.jsx("button",{onClick:()=>t({...e,enabled:!0}),className:"bg-purple-600 hover:bg-purple-700 text-white p-3 rounded-full shadow-lg",title:"Enable Dev Mode",children:i.jsx($i,{className:"w-6 h-6"})})})},nf=({onLoadGame:e,onMainMenu:t})=>{const{playMusic:n}=Ar();return C.useEffect(()=>{const r=a=>{a.stopPropagation()};return document.addEventListener("keydown",r,!0),()=>document.removeEventListener("keydown",r,!0)},[]),C.useEffect(()=>{n("defeat",.4,!1)},[n]),i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 rounded-lg p-8 max-w-md w-full mx-4 border-4 border-red-600 text-center",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx(Ep,{className:"w-24 h-24 mx-auto mb-4 text-red-500 animate-pulse"}),i.jsx("h2",{className:"text-4xl font-bold text-red-400 mb-2",children:"GAME OVER"}),i.jsx("p",{className:"text-gray-300 text-lg",children:"You have fallen in the wasteland..."})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("button",{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-all flex items-center justify-center gap-2",children:[i.jsx(nu,{className:"w-5 h-5"}),"Load Last Save"]}),i.jsxs("button",{onClick:t,className:"w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-all flex items-center justify-center gap-2",children:[i.jsx(bp,{className:"w-5 h-5"}),"Main Menu"]})]}),i.jsx("div",{className:"mt-6 text-sm text-gray-500",children:'"In the wasteland, death is just another beginning..."'})]})})};function rf(){const{gameState:e,settings:t,gameMode:n,setGameMode:r,createNewGame:a,loadGame:s,saveGame:l,updateSettings:c,updateGameState:o,startNewGame:d,returnToMenu:m,quitGame:y,handleDialogueChoice:u,completeQuest:h,updateQuestProgress:x}=lp(),[v,N]=C.useState(!1),[g,p]=C.useState(!1),[f,k]=C.useState(null),[j,E]=C.useState(!1),[b,M]=C.useState(null),[D,q]=C.useState(!1);C.useRef(null);const[Me,wt]=C.useState(!1);C.useEffect(()=>{const _=O=>{k(O.detail)};return window.addEventListener("openLootable",_),()=>window.removeEventListener("openLootable",_)},[]),C.useEffect(()=>{e&&e.player.health<=0&&!D&&q(!0)},[e==null?void 0:e.player.health]);const Wt=()=>{console.log("Settings clicked")},Dr=(_,O)=>{e&&console.log("Using item:",_.name,"on character:",O)},$r=(_,O)=>{if(e){const A=JSON.parse(JSON.stringify(e));let H=A.party.find(Wn=>Wn.id===O);if(!H)return;const Z=A.inventory.findIndex(Wn=>Wn.id===_.id);Z>=0&&A.inventory.splice(Z,1);const ue=_.type,cn=H.equipment[ue];cn&&A.inventory.push(cn),H.equipment[ue]=_,P(H);const kl=A.allCharacters.findIndex(Wn=>Wn.id===O);kl>=0&&(A.allCharacters[kl]=H),O===A.player.id&&(A.player=H),o(A)}},Fn=(_,O,A)=>{e&&$r(O,_)},Hn=(_,O)=>{if(e){const A=JSON.parse(JSON.stringify(e));let H=A.party.find(cn=>cn.id===_);if(!H)return;const Z=H.equipment[O];if(!Z)return;A.inventory.push(Z),H.equipment[O]=void 0,P(H);const ue=A.allCharacters.findIndex(cn=>cn.id===_);ue>=0&&(A.allCharacters[ue]=H),_===A.player.id&&(A.player=H),o(A)}},P=_=>{const O=_.stats;let A={damage:0,defense:0,strength:0,agility:0,intelligence:0,endurance:0,luck:0,criticalChance:0};Object.values(_.equipment).forEach(H=>{H!=null&&H.stats&&Object.entries(H.stats).forEach(([Z,ue])=>{Z in A&&(A[Z]+=ue||0)})}),_.derivedStats={carryWeight:(O.strength+A.strength)*10,actionPoints:Math.floor((O.agility+A.agility)/2),criticalChance:O.luck+A.luck+A.criticalChance,damageResistance:A.defense,radiationResistance:(O.endurance+A.endurance)*2},_.equipmentBonuses=A},R=(_,O)=>{if(e!=null&&e.combat){const A=window.gameEngine;A&&A.handleCombatAction(_,O)}},z=()=>{if(e){const _={...e};_.combat=void 0,_.gameMode="exploration",o(_)}},Y=()=>{if(e){const _={...e};_.gameMode="exploration",o(_)}},ne=()=>{if(e){const _={...e};_.gameMode="exploration",o(_)}},on=()=>{if(e){const _={...e};_.dialogue=void 0,_.gameMode="exploration",o(_)}},tt=()=>{if(e){const _={...e};_.gameMode="exploration",o(_)}},Bn=()=>{if(e){const _={...e};_.gameMode="exploration",o(_)}},nt=()=>{if(e){const _={...e};_.gameMode="exploration",o(_)}},Vt=_=>{if(M(_),E(!0),e){const O={...e};O.dialogue=void 0,o(O)}},iu=()=>{if(E(!1),M(null),e){const _={...e};_.gameMode="exploration",o(_)}},au=(_,O)=>{if(e){const A=_.value*O;if(e.gold>=A){const H={...e};H.gold-=A;const Z=H.inventory.find(ue=>ue.id===_.id);Z&&Z.stackable?Z.quantity=(Z.quantity||1)+O:H.inventory.push({..._,quantity:_.stackable?O:1}),o(H)}}},su=(_,O)=>{if(e){const A=Math.floor(_.value*.6)*O,H={...e};H.gold+=A;const Z=H.inventory.findIndex(ue=>ue.id===_.id);if(Z>=0){const ue=H.inventory[Z];ue.quantity&&ue.quantity>O?ue.quantity-=O:H.inventory.splice(Z,1)}o(H)}},lu=_=>{e&&o({...e,devMode:_})},ou=_=>{e&&o({...e,quests:[...e.quests,_]})},cu=_=>{e&&o({...e,currentMap:{...e.currentMap,npcs:[...e.currentMap.npcs,_]}})},du=_=>{e&&o({...e,inventory:[...e.inventory,_]})},jl=(_,O)=>{if(e&&f){const A=e.inventory.find(Z=>Z.id===_.id&&Z.stackable);A?A.quantity=(A.quantity||1)+(O||1):e.inventory.push({..._,quantity:O||1});const H=f.items.findIndex((Z,ue)=>`${Z.id}_${ue}`==`${_.id}_${f.items.indexOf(_)}`);H>=0&&f.items.splice(H,1),o({...e})}},uu=()=>{e&&f&&(f.items.forEach(_=>{jl(_,_.quantity)}),f.items=[],f.looted=!0,o({...e}))},hu=()=>{q(!1),r("menu")},mu=()=>{q(!1),r("menu"),o(null)},pu=()=>{wt(!0)},fu=()=>{wt(!1),d()};if(Me)return i.jsx(Lp,{onComplete:fu});switch(n){case"menu":return i.jsx(Ip,{onNewGame:pu,onLoadGame:s,onSettings:Wt,onQuit:y,settings:t,onUpdateSettings:c});case"character-creation":return i.jsx(Rp,{onCreateCharacter:_=>a(_.name,_.class),onBack:m});case"playing":return e?D?i.jsx(nf,{onLoadGame:hu,onMainMenu:mu}):e.gameMode==="inventory"?i.jsx(Qp,{inventory:e.inventory,party:e.party,onUseItem:Dr,onEquipItem:$r,onClose:Y}):e.gameMode==="equipment"?i.jsx(Up,{party:e.party,inventory:e.inventory,onEquipItem:Fn,onUnequipItem:Hn,onClose:ne}):e.gameMode==="dialogue"&&e.dialogue?i.jsx(Do,{dialogue:e.dialogue,npcs:e.currentMap.npcs,onChoice:u,onOpenTrading:Vt,onClose:on}):j&&b?i.jsx(Gp,{npc:b,playerInventory:e.inventory,playerGold:e.gold,onBuyItem:au,onSellItem:su,onClose:iu}):e.gameMode==="quests"?i.jsx(Yp,{quests:e.quests,completedQuests:e.completedQuests,onClose:tt}):e.gameMode==="character"?i.jsx(Kp,{character:e.player,onClose:Bn}):e.gameMode==="map"?i.jsx(Xp,{gameMap:e.currentMap,playerPosition:e.player.position,visibilityMap:e.visibilityMap,onClose:nt}):e.gameMode==="combat"&&e.combat?i.jsx(Vp,{combatState:e.combat,onAction:R,onEndCombat:z}):i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"pointer-events-none",children:i.jsx(Wp,{player:e.player,gold:e.gold,gameTime:e.gameTime,dayNightCycle:e.dayNightCycle,weather:e.weather,onOpenInventory:()=>{const _={...e};_.gameMode="inventory",o(_)},onOpenEquipment:()=>{const _={...e};_.gameMode="equipment",o(_)},onOpenCharacter:()=>{const _={...e};_.gameMode="character",o(_)},onOpenQuests:()=>{const _={...e};_.gameMode="quests",o(_)},onOpenMap:()=>{const _={...e};_.gameMode="map",o(_)},onSave:()=>l(1),onMenu:m})}),i.jsx(Bp,{gameState:e,settings:t,onGameStateChange:o}),f&&i.jsx(Zp,{lootable:f,playerInventory:e.inventory,onTakeItem:jl,onTakeAll:uu,onClose:()=>k(null)}),e.dialogue&&i.jsx(Do,{dialogue:e.dialogue,npcs:e.currentMap.npcs,onChoice:u,onOpenTrading:Vt,onClose:()=>{o({...e,dialogue:void 0,gameMode:"exploration"})}}),g&&i.jsx(ef,{quests:e.quests,completedQuests:e.completedQuests,onClose:()=>p(!1)}),v&&i.jsx(Jp,{character:e.player,onClose:()=>N(!1)}),e.devMode&&i.jsx(tf,{devMode:e.devMode,onUpdateDevMode:lu,onCreateQuest:ou,onCreateNPC:cu,onCreateItem:du}),i.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/70 backdrop-blur-sm text-white p-4 rounded-lg border border-gray-600 transform transition-all hover:scale-105",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full animate-pulse"}),i.jsx("h3",{className:"font-bold",children:"Controls"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[i.jsx("div",{children:"• WASD / Arrows: Move"}),i.jsx("div",{children:"• Space: Interact"}),i.jsx("div",{children:"• I: Inventory"}),i.jsx("div",{children:"• E: Equipment"}),i.jsx("div",{children:"• C: Character"}),i.jsx("div",{children:"• Q: Quests"}),i.jsx("div",{children:"• M: Map"}),i.jsx("div",{children:"• F1: Dev Mode"}),i.jsx("div",{children:"• ESC: Menu"}),e.currentMap.isInterior&&i.jsx("div",{className:"text-yellow-400 font-bold col-span-2",children:"• ESC: Exit Building"})]})]})]}):i.jsx("div",{children:"Loading..."});default:return i.jsx("div",{children:"Loading..."})}}Xd(document.getElementById("root")).render(i.jsx(C.StrictMode,{children:i.jsx(rf,{})}));
